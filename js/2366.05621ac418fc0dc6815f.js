"use strict";(self.webpackChunkansible_hub_ui=self.webpackChunkansible_hub_ui||[]).push([[2366],{22366:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(87462),r=a(15671),s=a(43144),o=a(79340),i=a(82963),l=a(61120),c=a(92950),u=a.n(c),m=a(14057),p=a(61542),d=a(61647),f=a(92518),h=a(98314);var g=function(e){(0,o.Z)(p,e);var t,a,c=(t=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(t);if(a){var r=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function p(){return(0,r.Z)(this,p),c.apply(this,arguments)}return(0,s.Z)(p,[{key:"render",value:function(){return!this.context.user||this.context.user.is_anonymous?u().createElement(m.iA,null):u().createElement(h.T,(0,n.Z)({},this.props,{namespacePath:d.nB.namespaceDetail,filterOwner:!0}))}}]),p}(u().Component);const y=(0,f.EN)(g);g.contextType=p.I},98314:(e,t,a)=>{a.d(t,{T:()=>k});var n=a(42982),r=a(87462),s=a(15671),o=a(43144),i=a(97326),l=a(79340),c=a(82963),u=a(61120),m=a(4942),p=a(13855),d=a(35356),f=a(92950),h=a.n(f),g=a(62012),y=a(45586),v=a(14057),E=a(42807),N=a(61542),P=a(61647),_=a(92518),T=a(43819);var k=function(e){(0,l.Z)(N,e);var t,a,f=(t=N,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(t);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function N(e){var t;(0,s.Z)(this,N),t=f.call(this,e),(0,m.Z)((0,i.Z)(t),"nonURLParams",["tenant"]),(0,m.Z)((0,i.Z)(t),"handleModalToggle",(function(){t.setState((function(e){return{isModalOpen:!e.isModalOpen}}))}));var a=T.q.parseParamString(e.location.search,["page","page_size"]);return a.page_size||(a.page_size=20),a.sort||(a.sort="name"),t.state={alerts:[],namespaces:void 0,itemCount:0,params:a,hasPermission:!0,isModalOpen:!1,loading:!0,inputText:a.keywords||""},t}return(0,o.Z)(N,[{key:"componentDidMount",value:function(){var e=this;this.setState({alerts:this.context.alerts||[]}),this.context.setAlerts([]),this.props.filterOwner?y.V$.list({}).then((function(t){0!==t.data.meta.count?e.loadNamespaces():e.setState({hasPermission:!1,namespaces:[],loading:!1})})).catch((function(t){var a=t.response,n=a.status,r=a.statusText;e.setState({namespaces:[],itemCount:0,loading:!1},(function(){return e.addAlert({variant:"danger",title:p.ag._("Namespaces list could not be displayed."),description:(0,_.N3)(n,r)})}))})):this.loadNamespaces()}},{key:"render",value:function(){var e=this;if(this.state.redirect)return h().createElement(g.Navigate,{to:this.state.redirect});var t=this.state,a=t.alerts,n=t.namespaces,r=t.params,s=t.itemCount,o=t.loading,i=t.inputText,l=this.props.filterOwner,c=this.context.hasPermission,u=!(0,_.vS)(this.state.params,["keywords"])&&void 0!==n&&0===n.length;if(o)return h().createElement(v.gO,null);var m=p.ag._(P.Th.name);return h().createElement("div",{className:"hub-namespace-page"},h().createElement(v.RZ,{isOpen:this.state.isModalOpen,toggleModal:this.handleModalToggle,onCreateSuccess:function(t){return e.setState({redirect:(0,P.dI)(P.nB.namespaceDetail,{namespace:t.name},{tab:"collections"})})}}),h().createElement(v.UW,{alerts:a,closeAlert:function(t){return e.closeAlert(t)}}),h().createElement(v.UP,{title:m},!this.context.user.is_anonymous&&h().createElement("div",{className:"hub-tab-link-container"},h().createElement("div",{className:"tabs"},h().createElement(v.Ak,{tabs:[{title:p.ag._("All"),link:(0,P.dI)(P.nB.partners),active:!l},{title:p.ag._("My namespaces"),link:(0,P.dI)(P.nB.myNamespaces),active:l}]}))),u?null:h().createElement("div",{className:"toolbar"},h().createElement(d.Toolbar,null,h().createElement(d.ToolbarContent,null,h().createElement(d.ToolbarGroup,{style:{marginLeft:0}},h().createElement(d.ToolbarItem,null,h().createElement(v.Kv,{inputText:i,onChange:function(t){return e.setState({inputText:t})},updateParams:function(t){return e.updateParams(t,(function(){return e.loadNamespaces()}))},params:r,filterConfig:[{id:"keywords",title:p.ag._("keywords")}]}),h().createElement(v.M$,{style:{marginTop:"16px"},updateParams:function(t){e.updateParams(t,(function(){return e.loadNamespaces()})),e.setState({inputText:""})},params:r,ignoredParams:["page_size","page","sort"],niceNames:{keywords:p.ag._("keywords")}}))),h().createElement(d.ToolbarGroup,{style:{alignSelf:"start"}},h().createElement(d.ToolbarItem,null,h().createElement(v.PE,{options:[{title:p.ag._("Name"),id:"name",type:"alpha"}],params:r,updateParams:function(t){return e.updateParams(t,(function(){return e.loadNamespaces()}))}})),c("galaxy.add_namespace")&&h().createElement(d.ToolbarItem,{key:"create-button"},h().createElement(d.Button,{variant:"primary",onClick:this.handleModalToggle},p.ag._("Create")))))),h().createElement("div",null,h().createElement(v.tl,{params:r,updateParams:function(t){return e.updateParams(t,(function(){return e.loadNamespaces()}))},count:s,isCompact:!0,perPageOptions:E.g.CARD_DEFAULT_PAGINATION_OPTIONS})))),h().createElement("section",{className:"card-area"},this.renderBody()),u||o?null:h().createElement("section",{className:"footer"},h().createElement(v.tl,{params:r,updateParams:function(t){return e.updateParams(t,(function(){return e.loadNamespaces()}))},perPageOptions:E.g.CARD_DEFAULT_PAGINATION_OPTIONS,count:s})))}},{key:"renderBody",value:function(){var e=this,t=this.state,a=t.namespaces,n=t.loading,s=this.props,o=s.namespacePath,i=s.filterOwner,l=this.context.hasPermission,c=p.ag._("No namespaces yet"),u=i?p.ag._("This account is not set up to manage any namespaces"):p.ag._("Namespaces will appear once created"),m=l("galaxy.add_namespace")?h().createElement(d.Button,{variant:"primary",onClick:function(){return e.handleModalToggle()}},p.ag._("Create")):null;return n?h().createElement("section",null,h().createElement(v.AW,null),";"):0===a.length?h().createElement("section",null,(0,_.vS)(this.state.params,["keywords"])?h().createElement(v.ei,null):h().createElement(v.vv,{title:c,description:u,button:m})):h().createElement("section",{className:"card-layout"},a.map((function(e,t){return h().createElement("div",{key:t,className:"card-wrapper"},h().createElement(v._v,(0,r.Z)({namespaceURL:(0,P.dI)(o,{namespace:e.name}),key:t},e)))})))}},{key:"loadNamespaces",value:function(){var e=this,t=this.props.filterOwner?y.V$:y.jZ;this.setState({loading:!0},(function(){t.list(e.state.params).then((function(t){e.setState({namespaces:t.data.data,itemCount:t.data.meta.count,loading:!1})})).catch((function(t){var a=t.response,n=a.status,r=a.statusText;e.setState({namespaces:[],itemCount:0,loading:!1},(function(){return e.addAlert({variant:"danger",title:p.ag._("Namespaces list could not be displayed."),description:(0,_.N3)(n,r)})}))}))}))}},{key:"updateParams",get:function(){return T.q.updateParamsMixin(this.nonURLParams)}},{key:"addAlert",value:function(e){this.setState({alerts:[].concat((0,n.Z)(this.state.alerts),[e])})}},{key:"closeAlert",get:function(){return(0,v.NQ)("alerts")}}]),N}(h().Component);k.contextType=N.I}}]);
//# sourceMappingURL=../sourcemaps/2366.9eee37da571aca634bb2bb72956d2ad1.js.map