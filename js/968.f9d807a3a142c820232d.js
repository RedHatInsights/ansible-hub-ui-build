"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[968],{79968:(e,t,n)=>{n.r(t),n.d(t,{SignatureKeysList:()=>x,default:()=>A});var a=n(45458),r=n(23029),u=n(92901),i=n(56822),l=n(53954),o=n(15361),s=n(64467),c=n(47712),m=n(30769),p=n(5924),d=n(64490),f=n(52565),y=n(99780),g=n(31554),h=n(97192),b=n(26805),E=n(52068),v=n(44914),k=n.n(v),P=n(88696),_=n(35894),O=n(97899),T=n(39799);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e,t,n){return t=(0,l.A)(t),(0,i.A)(e,w()?Reflect.construct(t,n||[],(0,l.A)(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var x=function(e){function t(e){var n;(0,r.A)(this,t),n=j(this,t,[e]);var a=T.mb.parseParamString(e.location.search,["page","page_size"]);return a.page_size||(a.page_size=100),n.state={params:a,items:[],loading:!0,itemCount:0,alerts:[],unauthorised:!1,inputText:""},n}return(0,o.A)(t,e),(0,u.A)(t,[{key:"componentDidMount",value:function(){!this.context.user||this.context.user.is_anonymous?this.setState({loading:!1,unauthorised:!0}):this.query()}},{key:"render",value:function(){var e=this,t=this.state,n=t.params,a=t.itemCount,r=t.loading,u=t.items,i=t.alerts,l=t.unauthorised,o=0===u.length&&!(0,T.l)(n,["name"]);return k().createElement(k().Fragment,null,k().createElement(_.NS,{alerts:i,closeAlert:function(t){return(0,_.R$)(t,{alerts:i,setAlerts:function(t){return e.setState({alerts:t})}})}}),k().createElement(_.T$,{title:c.Ru._({id:"nfApfT"})}),l?k().createElement(_.Pd,null):o&&!r?k().createElement(_.a4,{title:c.Ru._({id:"qhYur0"}),description:c.Ru._({id:"X4QDO8"})}):k().createElement(_.gZ,null,r?k().createElement(_.kt,null):k().createElement("section",{className:"body"},k().createElement("div",{className:"hub-toolbar"},k().createElement(m.M,null,k().createElement(p.P,null,k().createElement(d.$,null,k().createElement(f.T,null,k().createElement(_.Mw,{inputText:this.state.inputText,onChange:function(t){return e.setState({inputText:t})},updateParams:function(t){t.page=1,e.updateParams(t,(function(){return e.query()}))},params:n,filterConfig:[{id:"name",title:c.Ru._({id:"6YtxFj"})}]}))))),k().createElement(_.w1,{params:n,updateParams:function(t){return e.updateParams(t,(function(){return e.query()}))},count:a,isTop:!0})),k().createElement("div",null,k().createElement(_.lU,{updateParams:function(t){e.updateParams(t,(function(){return e.query()})),e.setState({inputText:""})},params:n,ignoredParams:["page_size","page","sort","ordering"],niceNames:{name:c.Ru._({id:"6YtxFj"})}})),r?k().createElement(_.kt,null):this.renderTable(n),k().createElement(_.w1,{params:n,updateParams:function(t){return e.updateParams(t,(function(){return e.query()}))},count:a}))))}},{key:"renderTable",value:function(e){var t=this,n=this.state.items;if(!n.length)return k().createElement(_.br,null);var a={headers:[{title:c.Ru._({id:"6YtxFj"}),type:"none",id:"name"},{title:c.Ru._({id:"H28h2C"}),type:"none",id:"pubkey_fingerprint"},{title:c.Ru._({id:"45O6zJ"}),type:"none",id:"pulp_created"},{title:c.Ru._({id:"WGwujV"}),type:"none",id:"public_key"},{title:"",type:"none",id:"kebab"}]};return k().createElement(g.X,{"aria-label":c.Ru._({id:"nfApfT"})},k().createElement(_.HW,{options:a,params:e,updateParams:function(e){e.page=1,t.updateParams(e,(function(){return t.query()}))}}),k().createElement(h.N,null,n.map((function(e,n){return t.renderTableRow(e,n)}))))}},{key:"renderTableRow",value:function(e,t){var n=e.name,a=e.pubkey_fingerprint,r=e.public_key,u=e.pulp_created,i=[k().createElement(y.t,{key:"download-key",onClick:function(){document.location="data:application/octet-stream,"+encodeURIComponent(r)}},c.Ru._({id:"m2jxM9"}))];return k().createElement(b.Tr,{key:t},k().createElement(E.Td,null,n),k().createElement(E.Td,{"data-cy":"hub-signature-list-fingerprint"},a),k().createElement(E.Td,null,k().createElement(_.gz,{date:u})),k().createElement(E.Td,null,k().createElement(_.Ck,{isCode:!0,isReadOnly:!0,variant:"expansion"},r)),k().createElement(_.dO,{kebabItems:i}))}},{key:"query",value:function(){var e=this;this.setState({loading:!0},(function(){P.L7.list(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,s.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({sort:"name"},e.state.params)).then((function(t){e.setState({items:t.data.results,itemCount:t.data.count,loading:!1})})).catch((function(t){var n=t.response,a=n.status,r=n.statusText;e.setState({loading:!1,items:[],itemCount:0}),e.addAlert({title:c.Ru._({id:"zMs/Nx"}),variant:"danger",description:(0,T.gJ)(a,r)})}))}))}},{key:"addAlert",value:function(e){this.setState({alerts:[].concat((0,a.A)(this.state.alerts),[e])})}},{key:"updateParams",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;T.mb.updateParams({params:e,navigate:function(e){return t.props.navigate(e)},setState:function(e){return t.setState(e,n)}})}}]),t}(v.Component);(0,s.A)(x,"contextType",O.B);const A=(0,T.y)(x)}}]);
//# sourceMappingURL=../sourcemaps/968.8dd3c50608b161a51a7e73ce50bc5ff5.js.map