"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[2584],{32584:(e,t,n)=>{n.r(t),n.d(t,{SignatureKeysList:()=>v,default:()=>k});var a=n(60888),r=n(52536),i=n(87088),u=n(92920),o=n(42232),l=n(76184),c=n(36884),s=n(72956),m=n(77104),p=n(18232),d=n.n(p),f=n(59072),y=n(49368),b=n(76708),h=n(58860);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e,t,n){return t=(0,l.c)(t),(0,o.c)(e,E()?Reflect.construct(t,n||[],(0,l.c)(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}var v=function(e){function t(e){var n;(0,i.c)(this,t),n=_(this,t,[e]);var a=h.us.parseParamString(e.location.search,["page","page_size"]);return a.page_size||(a.page_size=100),n.state={params:a,items:[],loading:!0,itemCount:0,alerts:[],unauthorised:!1,inputText:""},n}return(0,c.c)(t,e),(0,u.c)(t,[{key:"componentDidMount",value:function(){!this.context.user||this.context.user.is_anonymous?this.setState({loading:!1,unauthorised:!0}):this.query()}},{key:"render",value:function(){var e=this,t=this.state,n=t.params,a=t.itemCount,r=t.loading,i=t.items,u=t.alerts,o=t.unauthorised,l=0===i.length&&!(0,h.o5)(n,["name"]);return d().createElement(d().Fragment,null,d().createElement(y.WW,{alerts:u,closeAlert:function(t){return e.closeAlert(t)}}),d().createElement(y.wy,{title:s._s._({id:"nfApfT"})}),o?d().createElement(y.a8,null):l&&!r?d().createElement(y.BL,{title:s._s._({id:"qhYur0"}),description:s._s._({id:"X4QDO8"})}):d().createElement(y.GK,null,r?d().createElement(y.cI,null):d().createElement("section",{className:"body"},d().createElement("div",{className:"hub-toolbar"},d().createElement(m.Toolbar,null,d().createElement(m.ToolbarContent,null,d().createElement(m.ToolbarGroup,null,d().createElement(m.ToolbarItem,null,d().createElement(y.oh,{inputText:this.state.inputText,onChange:function(t){return e.setState({inputText:t})},updateParams:function(t){t.page=1,e.updateParams(t,(function(){return e.query()}))},params:n,filterConfig:[{id:"name",title:s._s._({id:"6YtxFj"})}]}))))),d().createElement(y.eM,{params:n,updateParams:function(t){return e.updateParams(t,(function(){return e.query()}))},count:a,isTop:!0})),d().createElement("div",null,d().createElement(y.IP,{updateParams:function(t){e.updateParams(t,(function(){return e.query()})),e.setState({inputText:""})},params:n,ignoredParams:["page_size","page","sort","ordering"],niceNames:{name:s._s._({id:"6YtxFj"})}})),r?d().createElement(y.cI,null):this.renderTable(n),d().createElement(y.eM,{params:n,updateParams:function(t){return e.updateParams(t,(function(){return e.query()}))},count:a}))))}},{key:"renderTable",value:function(e){var t=this,n=this.state.items;if(!n.length)return d().createElement(y.YX,null);var a={headers:[{title:s._s._({id:"6YtxFj"}),type:"none",id:"name"},{title:s._s._({id:"H28h2C"}),type:"none",id:"pubkey_fingerprint"},{title:s._s._({id:"45O6zJ"}),type:"none",id:"pulp_created"},{title:s._s._({id:"WGwujV"}),type:"none",id:"public_key"},{title:"",type:"none",id:"kebab"}]};return d().createElement("table",{"aria-label":s._s._({id:"nfApfT"}),className:"hub-c-table-content pf-c-table"},d().createElement(y.K_,{options:a,params:e,updateParams:function(e){e.page=1,t.updateParams(e,(function(){return t.query()}))}}),d().createElement("tbody",null,n.map((function(e,n){return t.renderTableRow(e,n)}))))}},{key:"renderTableRow",value:function(e,t){var n=e.name,a=e.pubkey_fingerprint,r=e.public_key,i=e.pulp_created,u=[d().createElement(m.DropdownItem,{key:"download-key",onClick:function(){document.location="data:application/octet-stream,"+encodeURIComponent(r)}},s._s._({id:"m2jxM9"}))];return d().createElement("tr",{key:t},d().createElement("td",null,n),d().createElement("td",{"data-cy":"hub-signature-list-fingerprint"},a),d().createElement("td",null,d().createElement(y.i4,{date:i})),d().createElement("td",null,d().createElement(y.cl,{isCode:!0,isReadOnly:!0,variant:"expansion"},r)),d().createElement(y.gJ,{kebabItems:u}))}},{key:"closeAlert",get:function(){return(0,y.Yi)("alerts")}},{key:"query",value:function(){var e=this;this.setState({loading:!0},(function(){f.nw.list(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({sort:"name"},e.state.params)).then((function(t){e.setState({items:t.data.results,itemCount:t.data.count,loading:!1})})).catch((function(t){var n=t.response,a=n.status,r=n.statusText;e.setState({loading:!1,items:[],itemCount:0}),e.addAlert({title:s._s._({id:"zMs/Nx"}),variant:"danger",description:(0,h._A)(a,r)})}))}))}},{key:"addAlert",value:function(e){this.setState({alerts:[].concat((0,a.c)(this.state.alerts),[e])})}},{key:"updateParams",get:function(){return h.us.updateParamsMixin()}}]),t}(d().Component);const k=(0,h.Ak)(v);v.contextType=b.c}}]);
//# sourceMappingURL=../sourcemaps/2584.1aab69b1cfe0c9a6e7be34dfc516f805.js.map