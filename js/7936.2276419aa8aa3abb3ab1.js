"use strict";(self.webpackChunkansible_hub_ui=self.webpackChunkansible_hub_ui||[]).push([[7936],{75907:(e,t,n)=>{n.d(t,{Bu:()=>d,bU:()=>f,PU:()=>v,MC:()=>_,Rq:()=>y,JJ:()=>b,sO:()=>g,DO:()=>h,e5:()=>k,cv:()=>O,hE:()=>E,W:()=>w});var r=n(35356),a=n(92950),o=n.n(a),i=n(41315),l=function(e){var t=e.buttonVariant,n=e.condition,a=void 0===n?function(){return!0}:n,l=e.disabled,c=void 0===l?function(){return null}:l,u=e.modal,s=void 0===u?null:u,d=e.onClick,m=e.title,p=e.visible,f=void 0===p?function(){return!0}:p;return{title:m,button:function(e,n){return a(n,e)&&f(e,n)?c(e,n)?o().createElement(i.u,{content:c(e,n),key:m},o().createElement(r.Button,{variant:t,isDisabled:!0},m)):o().createElement(r.Button,{variant:t,key:m,onClick:function(){return d(e,n)}},m):null},dropdownItem:function(e,t){return a(t,e)&&f(e,t)?c(e,t)?o().createElement(r.DropdownItem,{key:m,description:c(e,t),isDisabled:!0},m):o().createElement(r.DropdownItem,{key:m,onClick:function(){return d(e,t)}},m):null},modal:s,visible:f,disabled:c}},c=n(13855),u=n(61647),s=n(6640),d=l({condition:s.rH,title:c.ag._("Add remote"),onClick:function(e,t){return(0,t.navigate)((0,u.dI)(u.nB.ansibleRemoteEdit,{name:"_"}))}}),m=n(45586),p=n(92518),f=l({condition:s.nm,title:c.ag._("Delete"),modal:function(e){var t=e.addAlert,n=e.query,r=e.setState,a=e.state;return a.deleteModalOpen?o().createElement(i.X3,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){var n=e.name,r=e.pulpId,a=t.addAlert,o=t.setState,i=t.query;return m.GC.delete(r).then((function(e){var t=e.data;a((0,p.zT)(t.task,c.ag._("Removal started for remote {name}",{name:n}))),o({deleteModalOpen:null}),i()})).catch((0,p.rJ)(c.ag._("Failed to remove remote {name}",{name:n}),(function(){return null}),a))}(a.deleteModalOpen,{addAlert:t,setState:r,query:n})},name:a.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,a=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.LL)(a),name:n}})}}),v=l({title:c.ag._("Download CA certificate"),onClick:function(e){var t=e.ca_cert;return(0,p.Qz)(t,"ca_cert")},visible:function(e){return!!e.ca_cert}}),_=l({title:c.ag._("Download client certificate"),onClick:function(e){var t=e.client_cert;return(0,p.Qz)(t,"client_cert")},visible:function(e){return!!e.client_cert}}),y=l({title:c.ag._("Download requirements YAML"),onClick:function(e){var t=e.requirements_file;return(0,p.Qz)(t,"requirements.yml")},visible:function(e){return!!e.requirements_file}}),b=l({condition:s.DQ,title:c.ag._("Edit"),onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,u.dI)(u.nB.ansibleRemoteEdit,{name:n}))}}),g=l({title:c.ag._("Copy CLI configuration"),onClick:function(e,t){var n=t.addAlert,r=["[galaxy]","server_list = ".concat(e.name,"_repo"),"","[galaxy_server.".concat(e.name,"_repo]"),"url=".concat((0,p.qX)()),"token=<put your token here>"].join("\n");navigator.clipboard.writeText(r),n({title:c.ag._("Successfully copied to clipboard"),variant:"success",description:o().createElement("pre",null,r)})}}),h=l({condition:s.zN,title:c.ag._("Add repository"),onClick:function(e,t){return(0,t.navigate)((0,u.dI)(u.nB.ansibleRepositoryEdit,{name:"_"}))}}),k=l({condition:s.Xn,title:c.ag._("Delete"),modal:function(e){var t=e.addAlert,n=e.query,r=e.setState,a=e.state;return a.deleteModalOpen?o().createElement(i.Iq,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){var n=e.name,r=e.pulpId,a=t.addAlert,o=t.setState,i=t.query;return m.UX.delete(r).then((function(e){var t=e.data;a((0,p.zT)(t.task,c.ag._("Removal started for repository {name}",{name:n}))),o({deleteModalOpen:null}),i()})).catch((0,p.rJ)(c.ag._("Failed to remove repository {name}",{name:n}),(function(){return null}),a))}(a.deleteModalOpen,{addAlert:t,setState:r,query:n})},name:a.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,a=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.LL)(a),name:n}})}}),O=l({condition:s.lo,title:c.ag._("Edit"),onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,u.dI)(u.nB.ansibleRepositoryEdit,{name:n}))}}),E=l({condition:s.vn,title:c.ag._("Sync"),onClick:function(e,t){var n=e.name,r=e.pulp_href,a=t.addAlert,o=t.query,i=(0,p.LL)(r);m.UX.sync(i).then((function(e){var t=e.data;a((0,p.zT)(t.task,c.ag._('Sync started for repository "{name}".',{name:n}))),o()})).catch((0,p.rJ)(c.ag._('Failed to sync repository "{name}"',{name:n}),(function(){return null}),a))},visible:function(e,t){return(0,t.hasPermission)("ansible.change_collectionremote")},disabled:function(e){var t=e.remote,n=e.last_sync_task;return t?n&&["running","waiting"].includes(n.state)?c.ag._("Sync task is already queued."):null:c.ag._("There are no remotes associated with this repository.")}}),C=n(70885),A=n(14744),M=function(e){var t=e.version,n=e.cancelAction,i=e.revertAction,l=(0,a.useState)(!1),u=(0,C.Z)(l,2),s=u[0],d=u[1];return o().createElement(r.Modal,{actions:[o().createElement("div",{"data-cy":"delete-button",key:"delete"},o().createElement(r.Button,{key:"delete",onClick:function(){d(!0),i()},variant:"danger",isDisabled:s},c.ag._("Revert"),s&&o().createElement(r.Spinner,{size:"sm"}))),o().createElement(r.Button,{key:"cancel",onClick:n,variant:"link"},c.ag._("Cancel"))],isOpen:!0,onClose:n,title:c.ag._("Revert repository"),titleIconVariant:"warning",variant:"small","data-cy":"modal_checkbox"},o().createElement(A.cC,{id:"Are you sure you want to revert this repository to the version below?"}),o().createElement("br",null),o().createElement("b",null,t))},w=l({condition:s.Wt,title:c.ag._("Revert to this version"),modal:function(e){var t=e.addAlert,n=e.state,r=e.setState,a=e.query;return n.revertModal?o().createElement(M,{cancelAction:function(){return r({revertModal:null})},revertAction:function(){return function(e,t){var n=e.repositoryName,r=e.pulp_href,a=e.number,o=t.addAlert,i=t.setState,l=t.query,u=(0,p.LL)(r);return m.UX.revert(u,r).then((function(e){var t=e.data;o((0,p.zT)(t.task,c.ag._('Revert started for repository "{repositoryName}".',{repositoryName:n}))),i({revertModal:null}),l()})).catch((0,p.rJ)(c.ag._('Failed to revert repository "{repositoryName}" to version "{number}"',{repositoryName:n,number:a}),(function(){return i({revertModal:null})}),o))}(n.revertModal,{addAlert:t,setState:r,query:a})},version:n.revertModal.number}):null},onClick:function(e,t){var n=e.repositoryName,r=e.number,a=e.pulp_href;return(0,t.setState)({revertModal:{repositoryName:n,number:r,pulp_href:a}})},disabled:function(e){return e.isLatest?c.ag._("Already the current version"):null}})},67936:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(4942),a=n(13855),o=n(92950),i=n.n(o),l=n(62012),c=n(75907),u=n(45586),s=n(41315),d=n(61647),m=n(6640),p=n(92518);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=[c.JJ,c.Rq,c.MC,c.PU,c.bU];const y=(0,s.qP)({condition:m.MT,defaultPageSize:10,defaultSort:"-pulp_created",displayName:"AnsibleRemoteList",errorTitle:a.ag._("Remotes could not be displayed."),extraState:{},filterConfig:[{id:"name__icontains",title:a.ag._("Remote name")}],headerActions:[c.Bu],listItemActions:_,noDataButton:c.Bu.button,noDataDescription:a.ag._("Remotes will appear once created."),noDataTitle:a.ag._("No remotes yet"),query:function(e){var t=e.params;return u.GC.list(t)},renderTableRow:function(e,t,n){var r=e.name,a=e.pulp_href,o=e.url,c=(0,p.LL)(a),u=_.map((function(t){return t.dropdownItem(v(v({},e),{},{id:c}),n)}));return i().createElement("tr",{key:t},i().createElement("td",null,i().createElement(l.Link,{to:(0,d.dI)(d.nB.ansibleRemoteDetail,{name:r})},r)),i().createElement("td",null,i().createElement(s.TO,{url:o})),i().createElement(s.cT,{kebabItems:u}))},sortHeaders:[{title:a.ag._("Remote name"),type:"alpha",id:"name"},{title:a.ag._("URL"),type:"alpha",id:"url"}],title:a.ag._("Remotes")})},6640:(e,t,n)=>{n.d(t,{DQ:()=>l,MT:()=>c,Wt:()=>_,X0:()=>v,Xn:()=>d,fY:()=>f,lo:()=>m,nm:()=>i,rH:()=>o,vn:()=>p,yA:()=>u,zN:()=>s});var r=function(e){return function(t){var n=t.hasPermission,r=t.user;return n(e)||(null==r?void 0:r.is_superuser)}},a=function(e){return function(t,n){var r=t.hasPermission,a=t.hasObjectPermission,o=t.user;return r(e)||(null==a?void 0:a(e,n))||(null==o?void 0:o.is_superuser)}},o=r("ansible.add_collectionremote"),i=a("ansible.delete_collectionremote"),l=a("ansible.change_collectionremote"),c=a("ansible.view_collectionremote"),u=a("ansible.manage_roles_collectionremote"),s=r("ansible.add_ansiblerepository"),d=a("ansible.delete_ansiblerepository"),m=a("ansible.change_ansiblerepository"),p=m,f=function(e){var t=e.user;return t&&!t.is_anonymous},v=a("ansible.manage_roles_ansiblerepository"),_=m}}]);
//# sourceMappingURL=../sourcemaps/7936.9d67d9fb49fb353fe87133e3b8eb7b11.js.map