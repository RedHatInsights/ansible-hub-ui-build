(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{775:function(t,e,o){"use strict";o.r(e),o.d(e,"Repository",(function(){return M}));var n,a,r,s,i,c,u,l=o(0),d=o(35),m=o(236),p=o(17),f=o(14),h=o(23),E=o(53),g=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),y=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},b=function(){return(b=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},M=function(){},w=function(t){function e(e){var o=t.call(this,e)||this;o.nonQueryStringParams=["repository"],o.selectRemoteToEdit=function(t){o.unModifiedRemote=b({},t),o.setState({remoteToEdit:b({},t),showRemoteFormModal:!0})},o.refreshContent=function(){o.loadContent(!1)},o.loadContent=function(t){void 0===t&&(t=!0);var e=o.state.params;o.setState({loading:t},(function(){if("remote"==e.tab)h.l.list(p.a.getReduced(e,o.nonQueryStringParams)).then((function(t){o.setState({loading:!1,content:t.data.data,itemCount:t.data.meta.count})}));else{var t=h.d;"insights"===f.a.INSIGHTS_DEPLOYMENT_MODE&&(t=h.g),t.list().then((function(t){o.setState({loading:!1,content:t.data.data,itemCount:t.data.meta.count})}))}}))};var n=p.a.parseParamString(e.location.search,["page","page_size"]);return n.page_size||(n.page_size=10),n.tab||(n.tab="local"),n.tab||"insights"!==f.a.STANDALONE_DEPLOYMENT_MODE||(n.tab="local"),o.state={itemCount:1,params:n,loading:!1,showRemoteFormModal:!1,content:[],remoteToEdit:void 0,errorMessages:{}},o}return g(e,t),e.prototype.componentDidMount=function(){this.loadContent()},e.prototype.render=function(){var t=this,e=this.state,o=e.params,n=e.loading,c=e.content,u=e.remoteToEdit,d=e.showRemoteFormModal,E=e.errorMessages,g=[_(a||(a=y(["Local"],["Local"]))),_(r||(r=y(["Remote"],["Remote"])))];return l.createElement(l.Fragment,null,u&&d&&l.createElement(m.M,{remote:u,updateRemote:function(e){return t.setState({remoteToEdit:e})},saveRemote:function(){var e=t.state.remoteToEdit;try{var o=e.repositories[0].distributions[0].base_path;h.l.smartUpdate(o,e,t.unModifiedRemote).then((function(e){t.setState({errorMessages:{},showRemoteFormModal:!1,remoteToEdit:void 0},(function(){return t.loadContent()}))})).catch((function(e){return t.setState({errorMessages:Object(p.g)(e)})}))}catch(e){t.setState({errorMessages:{__nofield:_(s||(s=y(["Can't update remote without a distribution attached to it."],["Can't update remote without a distribution attached to it."])))}})}},errorMessages:E,showModal:d,closeModal:function(){return t.setState({showRemoteFormModal:!1,errorMessages:{}})}}),l.createElement(m.d,{title:_(i||(i=y(["Repo Management"],["Repo Management"])))},"insights"!==f.a.STANDALONE_DEPLOYMENT_MODE||n?null:l.createElement("div",{className:"header-bottom"},l.createElement("div",{className:"tab-link-container"},l.createElement("div",{className:"tabs"},l.createElement(m.V,{tabs:g,params:o,updateParams:function(e){t.setState({content:[]},(function(){return t.updateParams(e,(function(){return t.loadContent()}))}))}}))))),n?l.createElement(m.y,null):this.renderContent(o,c))},e.prototype.renderContent=function(t,e){var o=this,n=this.context.user;return"insights"===f.a.INSIGHTS_DEPLOYMENT_MODE||t.tab&&"local"===t.tab.toLowerCase()?l.createElement(m.C,{className:"repository-list"},l.createElement("section",{className:"body"},l.createElement(m.A,{repositories:e,updateParams:this.updateParams}))):t.tab&&"remote"===t.tab.toLowerCase()?0===e.length?l.createElement(m.s,{title:_(c||(c=y(["No remote repositories yet"],["No remote repositories yet"]))),description:_(u||(u=y(["Remote repositories will appear once added"],["Remote repositories will appear once added"])))}):l.createElement(m.C,{className:"repository-list"},l.createElement("section",{className:"body"},l.createElement(m.N,{remotes:e,updateParams:this.updateParams,editRemote:function(t){return o.selectRemoteToEdit(t)},syncRemote:function(t){return h.l.sync(t).then((function(t){return o.loadContent()}))},user:n,refreshRemotes:this.refreshContent}))):void 0},Object.defineProperty(e.prototype,"updateParams",{get:function(){return p.a.updateParamsMixin(this.nonQueryStringParams)},enumerable:!1,configurable:!0}),e}(l.Component);e.default=Object(d.g)(w),w.contextType=E.a}}]);
//# sourceMappingURL=repository-list.18330fc64b516ed97894.js.map