"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[6176],{36176:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var n=t(4942),l=t(89555),r=t(92950),o=t.n(r),u=t(61811),s=t(8902),i=t(88833),c=t(61647),d=t(6640),m=t(15751),v=t(70885),p=function(e){var a=e.item,t=e.actionContext,n=t.addAlert,u=t.featureFlags,p=t.hasPermission,f=t.state.params,g=t.user,b=(null==a?void 0:a.pulp_href)&&(0,m.LL)(a.pulp_href),h=(0,r.useState)(null==a?void 0:a.name),_=(0,v.Z)(h,2),R=_[0],S=_[1],w=(0,r.useState)(null),y=(0,v.Z)(w,2),C=y[0],E=y[1],O=(0,r.useState)(null),U=(0,v.Z)(O,2),G=U[0],P=U[1],k=(0,r.useState)(!1),j=(0,v.Z)(k,2),F=j[0],z=j[1],M=(0,r.useState)(null),W=(0,v.Z)(M,2),Z=W[0],x=W[1],B=(0,r.useState)(null),I=(0,v.Z)(B,2),L=I[0],T=I[1],D=(0,r.useState)(null),A=(0,v.Z)(D,2),Q=A[0],q=A[1],Y=(0,r.useState)(null),H=(0,v.Z)(Y,2),J=H[0],K=H[1],N=(0,r.useState)(null),V=(0,v.Z)(N,2),X=V[0],$=V[1],ee=(0,r.useState)(null),ae=(0,v.Z)(ee,2),te=ae[0],ne=ae[1],le=(0,r.useState)(null),re=(0,v.Z)(le,2),oe=re[0],ue=re[1],se=(0,r.useState)(null),ie=(0,v.Z)(se,2),ce=ie[0],de=ie[1],me=function(){P(null),E(null),s.GC.myPermissions(b).then((function(e){var a=e.data.permissions;z((0,d.yA)({hasPermission:p,hasObjectPermission:function(e){return a.includes(e)},user:g,featureFlags:u})),s.GC.listRoles(b,{page_size:100}).then((function(e){var a=e.data.roles,t=(0,m.lR)(a),n=t.users,l=t.groups;S(R),P(n),E(l)})).catch((function(){P([]),E([])}))})).catch((function(){P([]),E([]),z(!1)}))},ve=function(e){var a=e.roles,t=e.alertSuccess,l=e.alertFailure,r=e.stateUpdate;Promise.all(a).then((function(){n({title:t,variant:"success"}),me()})).catch((function(e){var a=e.response,t=a.status,r=a.statusText;n({title:l,variant:"danger",description:(0,m.N3)(t,r)})})).finally((function(){pe(r)}))},pe=function(e){Object.entries(e).forEach((function(e){var a=(0,v.Z)(e,2),t=a[0],n=a[1];switch(t){case"showUserRemoveModal":q(n);break;case"showUserSelectWizard":K(n);break;case"showGroupRemoveModal":$(n);break;case"showGroupSelectWizard":ne(n);break;case"showRoleRemoveModal":ue(n);break;case"showRoleSelectWizard":de(n);break;default:console.error("updateProps",t,n)}}))};return(0,r.useEffect)(me,[a.pulp_href]),(0,r.useEffect)((function(){G&&(null!=f&&f.user?s.vq.list({username:f.user}).then((function(e){var a=e.data.data;T(G.find((function(e){return e.username===a[0].username})))})):T(null))}),[null==f?void 0:f.user,G]),(0,r.useEffect)((function(){C&&(null!=f&&f.group?s.lO.list({name:f.group}).then((function(e){var a=e.data.data;x(C.find((function(e){return e.name===a[0].name})))})):x(null))}),[null==f?void 0:f.group,C]),o().createElement(i.yW,{addGroup:function(e,a){var t=a.map((function(a){return s.GC.addRole(b,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:l.ag._({id:"lylrvu",values:{0:e.name,name:R}}),alertFailure:l.ag._({id:"9/YKZd",values:{0:e.name,name:R}}),stateUpdate:{showGroupSelectWizard:null}})},addRole:function(e,a){var t=a.map((function(a){return s.GC.addRole(b,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:l.ag._({id:"svLSRe",values:{0:e.name,name:R}}),alertFailure:l.ag._({id:"eeQk9h",values:{0:e.name,name:R}}),stateUpdate:{showRoleSelectWizard:null}})},addUser:function(e,a){var t=a.map((function(a){return s.GC.addRole(b,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:l.ag._({id:"J7EvK0",values:{0:e.username,name:R}}),alertFailure:l.ag._({id:"0P+eGj",values:{0:e.username,name:R}}),stateUpdate:{showUserSelectWizard:null}})},addUserRole:function(e,a){var t=a.map((function(a){return s.GC.addRole(b,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:l.ag._({id:"ifVlo4",values:{0:e.username,name:R}}),alertFailure:l.ag._({id:"xJC6dy",values:{0:e.username,name:R}}),stateUpdate:{showRoleSelectWizard:null}})},canEditOwners:F,group:Z,groups:C,name:R,pulpObjectType:"remotes/ansible/collection",removeGroup:function(e){var a=e.object_roles.map((function(a){return s.GC.removeRole(b,{role:a,groups:[e.name]})}));ve({roles:a,alertSuccess:l.ag._({id:"94LxzI",values:{0:e.name,name:R}}),alertFailure:l.ag._({id:"j17tAi",values:{0:e.name,name:R}}),stateUpdate:{showGroupRemoveModal:null}})},removeRole:function(e,a){var t=s.GC.removeRole(b,{role:e,groups:[a.name]});ve({roles:[t],alertSuccess:l.ag._({id:"svLSRe",values:{0:a.name,name:R}}),alertFailure:l.ag._({id:"eeQk9h",values:{0:a.name,name:R}}),stateUpdate:{showRoleRemoveModal:null}})},removeUser:function(e){var a=e.object_roles.map((function(a){return s.GC.removeRole(b,{role:a,users:[e.username]})}));ve({roles:a,alertSuccess:l.ag._({id:"ekGBsh",values:{0:e.username,name:R}}),alertFailure:l.ag._({id:"O21voo",values:{0:e.username,name:R}}),stateUpdate:{showUserRemoveModal:null}})},removeUserRole:function(e,a){var t=s.GC.removeRole(b,{role:e,users:[a.username]});ve({roles:[t],alertSuccess:l.ag._({id:"ifVlo4",values:{0:a.username,name:R}}),alertFailure:l.ag._({id:"xJC6dy",values:{0:a.username,name:R}}),stateUpdate:{showRoleRemoveModal:null}})},selectRolesMessage:l.ag._({id:"FoCVlu"}),showGroupRemoveModal:X,showGroupSelectWizard:te,showRoleRemoveModal:oe,showRoleSelectWizard:ce,showUserRemoveModal:Q,showUserSelectWizard:J,updateProps:pe,user:L,users:G,urlPrefix:(0,c.dI)(c.nB.ansibleRemoteDetail,{name:R})})},f=t(15021),g=function(e){var a=e.code,t=o().useState(!1),n=(0,v.Z)(t,2),r=n[0],u=n[1],s=o().createElement(o().Fragment,null,o().createElement(f.CodeBlockAction,null,o().createElement(f.ClipboardCopyButton,{id:"basic-copy-button",textId:"code-content","aria-label":"Copy to clipboard",onClick:function(e){return function(e,a){navigator.clipboard.writeText(a.toString())}(0,a),void u(!0)},exitDelay:r?1500:600,maxWidth:"110px",variant:"plain",onTooltipHidden:function(){return u(!1)}},r?l.ag._({id:"ORamYR"}):l.ag._({id:"/4gGIX"}))));return o().createElement(f.CodeBlock,{actions:s},o().createElement(f.CodeBlockCode,{id:"code-content"},a))},b=function(e){var a=e.code;return a?o().createElement(g,{code:a}):o().createElement(o().Fragment,null,l.ag._({id:"EdQY6l"}))},h=function(e){var a,t,n=e.item;return o().createElement(i.PO,{fields:[{label:l.ag._({id:"W+/a1z"}),value:null==n?void 0:n.name},{label:l.ag._({id:"IagCbF"}),value:o().createElement(i.TO,{url:null==n?void 0:n.url,fallback:!0})},{label:l.ag._({id:"vEkjkD"}),value:o().createElement(i.TO,{url:null==n?void 0:n.proxy_url,fallback:!0})},{label:l.ag._({id:"r2AaSF"}),value:null!=n&&n.tls_validation?l.ag._({id:"RxzN1M"}):l.ag._({id:"E/QGRL"})},{label:l.ag._({id:"lWw/5G"}),value:(null==n?void 0:n.client_cert)||l.ag._({id:"EdQY6l"})},{label:l.ag._({id:"qldWHB"}),value:(null==n?void 0:n.ca_cert)||l.ag._({id:"EdQY6l"})},{label:l.ag._({id:"+e1mLz"}),value:null!==(a=null==n?void 0:n.download_concurrency)&&void 0!==a?a:l.ag._({id:"EdQY6l"})},{label:l.ag._({id:"SeWdiM"}),value:null!==(t=null==n?void 0:n.rate_limit)&&void 0!==t?t:l.ag._({id:"EdQY6l"})},{label:l.ag._({id:"ooullr"}),value:o().createElement(i.oK,{remoteHref:null==n?void 0:n.pulp_href})},{label:l.ag._({id:"6rUIqH"}),value:o().createElement(b,{code:null==n?void 0:n.requirements_file})}]})};function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function R(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(Object(t),!0).forEach((function(a){(0,n.Z)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}const S=(0,i.L9)({breadcrumbs:function(e){var a=e.name,t=e.tab,n=e.params,r=n.user,o=n.group;return[{url:(0,c.dI)(c.nB.ansibleRemotes),name:l.ag._({id:"TiuMpz"})},{url:(0,c.dI)(c.nB.ansibleRemoteDetail,{name:a}),name:a},"access"===t.id&&(o||r)?{url:(0,c.dI)(c.nB.ansibleRepositoryDetail,{name:a},{tab:t.id}),name:t.name}:null,"access"===t.id&&o?{name:l.ag._({id:"8uT/P7",values:{group:o}})}:null,"access"===t.id&&r?{name:l.ag._({id:"AkUbn7",values:{user:r}})}:null,"access"!==t.id||r||o?null:{name:t.name}].filter(Boolean)},condition:d.MT,displayName:"AnsibleRemoteDetail",errorTitle:{id:"cFwIgK"},headerActions:[u.JJ,u.Rq,u.MC,u.PU,u.bU],listUrl:(0,c.dI)(c.nB.ansibleRemotes),query:function(e){var a=e.name;return s.GC.list({name:a}).then((function(e){return e.data.results[0]})).then((function(e){return e?s.GC.myPermissions((0,m.LL)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(a){return R(R({},e),{},{my_permissions:a})})):Promise.reject({response:{status:404}})}))},renderTab:function(e,a,t){return{details:o().createElement(h,{item:a,actionContext:t}),access:o().createElement(p,{item:a,actionContext:t})}[e]},tabs:[{id:"details",name:{id:"URmyfc"}},{id:"access",name:{id:"LuXP9q"}}],tabUpdateParams:function(e){return delete e.group,delete e.user,e}})}}]);
//# sourceMappingURL=../sourcemaps/6176.bdf7fedee60e5af757a408d1d3bef389.js.map