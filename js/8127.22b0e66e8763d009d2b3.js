"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[8127],{58127:(e,a,t)=>{t.r(a),t.d(a,{default:()=>w});var l=t(64467),n=t(47712),r=t(44914),u=t.n(r),o=t(35489),s=t(88756),i=t(90593),c=t(60165),d=t(5093),m=t(75841),v=t(80296),f=function(e){var a=e.item,t=e.actionContext,l=t.addAlert,o=t.featureFlags,f=t.hasPermission,p=t.state.params,R=t.user,b=(null==a?void 0:a.pulp_href)&&(0,m.dx)(a.pulp_href),h=(0,r.useState)(null==a?void 0:a.name),_=(0,v.A)(h,2),S=_[0],w=_[1],g=(0,r.useState)(null),E=(0,v.A)(g,2),j=E[0],y=E[1],k=(0,r.useState)(null),U=(0,v.A)(k,2),D=U[0],O=U[1],P=(0,r.useState)(!1),A=(0,v.A)(P,2),Y=A[0],F=A[1],x=(0,r.useState)(null),C=(0,v.A)(x,2),z=C[0],W=C[1],G=(0,r.useState)(null),M=(0,v.A)(G,2),J=M[0],Q=M[1],V=(0,r.useState)(null),L=(0,v.A)(V,2),B=L[0],T=L[1],q=(0,r.useState)(null),H=(0,v.A)(q,2),I=H[0],X=H[1],K=(0,r.useState)(null),Z=(0,v.A)(K,2),N=Z[0],$=Z[1],ee=(0,r.useState)(null),ae=(0,v.A)(ee,2),te=ae[0],le=ae[1],ne=(0,r.useState)(null),re=(0,v.A)(ne,2),ue=re[0],oe=re[1],se=(0,r.useState)(null),ie=(0,v.A)(se,2),ce=ie[0],de=ie[1],me=function(){O(null),y(null),s.DY.myPermissions(b).then((function(e){var a=e.data.permissions;F((0,d.$w)({hasPermission:f,hasObjectPermission:function(e){return a.includes(e)},user:R,featureFlags:o})),s.DY.listRoles(b,{page_size:100}).then((function(e){var a=e.data.roles,t=(0,m.LF)(a),l=t.users,n=t.groups;w(S),O(l),y(n)})).catch((function(){O([]),y([])}))})).catch((function(){O([]),y([]),F(!1)}))},ve=function(e){var a=e.roles,t=e.alertSuccess,n=e.alertFailure,r=e.stateUpdate;Promise.all(a).then((function(){l({title:t,variant:"success"}),me()})).catch((function(e){var a=e.response,t=a.status,r=a.statusText;l({title:n,variant:"danger",description:(0,m.gJ)(t,r)})})).finally((function(){fe(r)}))},fe=function(e){Object.entries(e).forEach((function(e){var a=(0,v.A)(e,2),t=a[0],l=a[1];switch(t){case"showUserRemoveModal":T(l);break;case"showUserSelectWizard":X(l);break;case"showGroupRemoveModal":$(l);break;case"showGroupSelectWizard":le(l);break;case"showRoleRemoveModal":oe(l);break;case"showRoleSelectWizard":de(l);break;default:console.error("updateProps",t,l)}}))};return(0,r.useEffect)(me,[a.pulp_href]),(0,r.useEffect)((function(){D&&(null!=p&&p.user?s.QS.list({username:p.user}).then((function(e){var a=e.data.data;Q(D.find((function(e){return e.username===a[0].username})))})):Q(null))}),[null==p?void 0:p.user,D]),(0,r.useEffect)((function(){j&&(null!=p&&p.group?s.YF.list({name:p.group}).then((function(e){var a=e.data.data;W(j.find((function(e){return e.name===a[0].name})))})):W(null))}),[null==p?void 0:p.group,j]),u().createElement(i.Gj,{addGroup:function(e,a){var t=a.map((function(a){return s.DY.addRole(b,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:n.Ru._({id:"lylrvu",values:{0:e.name,name:S}}),alertFailure:n.Ru._({id:"9/YKZd",values:{0:e.name,name:S}}),stateUpdate:{showGroupSelectWizard:null}})},addRole:function(e,a){var t=a.map((function(a){return s.DY.addRole(b,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:n.Ru._({id:"svLSRe",values:{0:e.name,name:S}}),alertFailure:n.Ru._({id:"eeQk9h",values:{0:e.name,name:S}}),stateUpdate:{showRoleSelectWizard:null}})},addUser:function(e,a){var t=a.map((function(a){return s.DY.addRole(b,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:n.Ru._({id:"J7EvK0",values:{0:e.username,name:S}}),alertFailure:n.Ru._({id:"0P+eGj",values:{0:e.username,name:S}}),stateUpdate:{showUserSelectWizard:null}})},addUserRole:function(e,a){var t=a.map((function(a){return s.DY.addRole(b,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:n.Ru._({id:"ifVlo4",values:{0:e.username,name:S}}),alertFailure:n.Ru._({id:"xJC6dy",values:{0:e.username,name:S}}),stateUpdate:{showRoleSelectWizard:null}})},canEditOwners:Y,group:z,groups:j,name:S,pulpObjectType:"remotes/ansible/collection",removeGroup:function(e){var a=e.object_roles.map((function(a){return s.DY.removeRole(b,{role:a,groups:[e.name]})}));ve({roles:a,alertSuccess:n.Ru._({id:"94LxzI",values:{0:e.name,name:S}}),alertFailure:n.Ru._({id:"j17tAi",values:{0:e.name,name:S}}),stateUpdate:{showGroupRemoveModal:null}})},removeRole:function(e,a){var t=s.DY.removeRole(b,{role:e,groups:[a.name]});ve({roles:[t],alertSuccess:n.Ru._({id:"svLSRe",values:{0:a.name,name:S}}),alertFailure:n.Ru._({id:"eeQk9h",values:{0:a.name,name:S}}),stateUpdate:{showRoleRemoveModal:null}})},removeUser:function(e){var a=e.object_roles.map((function(a){return s.DY.removeRole(b,{role:a,users:[e.username]})}));ve({roles:a,alertSuccess:n.Ru._({id:"ekGBsh",values:{0:e.username,name:S}}),alertFailure:n.Ru._({id:"O21voo",values:{0:e.username,name:S}}),stateUpdate:{showUserRemoveModal:null}})},removeUserRole:function(e,a){var t=s.DY.removeRole(b,{role:e,users:[a.username]});ve({roles:[t],alertSuccess:n.Ru._({id:"ifVlo4",values:{0:a.username,name:S}}),alertFailure:n.Ru._({id:"xJC6dy",values:{0:a.username,name:S}}),stateUpdate:{showRoleRemoveModal:null}})},selectRolesMessage:n.Ru._({id:"FoCVlu"}),showGroupRemoveModal:N,showGroupSelectWizard:te,showRoleRemoveModal:ue,showRoleSelectWizard:ce,showUserRemoveModal:B,showUserSelectWizard:I,updateProps:fe,user:J,users:D,urlPrefix:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:S})})},p=t(85889),R=function(e){var a=e.code,t=(0,r.useState)(!1),l=(0,v.A)(t,2),o=l[0],s=l[1],i=u().createElement(u().Fragment,null,u().createElement(p.CodeBlockAction,null,u().createElement(p.ClipboardCopyButton,{id:"basic-copy-button",textId:"code-content","aria-label":"Copy to clipboard",onClick:function(e){return function(e,a){navigator.clipboard.writeText(a.toString())}(0,a),void s(!0)},exitDelay:o?1500:600,maxWidth:"110px",variant:"plain",onTooltipHidden:function(){return s(!1)}},o?n.Ru._({id:"ORamYR"}):n.Ru._({id:"/4gGIX"}))));return u().createElement(p.CodeBlock,{actions:i},u().createElement(p.CodeBlockCode,{id:"code-content"},a))},b=function(e){var a=e.code;return a?u().createElement(R,{code:a}):u().createElement(u().Fragment,null,n.Ru._({id:"EdQY6l"}))},h=function(e){var a,t,l=e.item;return u().createElement(i.B_,{fields:[{label:n.Ru._({id:"W+/a1z"}),value:null==l?void 0:l.name},{label:n.Ru._({id:"IagCbF"}),value:u().createElement(i.hi,{url:null==l?void 0:l.url,fallback:!0})},{label:n.Ru._({id:"vEkjkD"}),value:u().createElement(i.hi,{url:null==l?void 0:l.proxy_url,fallback:!0})},{label:n.Ru._({id:"r2AaSF"}),value:null!=l&&l.tls_validation?n.Ru._({id:"RxzN1M"}):n.Ru._({id:"E/QGRL"})},{label:n.Ru._({id:"lWw/5G"}),value:(null==l?void 0:l.client_cert)||n.Ru._({id:"EdQY6l"})},{label:n.Ru._({id:"qldWHB"}),value:(null==l?void 0:l.ca_cert)||n.Ru._({id:"EdQY6l"})},{label:n.Ru._({id:"+e1mLz"}),value:null!==(a=null==l?void 0:l.download_concurrency)&&void 0!==a?a:n.Ru._({id:"EdQY6l"})},{label:n.Ru._({id:"SeWdiM"}),value:null!==(t=null==l?void 0:l.rate_limit)&&void 0!==t?t:n.Ru._({id:"EdQY6l"})},{label:n.Ru._({id:"ooullr"}),value:u().createElement(i.PO,{remoteHref:null==l?void 0:l.pulp_href})},{label:n.Ru._({id:"6rUIqH"}),value:u().createElement(b,{code:null==l?void 0:l.requirements_file})}]})};function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,l)}return t}function S(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(Object(t),!0).forEach((function(a){(0,l.A)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}const w=(0,i.UE)({breadcrumbs:function(e){var a=e.name,t=e.tab,l=e.params,r=l.user,u=l.group;return[{url:(0,c.jV)(c.Jh.ansibleRemotes),name:n.Ru._({id:"TiuMpz"})},{url:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:a}),name:a},"access"===t&&(u||r)?{url:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:a},{tab:t}),name:n.Ru._({id:"LuXP9q"})}:null,"access"===t&&u?{name:n.Ru._({id:"8uT/P7",values:{group:u}})}:null,"access"===t&&r?{name:n.Ru._({id:"AkUbn7",values:{user:r}})}:null,"access"!==t||r||u?null:{name:n.Ru._({id:"LuXP9q"})}].filter(Boolean)},condition:d.re,displayName:"AnsibleRemoteDetail",errorTitle:{id:"cFwIgK"},headerActions:[o.Zl,o.Zb,o.Uv,o.$Q,o.Ql],listUrl:(0,c.jV)(c.Jh.ansibleRemotes),query:function(e){var a=e.name;return s.DY.list({name:a}).then((function(e){return e.data.results[0]})).then((function(e){return e?s.DY.myPermissions((0,m.dx)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(a){return S(S({},e),{},{my_permissions:a})})):Promise.reject({response:{status:404}})}))},renderTab:function(e,a,t){return{details:u().createElement(h,{item:a,actionContext:t}),access:u().createElement(f,{item:a,actionContext:t})}[e]},tabs:function(e,a){return[{active:"details"===e,title:n.Ru._({id:"URmyfc"}),link:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:a},{tab:"details"})},{active:"access"===e,title:n.Ru._({id:"LuXP9q"}),link:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:a},{tab:"access"})}]}})}}]);
//# sourceMappingURL=../sourcemaps/8127.de1e803146a9962d08e8853c9302e181.js.map