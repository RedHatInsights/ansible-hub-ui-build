{"version":3,"sources":["webpack:///./src/containers/certification-dashboard/certification-dashboard.scss","webpack:///./node_modules/@patternfly/react-icons/dist/esm/icons/warning-triangle-icon.js","webpack:///./src/containers/certification-dashboard/certification-dashboard.scss?13e2","webpack:///./src/containers/token/token-insights.tsx","webpack:///./node_modules/@patternfly/react-icons/dist/esm/icons/check-circle-icon.js","webpack:///./node_modules/@patternfly/react-icons/dist/esm/icons/exclamation-circle-icon.js","webpack:///./node_modules/@patternfly/react-icons/dist/esm/icons/info-circle-icon.js","webpack:///./src/containers/certification-dashboard/certification-dashboard.tsx"],"names":["module","exports","push","i","WarningTriangleIcon","name","height","width","svgPath","yOffset","xOffset","transform","content","options","undefined","update","locals","hot","accept","newContent","a","b","key","idx","Error","dispose","props","state","tokenData","componentDidMount","window","insights","chrome","auth","getOfflineToken","then","result","setState","data","render","this","title","className","refresh_token","onClick","loadToken","href","target","doOffline","TokenPage","tokeninsights","displayName","__docgenInfo","STORYBOOK_REACT_CLASSES","docgenInfo","path","__react_docgen_typescript_loader_error","CheckCircleIcon","createIcon","ExclamationCircleIcon","InfoCircleIcon","params","parseParamString","location","search","versions","itemCount","loading","updatingVersions","redirect","alerts","isPartnerEngineer","response","is_partner_engineer","queryCollections","notFound","Redirect","to","closeAlert","Toolbar","ToolbarGroup","ToolbarItem","updateParams","p","filterConfig","id","inputType","NOTCERTIFIED","NEEDSREVIEW","CERTIFIED","count","isTop","ignoredParams","renderTable","length","EmptyState","variant","full","EmptyStateIcon","icon","Title","headingLevel","size","EmptyStateBody","headers","type","map","version","renderRow","renderStatus","includes","repository_list","style","color","index","namespace","Link","collection","moment","created_at","fromNow","renderButtons","importsLink","DropdownItem","component","myImports","certifyDropDown","isDisabled","originalRepo","updateCertification","rejectDropDown","items","Button","destinationRepo","setRepository","waitForUpdate","remove_task_id","catch","error","concat","status","description","taskId","get","Promise","r","setTimeout","list","meta","updateParamsMixin","withRouter","certificationdashboard"],"mappings":"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","file":"js/settings.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".certification-dasboard .toolbar{padding-bottom:16px;display:flex;justify-content:space-between}.certification-dasboard .control-column{display:flex;justify-content:flex-end;align-items:center}.certification-dasboard .footer{padding-top:16px}.certification-dasboard .updating-spinner{color:var(--pf-global--info-color--100)}\\n\", \"\"]);\n\n","import { createIcon } from '../createIcon';\n\nexport const WarningTriangleIconConfig = {\n  name: 'WarningTriangleIcon',\n  height: 1024,\n  width: 1024,\n  svgPath: 'M511.488 949.321c6.656 0 13.093-0.878 19.456-2.487s12.142-4.169 17.481-7.461c5.998-3.365 11.118-7.314 15.506-11.995s8.119-10.021 11.483-15.945l437.979-842.24c6.656-11.995 9.801-23.918 9.509-35.913s-3.877-23.918-10.459-35.913c-3.365-5.998-7.168-11.118-11.483-15.506s-9.509-8.192-15.506-11.483c-5.339-2.706-10.971-4.827-16.969-6.51s-12.288-2.487-18.944-2.487h-876.032c-6.656 0-12.946 0.805-18.944 2.487s-11.63 3.803-16.969 6.51c-5.998 3.291-11.118 7.095-15.506 11.483s-8.192 9.509-11.483 15.506c-6.656 11.995-10.094 23.918-10.459 35.913s2.779 23.918 9.509 35.913l437.979 842.24c3.291 5.998 7.095 11.264 11.483 15.945s9.509 8.631 15.506 11.995c5.339 3.291 11.118 5.778 17.481 7.461s12.8 2.487 19.456 2.487zM132.974 73.289h759.296l-380.782 741.595-378.514-741.595zM583.387 156.526c-2.121-5.632-7.534-9.509-13.97-9.509-14.263 0-28.526 0-42.715 0-21.138 0-42.277 0-63.415 0-11.045 0-24.576 0.585-24.576 14.994 0 0 0 44.325 0 44.544 0 8.558 6.437 14.994 14.994 14.994 0 0 115.712 0 115.785 0 8.485 0 14.994-6.437 14.994-14.994 0 0 0-44.544 0-44.544 0-1.975-0.366-3.803-1.024-5.486zM583.826 301.934c-2.121-5.632-7.534-9.509-13.97-9.509-14.263 0-28.526 0-42.715 0-21.138 0-42.277 0-63.415 0-11.045 0-24.576 0.585-24.576 14.994 0 0 0 224.914 0 225.134 0 8.558 6.437 14.994 14.994 14.994 0 0 115.712 0 115.785 0 8.485 0 14.994-6.437 14.994-14.994 0 0 0-225.134 0-225.134 0-1.975-0.366-3.803-1.024-5.486z',\n  yOffset: 64,\n  xOffset: 0,\n  transform: 'rotate(180 0 512) scale(-1 1)'\n};\n\nexport const WarningTriangleIcon = createIcon(WarningTriangleIconConfig);\n\nexport default WarningTriangleIcon;","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./certification-dashboard.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./certification-dashboard.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./certification-dashboard.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from 'react';\n\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport { ClipboardCopy, Button } from '@patternfly/react-core';\n\nimport { BaseHeader, Main } from '../../components';\n\ninterface IState {\n  tokenData: {\n    access_token: string;\n    expires_in: number;\n    id_token: string;\n    refresh_expires_in: number;\n    refresh_token: string;\n    scope: string;\n    session_state: string;\n    token_type: string;\n  };\n}\n\nclass TokenPage extends React.Component<RouteComponentProps, IState> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tokenData: undefined,\n    };\n  }\n\n  componentDidMount() {\n    // this function will fail if chrome.auth.doOffline() hasn't been called\n    (window as any).insights.chrome.auth.getOfflineToken().then(result => {\n      this.setState({ tokenData: result.data });\n    });\n  }\n\n  render() {\n    const { tokenData } = this.state;\n\n    return (\n      <React.Fragment>\n        <BaseHeader title='Token management'></BaseHeader>\n        <Main>\n          <Section className='body pf-c-content'>\n            <h2>Offline token</h2>\n            <p>\n              Use this token to authenticate the <code>ansible-galaxy</code>{' '}\n              client.\n            </p>\n            {tokenData ? (\n              <div>\n                <ClipboardCopy>{tokenData.refresh_token}</ClipboardCopy>\n              </div>\n            ) : (\n              <Button onClick={() => this.loadToken()}>Load token</Button>\n            )}\n            <h2>Manage tokens</h2>\n            To remove an existing token, visit{' '}\n            <a\n              href='https://sso.redhat.com/auth/realms/redhat-external/account/'\n              target='_blank'\n            >\n              Red Hat SSO account managment\n            </a>\n            .\n          </Section>\n        </Main>\n      </React.Fragment>\n    );\n  }\n\n  private loadToken() {\n    (window as any).insights.chrome.auth\n      // doOffline causes the page to refresh and will make the data\n      // available to getOfflineToken() when the component mounts after\n      // the reload\n      .doOffline();\n  }\n}\n\nexport default withRouter(TokenPage);\ntry {\n    // @ts-ignore\n    tokeninsights.displayName = \"tokeninsights\";\n    // @ts-ignore\n    tokeninsights.__docgenInfo = { \"description\": \"\", \"displayName\": \"tokeninsights\", \"props\": { \"wrappedComponentRef\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"wrappedComponentRef\", \"required\": false, \"type\": { \"name\": \"Ref<TokenPage>\" } } } };\n    // @ts-ignore\n    if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\")\n        // @ts-ignore\n        STORYBOOK_REACT_CLASSES[\"src/containers/token/token-insights.tsx#tokeninsights\"] = { docgenInfo: tokeninsights.__docgenInfo, name: \"tokeninsights\", path: \"src/containers/token/token-insights.tsx#tokeninsights\" };\n}\ncatch (__react_docgen_typescript_loader_error) { }","import { createIcon } from '../createIcon';\n\nexport const CheckCircleIconConfig = {\n  name: 'CheckCircleIcon',\n  height: 512,\n  width: 512,\n  svgPath: 'M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z',\n  yOffset: 0,\n  xOffset: 0,\n  transform: ''\n};\n\nexport const CheckCircleIcon = createIcon(CheckCircleIconConfig);\n\nexport default CheckCircleIcon;","import { createIcon } from '../createIcon';\n\nexport const ExclamationCircleIconConfig = {\n  name: 'ExclamationCircleIcon',\n  height: 512,\n  width: 512,\n  svgPath: 'M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z',\n  yOffset: 0,\n  xOffset: 0,\n  transform: ''\n};\n\nexport const ExclamationCircleIcon = createIcon(ExclamationCircleIconConfig);\n\nexport default ExclamationCircleIcon;","import { createIcon } from '../createIcon';\n\nexport const InfoCircleIconConfig = {\n  name: 'InfoCircleIcon',\n  height: 512,\n  width: 512,\n  svgPath: 'M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z',\n  yOffset: 0,\n  xOffset: 0,\n  transform: ''\n};\n\nexport const InfoCircleIcon = createIcon(InfoCircleIconConfig);\n\nexport default InfoCircleIcon;","import * as React from 'react';\nimport './certification-dashboard.scss';\n\nimport * as moment from 'moment';\nimport {\n  withRouter,\n  RouteComponentProps,\n  Link,\n  Redirect,\n} from 'react-router-dom';\nimport { BaseHeader, Main } from '../../components';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport {\n  Toolbar,\n  ToolbarGroup,\n  ToolbarItem,\n  Button,\n  DropdownItem,\n  EmptyState,\n  EmptyStateIcon,\n  Title,\n  EmptyStateBody,\n  EmptyStateVariant,\n} from '@patternfly/react-core';\n\nimport {\n  InfoCircleIcon,\n  ExclamationCircleIcon,\n  CheckCircleIcon,\n  WarningTriangleIcon,\n} from '@patternfly/react-icons';\n\nimport {\n  CollectionVersionAPI,\n  CollectionVersion,\n  ActiveUserAPI,\n  MeType,\n  TaskAPI,\n} from '../../api';\nimport { ParamHelper } from '../../utilities';\nimport {\n  LoadingPageWithHeader,\n  StatefulDropdown,\n  CompoundFilter,\n  LoadingPageSpinner,\n  AppliedFilters,\n  Pagination,\n  AlertList,\n  closeAlertMixin,\n  AlertType,\n  SortTable,\n} from '../../components';\nimport { Paths, formatPath } from '../../paths';\nimport { Constants } from '../../constants';\n\ninterface IState {\n  params: {\n    certification?: string;\n    namespace?: string;\n    collection?: string;\n    page?: number;\n    page_size?: number;\n  };\n  alerts: AlertType[];\n  versions: CollectionVersion[];\n  itemCount: number;\n  loading: boolean;\n  updatingVersions: CollectionVersion[];\n  redirect: string;\n}\n\nclass CertificationDashboard extends React.Component<\n  RouteComponentProps,\n  IState\n> {\n  constructor(props) {\n    super(props);\n\n    const params = ParamHelper.parseParamString(props.location.search, [\n      'page',\n      'page_size',\n    ]);\n\n    if (!params['page_size']) {\n      params['page_size'] = 10;\n    }\n\n    if (!params['sort']) {\n      params['sort'] = '-pulp_created';\n    }\n\n    if (!params['repository']) {\n      params['repository'] = 'staging';\n    }\n\n    this.state = {\n      versions: undefined,\n      itemCount: 0,\n      params: params,\n      loading: true,\n      updatingVersions: [],\n      redirect: undefined,\n      alerts: [],\n    };\n  }\n\n  componentDidMount() {\n    ActiveUserAPI.isPartnerEngineer().then(response => {\n      const me: MeType = response.data;\n      if (!me.is_partner_engineer) {\n        this.setState({ redirect: Paths.notFound });\n      } else {\n        this.queryCollections();\n      }\n    });\n  }\n\n  render() {\n    const { versions, params, itemCount, loading, redirect } = this.state;\n\n    if (redirect) {\n      return <Redirect to={redirect}></Redirect>;\n    }\n\n    if (!versions) {\n      return <LoadingPageWithHeader></LoadingPageWithHeader>;\n    }\n    return (\n      <React.Fragment>\n        <BaseHeader title='Certification dashboard'></BaseHeader>\n        <AlertList\n          alerts={this.state.alerts}\n          closeAlert={i => this.closeAlert(i)}\n        />\n        <Main className='certification-dashboard'>\n          <Section className='body'>\n            <div className='toolbar'>\n              <Toolbar>\n                <ToolbarGroup>\n                  <ToolbarItem>\n                    <CompoundFilter\n                      updateParams={p =>\n                        this.updateParams(p, () => this.queryCollections())\n                      }\n                      params={params}\n                      filterConfig={[\n                        {\n                          id: 'namespace',\n                          title: 'Namespace',\n                        },\n                        {\n                          id: 'name',\n                          title: 'Collection Name',\n                        },\n                        {\n                          id: 'repository',\n                          title: 'Repository',\n                          inputType: 'select',\n                          options: [\n                            {\n                              id: Constants.NOTCERTIFIED,\n                              title: 'Rejected',\n                            },\n                            {\n                              id: Constants.NEEDSREVIEW,\n                              title: 'Needs Review',\n                            },\n                            {\n                              id: Constants.CERTIFIED,\n                              title: 'Certified',\n                            },\n                          ],\n                        },\n                      ]}\n                    />\n                  </ToolbarItem>\n                </ToolbarGroup>\n              </Toolbar>\n\n              <Pagination\n                params={params}\n                updateParams={p =>\n                  this.updateParams(p, () => this.queryCollections())\n                }\n                count={itemCount}\n                isTop\n              />\n            </div>\n            <div>\n              <AppliedFilters\n                updateParams={p =>\n                  this.updateParams(p, () => this.queryCollections())\n                }\n                params={params}\n                ignoredParams={['page_size', 'page', 'sort']}\n              />\n            </div>\n            {loading ? (\n              <LoadingPageSpinner />\n            ) : (\n              this.renderTable(versions, params)\n            )}\n\n            <div className='footer'>\n              <Pagination\n                params={params}\n                updateParams={p =>\n                  this.updateParams(p, () => this.queryCollections())\n                }\n                count={itemCount}\n              />\n            </div>\n          </Section>\n        </Main>\n      </React.Fragment>\n    );\n  }\n\n  private renderTable(versions, params) {\n    if (versions.length === 0) {\n      return (\n        <EmptyState className='empty' variant={EmptyStateVariant.full}>\n          <EmptyStateIcon icon={WarningTriangleIcon} />\n          <Title headingLevel='h2' size='lg'>\n            No matches\n          </Title>\n          <EmptyStateBody>\n            Please try adjusting your search query.\n          </EmptyStateBody>\n        </EmptyState>\n      );\n    }\n    let sortTableOptions = {\n      headers: [\n        {\n          title: 'Namespace',\n          type: 'alpha',\n          id: 'namespace',\n        },\n        {\n          title: 'Collection',\n          type: 'alpha',\n          id: 'collection',\n        },\n        {\n          title: 'Version',\n          type: 'number',\n          id: 'version',\n        },\n        {\n          title: 'Date created',\n          type: 'number',\n          id: 'pulp_created',\n        },\n        {\n          title: 'Status',\n          type: 'none',\n          id: 'status',\n        },\n        {\n          title: '',\n          type: 'none',\n          id: 'certify',\n        },\n      ],\n    };\n\n    return (\n      <table\n        aria-label='Collection versions'\n        className='content-table pf-c-table'\n      >\n        <SortTable\n          options={sortTableOptions}\n          params={params}\n          updateParams={p =>\n            this.updateParams(p, () => this.queryCollections())\n          }\n        />\n        <tbody>\n          {versions.map((version, i) => this.renderRow(version, i))}\n        </tbody>\n      </table>\n    );\n  }\n\n  private renderStatus(version: CollectionVersion) {\n    if (this.state.updatingVersions.includes(version)) {\n      return <span className='fa fa-lg fa-spin fa-spinner' />;\n    }\n    if (version.repository_list.includes(Constants.CERTIFIED)) {\n      return (\n        <span>\n          <CheckCircleIcon\n            style={{ color: 'var(--pf-global--success-color--100)' }}\n          />{' '}\n          Certified\n        </span>\n      );\n    }\n    if (version.repository_list.includes(Constants.NOTCERTIFIED)) {\n      return (\n        <span>\n          <ExclamationCircleIcon\n            style={{ color: 'var(--pf-global--danger-color--100)' }}\n          />{' '}\n          Rejected\n        </span>\n      );\n    }\n    if (version.repository_list.includes(Constants.NEEDSREVIEW)) {\n      return (\n        <span>\n          <InfoCircleIcon\n            style={{ color: 'var(--pf-global--info-color--100)' }}\n          />{' '}\n          Needs Review\n        </span>\n      );\n    }\n  }\n\n  private renderRow(version: CollectionVersion, index) {\n    return (\n      <tr\n        aria-labelledby={`${version.namespace}.${version.name} v${version.version}`}\n        key={index}\n      >\n        <td>{version.namespace}</td>\n        <td>{version.name}</td>\n        <td>\n          <Link\n            to={formatPath(\n              Paths.collection,\n              {\n                namespace: version.namespace,\n                collection: version.name,\n              },\n              {\n                version: version.version,\n              },\n            )}\n          >\n            {version.version}\n          </Link>\n        </td>\n        <td>{moment(version.created_at).fromNow()}</td>\n        <td>{this.renderStatus(version)}</td>\n        <td>\n          <div className='control-column'>\n            <div>{this.renderButtons(version)}</div>\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  private renderButtons(version: CollectionVersion) {\n    if (this.state.updatingVersions.includes(version)) {\n      return;\n    }\n    const importsLink = (\n      <DropdownItem\n        key='imports'\n        component={\n          <Link\n            to={formatPath(\n              Paths.myImports,\n              {},\n              {\n                namespace: version.namespace,\n                name: version.name,\n                version: version.version,\n              },\n            )}\n          >\n            View Import Logs\n          </Link>\n        }\n      />\n    );\n\n    const certifyDropDown = (isDisabled: boolean, originalRepo) => (\n      <DropdownItem\n        onClick={() =>\n          this.updateCertification(version, originalRepo, Constants.CERTIFIED)\n        }\n        isDisabled={isDisabled}\n        key='certify'\n      >\n        Certify\n      </DropdownItem>\n    );\n\n    const rejectDropDown = (isDisabled: boolean, originalRepo) => (\n      <DropdownItem\n        onClick={() =>\n          this.updateCertification(\n            version,\n            originalRepo,\n            Constants.NOTCERTIFIED,\n          )\n        }\n        isDisabled={isDisabled}\n        className='rejected-icon'\n        key='reject'\n      >\n        Reject\n      </DropdownItem>\n    );\n\n    if (version.repository_list.includes(Constants.CERTIFIED)) {\n      return (\n        <span>\n          <StatefulDropdown\n            items={[\n              certifyDropDown(true, Constants.CERTIFIED),\n              rejectDropDown(false, Constants.CERTIFIED),\n              importsLink,\n            ]}\n          />\n        </span>\n      );\n    }\n    if (version.repository_list.includes(Constants.NOTCERTIFIED)) {\n      return (\n        <span>\n          <StatefulDropdown\n            items={[\n              certifyDropDown(false, Constants.NOTCERTIFIED),\n              rejectDropDown(true, Constants.NOTCERTIFIED),\n              importsLink,\n            ]}\n          />\n        </span>\n      );\n    }\n    if (version.repository_list.includes(Constants.NEEDSREVIEW)) {\n      return (\n        <span>\n          <Button\n            onClick={() =>\n              this.updateCertification(\n                version,\n                Constants.NEEDSREVIEW,\n                Constants.CERTIFIED,\n              )\n            }\n          >\n            <span>Certify</span>\n          </Button>\n          <StatefulDropdown\n            items={[rejectDropDown(false, Constants.NEEDSREVIEW), importsLink]}\n          />\n        </span>\n      );\n    }\n  }\n\n  private updateCertification(version, originalRepo, destinationRepo) {\n    // Set the selected version to loading\n    this.setState(\n      {\n        updatingVersions: [],\n      },\n      () =>\n        CollectionVersionAPI.setRepository(\n          version.namespace,\n          version.name,\n          version.version,\n          originalRepo,\n          destinationRepo,\n        )\n          .then(result =>\n            // Since pulp doesn't reply with the new object, perform a\n            // second query to get the updated data\n            {\n              this.setState({\n                updatingVersions: [version],\n              });\n              this.waitForUpdate(result.data.remove_task_id, version);\n            },\n          )\n          .catch(error => {\n            this.setState({\n              updatingVersions: [],\n              alerts: this.state.alerts.concat({\n                variant: 'danger',\n                title: `API Error: ${error.response.status}`,\n                description:\n                  `Could not update the certification ` +\n                  `status for ${version.namespace}.` +\n                  `${version.name}.${version.version}.`,\n              }),\n            });\n          }),\n    );\n  }\n\n  private waitForUpdate(result, version) {\n    const taskId = result;\n    return TaskAPI.get(taskId).then(async result => {\n      if (result.data.state === 'waiting' || result.data.state === 'running') {\n        await new Promise(r => setTimeout(r, 500));\n        this.waitForUpdate(taskId, version);\n      } else if (result.data.state === 'completed') {\n        return CollectionVersionAPI.list(this.state.params).then(\n          async result => {\n            this.setState({\n              versions: result.data.data,\n              updatingVersions: [],\n            });\n          },\n        );\n      } else {\n        this.setState({\n          updatingVersions: [],\n          alerts: this.state.alerts.concat({\n            variant: 'danger',\n            title: `API Error: 500`,\n            description:\n              `Could not update the certification ` +\n              `status for ${version.namespace}.` +\n              `${version.name}.${version.version}.`,\n          }),\n        });\n      }\n    });\n  }\n\n  private queryCollections() {\n    this.setState({ loading: true }, () =>\n      CollectionVersionAPI.list(this.state.params).then(result => {\n        this.setState({\n          versions: result.data.data,\n          itemCount: result.data.meta.count,\n          loading: false,\n          updatingVersions: [],\n        });\n      }),\n    );\n  }\n\n  private get updateParams() {\n    return ParamHelper.updateParamsMixin();\n  }\n\n  private get closeAlert() {\n    return closeAlertMixin('alerts');\n  }\n}\n\nexport default withRouter(CertificationDashboard);\ntry {\n    // @ts-ignore\n    certificationdashboard.displayName = \"certificationdashboard\";\n    // @ts-ignore\n    certificationdashboard.__docgenInfo = { \"description\": \"\", \"displayName\": \"certificationdashboard\", \"props\": { \"wrappedComponentRef\": { \"defaultValue\": null, \"description\": \"\", \"name\": \"wrappedComponentRef\", \"required\": false, \"type\": { \"name\": \"Ref<CertificationDashboard>\" } } } };\n    // @ts-ignore\n    if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\")\n        // @ts-ignore\n        STORYBOOK_REACT_CLASSES[\"src/containers/certification-dashboard/certification-dashboard.tsx#certificationdashboard\"] = { docgenInfo: certificationdashboard.__docgenInfo, name: \"certificationdashboard\", path: \"src/containers/certification-dashboard/certification-dashboard.tsx#certificationdashboard\" };\n}\ncatch (__react_docgen_typescript_loader_error) { }"],"sourceRoot":""}