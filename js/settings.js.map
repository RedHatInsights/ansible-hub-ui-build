{"version":3,"sources":["webpack:///./src/containers/certification-dashboard/certification-dashboard.scss","webpack:///./src/containers/certification-dashboard/certification-dashboard.scss?0af1","webpack:///./src/containers/token/token.tsx","webpack:///./src/containers/certification-dashboard/certification-dashboard.tsx"],"names":["module","exports","push","i","content","options","transform","undefined","update","locals","hot","accept","newContent","a","b","key","idx","Error","dispose","props","state","tokenData","componentDidMount","INSIGHTS_DEPLOYMENT_MODE","window","insights","chrome","auth","getOfflineToken","then","result","setState","data","render","title","className","refresh_token","onClick","loadToken","href","target","doOffline","getToken","TokenPage","params","parseParamString","location","search","needsReview","versions","itemCount","loading","updatingVersions","redirect","alerts","isPartnerEngineer","response","is_partner_engineer","queryCollections","notFound","to","this","closeAlert","updateParams","p","filterConfig","id","inputType","type","count","isTop","ignoredParams","renderTable","length","variant","full","icon","headingLevel","size","map","version","renderRow","renderStatus","includes","certification","certified","notCertified","index","namespace","name","collection","created_at","fromNow","renderButtons","importsLink","component","myImports","certifyDropDown","isDisabled","updateCertification","rejectDropDown","items","concat","setCertifiation","list","updatedVersion","newVersionList","ind","findIndex","x","filter","v","catch","error","status","description","meta","updateParamsMixin","CertificationDashboard"],"mappings":"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","file":"js/settings.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".toolbar {\\n  padding-bottom: 16px;\\n  display: flex;\\n  justify-content: space-between; }\\n\\n.certified-icon {\\n  color: var(--pf-global--success-color--100); }\\n\\n.rejected-icon {\\n  color: var(--pf-global--danger-color--100); }\\n\\n.needs-review-icon {\\n  color: var(--pf-global--info-color--100); }\\n\\n.control-column {\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center; }\\n\\n.footer {\\n  padding-top: 16px; }\\n\\n.updating-spinner {\\n  color: var(--pf-global--info-color--100); }\\n\", \"\"]);\n\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/lib/loader.js!./certification-dashboard.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/lib/loader.js!./certification-dashboard.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/lib/loader.js!./certification-dashboard.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from 'react';\n\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport { ClipboardCopy, Button } from '@patternfly/react-core';\n\nimport { BaseHeader, Main } from '../../components';\nimport { Constants } from '../../constants';\nimport { UserAPI } from '../../api';\n\ninterface IState {\n    tokenData: {\n        access_token: string;\n        expires_in: number;\n        id_token: string;\n        refresh_expires_in: number;\n        refresh_token: string;\n        scope: string;\n        session_state: string;\n        token_type: string;\n    };\n}\n\nclass TokenPage extends React.Component<RouteComponentProps, IState> {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            tokenData: undefined,\n        };\n    }\n\n    componentDidMount() {\n        if (DEPLOYMENT_MODE === Constants.INSIGHTS_DEPLOYMENT_MODE) {\n            // this function will fail if chrome.auth.doOffline() hasn't been called\n            (window as any).insights.chrome.auth\n                .getOfflineToken()\n                .then(result => {\n                    this.setState({ tokenData: result.data });\n                });\n        }\n    }\n\n    render() {\n        const { tokenData } = this.state;\n\n        return (\n            <React.Fragment>\n                <BaseHeader title='Token management'></BaseHeader>\n                <Main>\n                    <Section className='body pf-c-content'>\n                        <h2>Offline token</h2>\n                        <p>\n                            Use this token to authenticate the{' '}\n                            <code>ansible-galaxy</code> client.\n                        </p>\n                        {tokenData ? (\n                            <div>\n                                <ClipboardCopy>\n                                    {tokenData.refresh_token}\n                                </ClipboardCopy>\n                            </div>\n                        ) : (\n                            <Button onClick={() => this.loadToken()}>\n                                Load token\n                            </Button>\n                        )}\n                        <h2>Manage tokens</h2>\n                        To remove an existing token, visit{' '}\n                        <a\n                            href='https://sso.redhat.com/auth/realms/redhat-external/account/'\n                            target='_blank'\n                        >\n                            Red Hat SSO account managment\n                        </a>\n                        .\n                    </Section>\n                </Main>\n            </React.Fragment>\n        );\n    }\n\n    private loadToken() {\n        if (DEPLOYMENT_MODE === Constants.INSIGHTS_DEPLOYMENT_MODE) {\n            (window as any).insights.chrome.auth\n                // doOffline causes the page to refresh and will make the data\n                // available to getOfflineToken() when the component mounts after\n                // the reload\n                .doOffline();\n        } else {\n            UserAPI.getToken().then(result =>\n                this.setState({ tokenData: result }),\n            );\n        }\n    }\n}\n\nexport default withRouter(TokenPage);\n","import * as React from 'react';\nimport './certification-dashboard.scss';\n\nimport * as moment from 'moment';\nimport {\n    withRouter,\n    RouteComponentProps,\n    Link,\n    Redirect,\n} from 'react-router-dom';\nimport { BaseHeader, Main } from '../../components';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport {\n    Toolbar,\n    ToolbarGroup,\n    ToolbarItem,\n    Button,\n    DropdownItem,\n    EmptyState,\n    EmptyStateIcon,\n    Title,\n    EmptyStateBody,\n    EmptyStateVariant,\n} from '@patternfly/react-core';\n\nimport {\n    InfoCircleIcon,\n    ExclamationCircleIcon,\n    CheckCircleIcon,\n    WarningTriangleIcon,\n} from '@patternfly/react-icons';\n\nimport {\n    CollectionVersionAPI,\n    CollectionVersion,\n    CertificationStatus,\n    UserAPI,\n    MeType,\n} from '../../api';\nimport { ParamHelper } from '../../utilities';\nimport {\n    LoadingPageWithHeader,\n    StatefulDropdown,\n    CompoundFilter,\n    LoadingPageSpinner,\n    AppliedFilters,\n    Pagination,\n    Sort,\n    AlertList,\n    closeAlertMixin,\n    AlertType,\n    SortFieldType,\n} from '../../components';\nimport { Paths, formatPath } from '../../paths';\n\ninterface IState {\n    params: {\n        certification?: string;\n        namespace?: string;\n        collection?: string;\n        page?: number;\n        page_size?: number;\n    };\n    alerts: AlertType[];\n    versions: CollectionVersion[];\n    itemCount: number;\n    loading: boolean;\n    updatingVersions: string[];\n    redirect: string;\n}\n\nclass CertificationDashboard extends React.Component<\n    RouteComponentProps,\n    IState\n> {\n    constructor(props) {\n        super(props);\n\n        const params = ParamHelper.parseParamString(props.location.search, [\n            'page',\n            'page_size',\n        ]);\n\n        if (!params['page_size']) {\n            params['page_size'] = 10;\n        }\n\n        if (!params['sort']) {\n            params['sort'] = '-pulp_created';\n        }\n\n        if (!params['certification']) {\n            params['certification'] = CertificationStatus.needsReview;\n        }\n\n        this.state = {\n            versions: undefined,\n            itemCount: 0,\n            params: params,\n            loading: true,\n            updatingVersions: [],\n            redirect: undefined,\n            alerts: [],\n        };\n    }\n\n    componentDidMount() {\n        UserAPI.isPartnerEngineer().then(response => {\n            const me: MeType = response.data;\n            if (!me.is_partner_engineer) {\n                this.setState({ redirect: Paths.notFound });\n            } else {\n                this.queryCollections();\n            }\n        });\n    }\n\n    render() {\n        const { versions, params, itemCount, loading, redirect } = this.state;\n\n        if (redirect) {\n            return <Redirect to={redirect}></Redirect>;\n        }\n\n        const sortOptions: SortFieldType[] = [\n            {\n                id: 'pulp_created',\n                title: 'Date created',\n                type: 'numeric',\n            },\n            { id: 'namespace', title: 'Namespace name', type: 'alpha' },\n            { id: 'version', title: 'Version number', type: 'numeric' },\n            { id: 'name', title: 'Collection name', type: 'alpha' },\n        ];\n\n        if (!versions) {\n            return <LoadingPageWithHeader></LoadingPageWithHeader>;\n        }\n        return (\n            <React.Fragment>\n                <BaseHeader title='Certification dashboard'></BaseHeader>\n                <AlertList\n                    alerts={this.state.alerts}\n                    closeAlert={i => this.closeAlert(i)}\n                />\n                <Main>\n                    <Section className='body'>\n                        <div className='toolbar'>\n                            <Toolbar>\n                                <ToolbarGroup>\n                                    <ToolbarItem>\n                                        <CompoundFilter\n                                            updateParams={p =>\n                                                this.updateParams(p, () =>\n                                                    this.queryCollections(),\n                                                )\n                                            }\n                                            params={params}\n                                            filterConfig={[\n                                                {\n                                                    id: 'namespace',\n                                                    title: 'Namespace',\n                                                },\n                                                {\n                                                    id: 'name',\n                                                    title: 'Collection Name',\n                                                },\n                                                {\n                                                    id: 'certification',\n                                                    title:\n                                                        'Certification Status',\n                                                    inputType: 'select',\n                                                    options: [\n                                                        {\n                                                            id: 'not_certified',\n                                                            title: 'Rejected',\n                                                        },\n                                                        {\n                                                            id: 'needs_review',\n                                                            title:\n                                                                'Needs Review',\n                                                        },\n                                                        {\n                                                            id: 'certified',\n                                                            title: 'Certified',\n                                                        },\n                                                    ],\n                                                },\n                                            ]}\n                                        />\n                                    </ToolbarItem>\n                                </ToolbarGroup>\n                                <ToolbarGroup>\n                                    <ToolbarItem>\n                                        <Sort\n                                            options={sortOptions}\n                                            params={params}\n                                            updateParams={p =>\n                                                this.updateParams(p, () =>\n                                                    this.queryCollections(),\n                                                )\n                                            }\n                                        />\n                                    </ToolbarItem>\n                                </ToolbarGroup>\n                            </Toolbar>\n\n                            <Pagination\n                                params={params}\n                                updateParams={p =>\n                                    this.updateParams(p, () =>\n                                        this.queryCollections(),\n                                    )\n                                }\n                                count={itemCount}\n                                isTop\n                            />\n                        </div>\n                        <div>\n                            <AppliedFilters\n                                updateParams={p =>\n                                    this.updateParams(p, () =>\n                                        this.queryCollections(),\n                                    )\n                                }\n                                params={params}\n                                ignoredParams={['page_size', 'page', 'sort']}\n                            />\n                        </div>\n                        {loading ? (\n                            <LoadingPageSpinner />\n                        ) : (\n                            this.renderTable(versions)\n                        )}\n\n                        <div className='footer'>\n                            <Pagination\n                                params={params}\n                                updateParams={p =>\n                                    this.updateParams(p, () =>\n                                        this.queryCollections(),\n                                    )\n                                }\n                                count={itemCount}\n                            />\n                        </div>\n                    </Section>\n                </Main>\n            </React.Fragment>\n        );\n    }\n\n    private renderTable(versions) {\n        if (versions.length === 0) {\n            return (\n                <EmptyState className='empty' variant={EmptyStateVariant.full}>\n                    <EmptyStateIcon icon={WarningTriangleIcon} />\n                    <Title headingLevel='h2' size='lg'>\n                        No matches\n                    </Title>\n                    <EmptyStateBody>\n                        Please try adjusting your search query.\n                    </EmptyStateBody>\n                </EmptyState>\n            );\n        }\n\n        return (\n            <table\n                aria-label='Collection versions'\n                className='content-table pf-c-table'\n            >\n                <thead>\n                    <tr aria-labelledby='headers'>\n                        <th>Namespace</th>\n                        <th>Collection</th>\n                        <th>Version</th>\n                        <th>Date created</th>\n                        <th>Status</th>\n                        <th></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {versions.map((version, i) => this.renderRow(version, i))}\n                </tbody>\n            </table>\n        );\n    }\n\n    private renderStatus(version: CollectionVersion) {\n        if (this.state.updatingVersions.includes(version.id)) {\n            return <span className='fa fa-lg fa-spin fa-spinner' />;\n        }\n        switch (version.certification) {\n            case CertificationStatus.certified:\n                return (\n                    <span>\n                        <CheckCircleIcon className='certified-icon' /> Certified\n                    </span>\n                );\n            case CertificationStatus.notCertified:\n                return (\n                    <span>\n                        <ExclamationCircleIcon className='rejected-icon' />{' '}\n                        Rejected\n                    </span>\n                );\n            case CertificationStatus.needsReview:\n                return (\n                    <span>\n                        <InfoCircleIcon className='needs-review-icon' /> Needs\n                        Review\n                    </span>\n                );\n        }\n    }\n\n    private renderRow(version: CollectionVersion, index) {\n        return (\n            <tr\n                aria-labelledby={`${version.namespace}.${version.name} v${version.version}`}\n                key={index}\n            >\n                <td>{version.namespace}</td>\n                <td>{version.name}</td>\n                <td>\n                    <Link\n                        to={formatPath(\n                            Paths.collection,\n                            {\n                                namespace: version.namespace,\n                                collection: version.name,\n                            },\n                            {\n                                version: version.version,\n                            },\n                        )}\n                    >\n                        {version.version}\n                    </Link>\n                </td>\n                <td>{moment(version.created_at).fromNow()}</td>\n                <td>{this.renderStatus(version)}</td>\n                <td>\n                    <div className='control-column'>\n                        <div>{this.renderButtons(version)}</div>\n                    </div>\n                </td>\n            </tr>\n        );\n    }\n\n    private renderButtons(version: CollectionVersion) {\n        const importsLink = (\n            <DropdownItem\n                key='imports'\n                component={\n                    <Link\n                        to={formatPath(\n                            Paths.myImports,\n                            {},\n                            {\n                                namespace: version.namespace,\n                                name: version.name,\n                                version: version.version,\n                            },\n                        )}\n                    >\n                        View Import Logs\n                    </Link>\n                }\n            />\n        );\n\n        const certifyDropDown = (isDisabled: boolean) => (\n            <DropdownItem\n                onClick={() =>\n                    this.updateCertification(\n                        version,\n                        CertificationStatus.certified,\n                    )\n                }\n                isDisabled={isDisabled}\n                key='certify'\n            >\n                Certify\n            </DropdownItem>\n        );\n\n        const rejectDropDown = (isDisabled: boolean) => (\n            <DropdownItem\n                onClick={() =>\n                    this.updateCertification(\n                        version,\n                        CertificationStatus.notCertified,\n                    )\n                }\n                isDisabled={isDisabled}\n                className='rejected-icon'\n                key='reject'\n            >\n                Reject\n            </DropdownItem>\n        );\n\n        switch (version.certification) {\n            case CertificationStatus.certified:\n                return (\n                    <span>\n                        <StatefulDropdown\n                            items={[\n                                certifyDropDown(true),\n                                rejectDropDown(false),\n                                importsLink,\n                            ]}\n                        />\n                    </span>\n                );\n            case CertificationStatus.notCertified:\n                return (\n                    <span>\n                        <StatefulDropdown\n                            items={[\n                                certifyDropDown(false),\n                                rejectDropDown(true),\n                                importsLink,\n                            ]}\n                        />\n                    </span>\n                );\n            case CertificationStatus.needsReview:\n                return (\n                    <span>\n                        <Button\n                            onClick={() =>\n                                this.updateCertification(\n                                    version,\n                                    CertificationStatus.certified,\n                                )\n                            }\n                        >\n                            <span>Certify</span>\n                        </Button>\n                        <StatefulDropdown\n                            items={[rejectDropDown(false), importsLink]}\n                        />\n                    </span>\n                );\n        }\n    }\n\n    private updateCertification(version, certification) {\n        // Set the selected version to loading\n        this.setState(\n            {\n                updatingVersions: this.state.updatingVersions.concat([\n                    version.id,\n                ]),\n            },\n            () =>\n                // Perform the PUT request\n                CollectionVersionAPI.setCertifiation(\n                    version.namespace,\n                    version.name,\n                    version.version,\n                    certification,\n                )\n                    .then(() =>\n                        // Since pulp doesn't reply with the new object, perform a\n                        // second query to get the updated data\n                        CollectionVersionAPI.list({\n                            namespace: version.namespace,\n                            name: version.name,\n                            version: version.version,\n                        }).then(result => {\n                            const updatedVersion = result.data.data[0];\n                            const newVersionList = [...this.state.versions];\n                            const ind = newVersionList.findIndex(\n                                x => x.id === updatedVersion.id,\n                            );\n                            newVersionList[ind] = updatedVersion;\n\n                            this.setState({\n                                versions: newVersionList,\n                                updatingVersions: this.state.updatingVersions.filter(\n                                    v => v != updatedVersion.id,\n                                ),\n                            });\n                        }),\n                    )\n                    .catch(error => {\n                        this.setState({\n                            updatingVersions: this.state.updatingVersions.filter(\n                                v => v != version.id,\n                            ),\n                            alerts: this.state.alerts.concat({\n                                variant: 'danger',\n                                title: `API Error: ${error.response.status}`,\n                                description:\n                                    `Could not update the certification ` +\n                                    `status for ${version.namespace}.` +\n                                    `${version.name}.${version.version}.`,\n                            }),\n                        });\n                    }),\n        );\n    }\n\n    private queryCollections() {\n        this.setState({ loading: true }, () =>\n            CollectionVersionAPI.list(this.state.params).then(result =>\n                this.setState({\n                    versions: result.data.data,\n                    itemCount: result.data.meta.count,\n                    loading: false,\n                    updatingVersions: [],\n                }),\n            ),\n        );\n    }\n\n    private get updateParams() {\n        return ParamHelper.updateParamsMixin();\n    }\n\n    private get closeAlert() {\n        return closeAlertMixin('alerts');\n    }\n}\n\nexport default withRouter(CertificationDashboard);\n"],"sourceRoot":""}