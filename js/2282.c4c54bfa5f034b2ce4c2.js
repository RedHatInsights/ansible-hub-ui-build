"use strict";(self.webpackChunkansible_hub_ui=self.webpackChunkansible_hub_ui||[]).push([[2282],{9473:(e,t,n)=>{n.d(t,{Y:()=>s});var o=n(70885),r=n(4942),a=n(45586),c=n(61647);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){var t=e.forceReload,n=e.matchParams,r=e.navigate,i=e.setCollection,s=e.stateParams.version,u=n.collection,p=n.namespace,m=n.repo;a.eq.getCached(l(l({},m?{repository_name:m}:{}),{},{namespace:p,name:u,order_by:"-version"}),t).then((function(e){var t=s?e.find((function(e){return e.collection_version.version==s})):e.find((function(e){return e.is_highest}));a.gu.getContent(p,u,t.collection_version.version).then((function(n){var r=(0,o.Z)(n.data.results,1)[0];i(e,t,r)}))})).catch((function(){r((0,c.dI)(c.nB.notFound))}))}},22282:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var o=n(15671),r=n(43144),a=n(79340),c=n(82963),i=n(61120),l=n(13855),s=n(92950),u=n(45586),p=n(41315),m=n(61542),f=n(61647),d=n(92518),v=n(43819),h=n(9473);var g=function(e){(0,a.Z)(d,e);var t,n,m=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,i.Z)(t);if(n){var r=(0,i.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,c.Z)(this,e)});function d(e){var t;(0,o.Z)(this,d),t=m.call(this,e);var n=v.q.parseParamString(e.location.search);return t.state={collection:null,collections:[],content:null,params:n,loadingImports:!0,selectedImportDetail:void 0,selectedImport:void 0,apiError:void 0},t}return(0,r.Z)(d,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.collection,o=t.collections,r=t.params,a=t.loadingImports,c=t.selectedImportDetail,i=t.selectedImport,u=t.apiError,m=t.content;if(!n)return s.createElement(p.gO,null);var d=n.collection_version,v=n.repository,h=[f.Th,{url:(0,f.dI)(f.nB.namespaceDetail,{namespace:d.namespace}),name:d.namespace},{url:(0,f.dI)(f.nB.collectionByRepo,{namespace:d.namespace,collection:d.name,repo:v.name}),name:d.name},{name:l.ag._("Import log")}];return s.createElement(s.Fragment,null,s.createElement(p.X8,{reload:function(){return e.loadData(!0)},collections:o,collection:n,content:m,params:r,updateParams:function(t){return e.updateParams(t,(function(){return e.loadData(!0)}))},breadcrumbs:h,activeTab:"import-log"}),s.createElement(p.or,null,s.createElement("section",{className:"body"},s.createElement(p.Fb,{empty:!1,loading:a,task:c,followMessages:!1,setFollowMessages:function(){return null},selectedImport:i,apiError:u,hideCollectionName:!0}))))}},{key:"loadData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=l.ag._("Could not load import log");this.setState({loadingImports:!0},(function(){e.loadCollection(t,(function(){u.q3.list({namespace:e.state.collection.collection_version.namespace,name:e.state.collection.collection_version.name,version:e.state.collection.collection_version.version,sort:"-created"}).then((function(t){var o=t.data.data[0];u.q3.get(o.id).then((function(t){e.setState({apiError:void 0,loadingImports:!1,selectedImport:o,selectedImportDetail:t.data})})).catch((function(){e.setState({apiError:n,loadingImports:!1})}))})).catch((function(){e.setState({apiError:n,loadingImports:!1})}))}))}))}},{key:"loadCollection",value:function(e,t){var n=this;(0,h.Y)({forceReload:e,matchParams:this.props.routeParams,navigate:this.props.navigate,setCollection:function(e,o,r){return n.setState({collections:e,collection:o,content:r},t)},stateParams:this.state.params})}},{key:"updateParams",get:function(){return v.q.updateParamsMixin()}}]),d}(s.Component);const y=(0,d.EN)(g);g.contextType=m.I}}]);
//# sourceMappingURL=../sourcemaps/2282.0bed3fe5d83a170c13a7ca35ec6a2c67.js.map