"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[1618],{1618:(e,r,t)=>{t.r(r),t.d(r,{default:()=>h});var n=t(53986),i=t(64467),o=t(47712),a=t(44914),s=t.n(a),l=t(88756),u=t(90593),c=t(60165),p=t(5093),d=t(75841),f=["name"];function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){(0,i.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var b={name:"",description:"",retain_repo_versions:1,pulp_labels:{},remote:null};const h=(0,u.YW)({breadcrumbs:function(e){var r=e.name;return[{url:(0,c.jV)(c.Jh.ansibleRepositories),name:o.Ru._({id:"ooullr"})},r&&{url:(0,c.jV)(c.Jh.ansibleRepositoryDetail,{name:r}),name:r},r?{name:o.Ru._({id:"ePK91l"})}:{name:o.Ru._({id:"m16xKo"})}].filter(Boolean)},condition:function(e,r){return(0,p.QZ)(e)||(0,p.Bf)(e,r)},displayName:"AnsibleRepositoryEdit",errorTitle:{id:"tKqvEr"},listUrl:(0,c.jV)(c.Jh.ansibleRepositories),query:function(e){var r=e.name;return l.Xj.list({name:r}).then((function(e){return e.data.results[0]})).then((function(e){return l.Xj.myPermissions((0,d.dx)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(r){return _(_({},e),{},{my_permissions:r})}))}))},title:function(e){return e.name||o.Ru._({id:"gwr7sh"})},transformParams:function(e){var r=e.name;return _(_({},(0,n.A)(e,f)),{},{name:"_"!==r?r:null})},render:function(e,r){var t=r.navigate,n=r.queueAlert,i=r.state,a=r.setState;if(!i.repositoryToEdit){var p=_(_({},b),e);a({repositoryToEdit:p,errorMessages:{}})}var f=i.repositoryToEdit,m=i.errorMessages;return f?s().createElement(u.$l,{allowEditName:!e,errorMessages:m,onCancel:function(){a({errorMessages:{},repositoryToEdit:void 0}),t(e?(0,c.jV)(c.Jh.ansibleRepositoryDetail,{name:e.name}):(0,c.jV)(c.Jh.ansibleRepositories))},onSave:function(r){var s=r.createDistribution,u=r.hideFromSearch,p=r.pipeline,f=_({},i.repositoryToEdit);Object.keys(f).forEach((function(e){""===f[e]&&(f[e]=null)})),e&&(delete f.last_sync_task,delete f.last_synced_metadata_time,delete f.latest_version_href,delete f.pulp_created,delete f.pulp_href,delete f.versions_href),delete f.my_permissions,f.pulp_labels||(f.pulp_labels={}),u?f.pulp_labels.hide_from_search="":delete f.pulp_labels.hide_from_search,p?f.pulp_labels.pipeline=p:delete f.pulp_labels.pipeline;var m=e?l.Xj.update((0,d.dx)(e.pulp_href),f).then((function(r){var t=r.data;return n((0,d.Oz)(t,o.Ru._({id:"2mxtT9",values:{0:f.name}}))),e.pulp_href})):l.Xj.create(f).then((function(e){var r=e.data;return n({variant:"success",title:o.Ru._({id:"zxh7gX",values:{0:f.name}})}),r.pulp_href}));if(s){var b=function(e){return e.replaceAll(/[^-a-zA-Z0-9_/]/g,"_")},h=f.name;m=m.then((function(e){return l.zg.create({name:h,base_path:b(h),repository:e}).catch((function(){return h=f.name+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),l.zg.create({name:h,base_path:b(h),repository:e})}))})).then((function(e){var r=e.data;return n((0,d.Oz)(r,o.Ru._({id:"zxbKWg",values:{distributionName:h}})))}))}m.then((function(){a({errorMessages:{},repositoryToEdit:void 0}),t((0,c.jV)(c.Jh.ansibleRepositoryDetail,{name:f.name}))})).catch((function(e){var r=e.response.data;return a({errorMessages:_({__nofield:r.non_field_errors||r.detail},r)})}))},repository:f,updateRepository:function(e){return a({repositoryToEdit:e})}}):null}})},5093:(e,r,t)=>{t.d(r,{$w:()=>u,Bf:()=>d,Fs:()=>_,QZ:()=>c,Sq:()=>a,Xb:()=>s,_9:()=>p,hB:()=>b,k3:()=>m,re:()=>l,u9:()=>o,wY:()=>f});var n=function(e){return function(r){var t=r.hasPermission,n=r.user;return t(e)||(null==n?void 0:n.is_superuser)}},i=function(e){return function(r,t){var n=r.hasPermission,i=r.hasObjectPermission,o=r.user;return n(e)||(null==i?void 0:i(e,t))||(null==o?void 0:o.is_superuser)}},o=n("ansible.add_collectionremote"),a=i("ansible.delete_collectionremote"),s=i("ansible.change_collectionremote"),l=i("ansible.view_collectionremote"),u=i("ansible.manage_roles_collectionremote"),c=n("ansible.add_ansiblerepository"),p=i("ansible.delete_ansiblerepository"),d=i("ansible.change_ansiblerepository"),f=d,m=function(e){var r=e.user,t=e.featureFlags;return r&&(null==t?void 0:t.display_repositories)},_=i("ansible.manage_roles_ansiblerepository"),b=d}}]);
//# sourceMappingURL=../sourcemaps/1618.6c6eaf8c635f48cb3a548c37f6c5d8cf.js.map