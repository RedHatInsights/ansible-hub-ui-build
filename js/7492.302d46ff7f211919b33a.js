"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[7492],{47492:(e,t,n)=>{n.d(t,{UV:()=>d,m2:()=>f,o$:()=>_,gY:()=>v,WO:()=>y,QD:()=>b,Yb:()=>A,YP:()=>P,gd:()=>q,ms:()=>R,y:()=>N,Gv:()=>G,Oj:()=>z,U3:()=>W});var r=n(72956),o=n(77104),i=n(18232),a=n.n(i),l=n(49368),c=function(e){var t=e.buttonVariant,n=e.condition,i=void 0===n?function(){return!0}:n,c=e.disabled,s=void 0===c?function(){return null}:c,u=e.modal,d=void 0===u?null:u,m=e.onClick,p=e.title,f=e.visible,_=void 0===f?function(){return!0}:f;return{title:r._s._(p),button:function(e,n){return i(n,e)&&_(e,n)?s(e,n)?a().createElement(l.o5,{content:s(e,n),key:r._s._(p)},a().createElement(o.Button,{variant:t,isDisabled:!0},r._s._(p))):a().createElement(o.Button,{variant:t,key:r._s._(p),onClick:function(){return m(e,n)}},r._s._(p)):null},dropdownItem:function(e,t){return i(t,e)&&_(e,t)?s(e,t)?a().createElement(o.DropdownItem,{key:r._s._(p),description:s(e,t),isDisabled:!0},r._s._(p)):a().createElement(o.DropdownItem,{key:r._s._(p),onClick:function(){return m(e,t)}},r._s._(p)):null},modal:d,visible:_,disabled:s}},s=n(32004),u=n(24760),d=c({condition:u.mW,title:{id:"ZbLFVx"},onClick:function(e,t){return(0,t.navigate)((0,s.oD)(s.uk.ansibleRemoteEdit,{name:"_"}))}}),m=n(59072),p=n(58860),f=c({condition:u.wT,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,o=e.setState,i=e.state;return i.deleteModalOpen?a().createElement(l.Ij,{closeAction:function(){return o({deleteModalOpen:null})},deleteAction:function(){return function(e,t){var n=e.name,o=e.pulpId,i=t.addAlert,a=t.setState,l=t.listQuery;return m.E3.delete(o).then((function(e){var t=e.data;return i((0,p.MR)(t.task,r._s._({id:"eYzGw4",values:{name:n}}))),a({deleteModalOpen:null}),(0,p.i8)(t.task)})).then((function(){return l()})).catch((0,p.Ir)(r._s._({id:"7GMpqA",values:{name:n}}),(function(){return null}),i))}(i.deleteModalOpen,{addAlert:t,setState:o,listQuery:n})},name:i.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,o=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.oL)(o),name:n}})}}),_=c({title:{id:"f2gEiZ"},onClick:function(e){var t=e.ca_cert;return(0,p.En)(t,"ca_cert")},visible:function(e){return!!e.ca_cert}}),v=c({title:{id:"1bW0sk"},onClick:function(e){var t=e.client_cert;return(0,p.En)(t,"client_cert")},visible:function(e){return!!e.client_cert}}),y=c({title:{id:"nAWnrE"},onClick:function(e){var t=e.requirements_file;return(0,p.En)(t,"requirements.yml")},visible:function(e){return!!e.requirements_file}}),b=c({condition:u.XI,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,s.oD)(s.uk.ansibleRemoteEdit,{name:n}))}}),h=n(98920),E=n(60888),k=n(52536);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,k.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g,M=function(e){var t=e.addAction,n=e.closeAction,c=e.sourceRepository,s=(0,i.useState)([]),u=(0,h.c)(s,2),d=u[0],p=u[1],f=(0,i.useState)([]),_=(0,h.c)(f,2),v=_[0],y=_[1],b=function(){var e=C({},(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params);return e.ordering=e.sort,delete e.sort,m.Rz.list(C({},e)).then((function(e){var t=e.data;return{data:{count:t.meta.count,results:t.data}}}))},k=(0,i.useState)({}),O=(0,h.c)(k,2),g=O[0],M=O[1];return a().createElement(o.Modal,{actions:[a().createElement(o.Button,{key:"confirm",onClick:function(){return t(v)},variant:"primary",isDisabled:!v.length},r._s._({id:"rG3WVm"})),a().createElement(o.Button,{key:"cancel",onClick:n,variant:"link"},r._s._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:r._s._({id:"D9JyS0"}),variant:"large"},a().createElement("section",{className:"modal-body","data-cy":"modal-body"},a().createElement(l.iI,{actionContext:{addAlert:function(e){p([].concat((0,E.c)(d),[e]))},state:g,setState:M,query:b,hasPermission:function(){throw"unused"}},defaultPageSize:10,defaultSort:"name",errorTitle:r._s._({id:"GNyQoC"}),filterConfig:[{id:"keywords",title:r._s._({id:"/n/HCO"})},{id:"namespace",title:r._s._({id:"wMe2Qp"})},{id:"repository_name",title:r._s._({id:"IreQBq"})}],noDataDescription:r._s._({id:"UzlZ+i"}),noDataTitle:r._s._({id:"Ut02fq"}),query:b,renderTableRow:function(e,t){var n=e.collection_version,r=n.name,i=n.namespace,l=n.version,s=n.description,u=e.repository,d=c.pulp_href===u.pulp_href;return a().createElement("tr",{onClick:function(){return y((t=e,(n=v).find((function(e){var n=e.collection_version,r=e.repository;return n.pulp_href===t.collection_version.pulp_href&&r.pulp_href===t.repository.pulp_href}))?n.filter((function(e){var n=e.collection_version,r=e.repository;return n.pulp_href!==t.collection_version.pulp_href||r.pulp_href!==t.repository.pulp_href})):[].concat((0,E.c)(n),[t])));var t,n},key:t},a().createElement("td",null,a().createElement(o.Checkbox,{"aria-label":"".concat(i,".").concat(r," v").concat(l),id:"collection-".concat(t),isChecked:d||v.includes(e),name:"collection-".concat(t),isDisabled:d})),a().createElement("td",null,i,".",r," v",l),a().createElement("td",null,s),a().createElement("td",null,u.name))},sortHeaders:[{title:"",type:"none",id:"radio"},{title:r._s._({id:"q+hNag"}),type:"none",id:"col1"},{title:r._s._({id:"Nu4oKW"}),type:"none",id:"col2"},{title:r._s._({id:"IreQBq"}),type:"none",id:"col3"}],title:r._s._({id:"QGV1gp"})})),a().createElement(l.WW,{alerts:d,closeAlert:function(e){return(0,l.CC)(e,{alerts:d,setAlerts:p})}}))},A=c({condition:u.m2,title:{id:"aoEnJe"},modal:function(e){var t=e.addAlert,n=e.state,o=e.setState,i=e.query;return n.addCollectionVersionModal?a().createElement(M,{addAction:function(e){!function(e,t,n){var o=e.repositoryHref,i=e.repositoryName,a=n.addAlert,l=n.setState,c=n.query,s=(0,p.oL)(o),u=t.map((function(e){return e.collection_version.pulp_href}));m.CG.addContent(s,u).then((function(e){var n=e.data;t.map((function(e){var t=e.collection_version,o=t.name,s=t.namespace,u=t.version,d=e.repository;a((0,p.MR)(n.task,r._s._({id:"HywrEO",values:{0:d.name,namespace:s,name:o,version:u,repositoryName:i}}))),l((function(e){return C(C({},e),{},{addCollectionVersionModal:null})})),c({})}))})).catch((0,p.Ir)(r._s._({id:"hQPQZ4",values:{0:t.length,repositoryName:i}}),(function(){return l((function(e){return C(C({},e),{},{addCollectionVersionModal:null})}))}),a))}(n.addCollectionVersionModal,e,{addAlert:t,setState:o,query:i})},closeAction:function(){return o((function(e){return C(C({},e),{},{addCollectionVersionModal:null})}))},sourceRepository:n.repository}):null},onClick:function(e,t){var n=t.state.repository,r=n.name,o=n.pulp_href;return(0,t.setState)((function(e){return C(C({},e),{},{addCollectionVersionModal:{repositoryHref:o,repositoryName:r}})}))}}),S=n(58816),w=function(e){var t=e.name,n=e.namespace,c=e.repositoryName,s=e.version,u=e.closeAction,d=e.deleteAction,m=(0,i.useState)(!1),p=(0,h.c)(m,2),f=p[0],_=p[1];return t?a().createElement(l.SI,{spinner:f,cancelAction:function(){_(!1),u()},deleteAction:function(){_(!1),d()},isDisabled:f,isRemove:!0,title:r._s._({id:"t7e8jE"})},a().createElement(o.Text,null,a().createElement(S.mk,{id:"Agq2UM",values:{namespace:n,name:t,version:s,repositoryName:c},components:{0:a().createElement("b",null),1:a().createElement("b",null)}}))):null},P=c({condition:u.m2,title:{id:"t/YqKh"},modal:function(e){var t=e.addAlert,n=e.state,o=e.setState,i=e.query;return n.removeCollectionVersionModal?a().createElement(w,{closeAction:function(){return o({removeCollectionVersionModal:null})},deleteAction:function(){return function(e,t){var n=e.collection,o=n.namespace,i=n.name,a=n.version,l=e.collectionVersionHref,c=e.repositoryHref,s=e.repositoryName,u=t.addAlert,d=t.setState,f=t.query,_=(0,p.oL)(c);return m.CG.removeContent(_,l).then((function(e){var t=e.data;u((0,p.MR)(t.task,r._s._({id:"cIK9va",values:{namespace:o,name:i,version:a,repositoryName:s}}))),d({removeCollectionVersionModal:null}),f()})).catch((0,p.Ir)(r._s._({id:"ecxEjo",values:{namespace:o,name:i,version:a,repositoryName:s}}),(function(){return d({removeCollectionVersionModal:null})}),u))}(n.removeCollectionVersionModal,{addAlert:t,setState:o,query:i})},name:n.removeCollectionVersionModal.collection.name,namespace:n.removeCollectionVersionModal.collection.namespace,repositoryName:n.removeCollectionVersionModal.repositoryName,version:n.removeCollectionVersionModal.collection.version}):null},onClick:function(e,t){var n=e.collection_version,r=n.namespace,o=n.name,i=n.version,a=n.pulp_href,l=e.repository,c=l.name,s=l.pulp_href;return(0,t.setState)({removeCollectionVersionModal:{collection:{namespace:r,name:o,version:i},repositoryName:c,repositoryHref:s,collectionVersionHref:a}})}}),j=n(1528),D=n(33248),I=n.n(D),q=c({title:{id:"5wEn9x"},onClick:(g=(0,j.c)(I().mark((function e(t,n){var o,i,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.addAlert,i=null,t.distroBasePath){e.next=9;break}return o({id:"copy-cli-config",title:r._s._({id:"O/Dt81"}),variant:"info"}),e.next=6,(0,p.cV)(t.name,t.pulp_href).catch((function(){return null}));case 6:i=e.sent,e.next=10;break;case 9:i=t.distroBasePath;case 10:if(i){e.next=13;break}return o({id:"copy-cli-config",title:r._s._({id:"bqNryO"}),variant:"danger"}),e.abrupt("return");case 13:l=["[galaxy]","server_list = ".concat(i),"","[galaxy_server.".concat(i,"]"),"url=".concat((0,p.uo)(i)),"token=<put your token here>"].join("\n"),navigator.clipboard.writeText(l),o({description:a().createElement("pre",null,l),id:"copy-cli-config",title:r._s._({id:"ORamYR"}),variant:"success"});case 16:case"end":return e.stop()}}),e)}))),function(e,t){return g.apply(this,arguments)}),disabled:function(e){return"distroBasePath"in e&&!e.distroBasePath?r._s._({id:"bqNryO"}):null}}),R=c({condition:u.i,title:{id:"Czn04i"},onClick:function(e,t){return(0,t.navigate)((0,s.oD)(s.uk.ansibleRepositoryEdit,{name:"_"}))}}),V=n(47580),N=c({condition:u.a2,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,r=e.setState,o=e.state;return o.deleteModalOpen?a().createElement(l.aC,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){return x.apply(this,arguments)}(o.deleteModalOpen,{addAlert:t,listQuery:n,setState:r})},name:o.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,o=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.oL)(o),name:n,pulp_href:o}})},disabled:function(e){var t=e.name;return V.M.PROTECTED_REPOSITORIES.includes(t)?r._s._({id:"G8qmOx"}):null}});function x(){return(x=(0,j.c)(I().mark((function e(t,n){var o,i,a,l,c,s,u,d,f;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.name,i=t.pulp_href,a=t.pulpId,l=n.addAlert,c=n.setState,s=n.listQuery,e.next=4,m.y4.list({repository:i,page:1,page_size:100}).then((function(e){return e.data.results||[]})).catch((function(e){return(0,p.Ir)(r._s._({id:"fSg4cw"}),(function(){return null}),l)(e),[]}));case 4:return u=e.sent,d=m.CG.delete(a).then((function(e){var t=e.data;return l((0,p.MR)(t.task,r._s._({id:"I9erLk",values:{name:o}}))),(0,p.i8)(t.task)})).catch((0,p.Ir)(r._s._({id:"YRWr1H",values:{name:o}}),(function(){return c({deleteModalOpen:null})}),l)),f=function(e){var t=e.name,n=e.pulp_href,o=(0,p.oL)(n);return m.y4.delete(o).then((function(e){var n=e.data;return l((0,p.MR)(n.task,r._s._({id:"Hiczol",values:{name:t}}))),(0,p.i8)(n.task)})).catch((0,p.Ir)(r._s._({id:"bO1/oq",values:{name:t}}),(function(){return null}),l))},e.abrupt("return",Promise.all([d].concat((0,E.c)(u.map(f)))).then((function(){c({deleteModalOpen:null}),s()})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=c({condition:u.m2,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,s.oD)(s.uk.ansibleRepositoryEdit,{name:n}))}}),B=n(50708);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,k.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(e){var t=e.closeAction,n=e.syncAction,c=e.name,s=(0,i.useState)(!1),u=(0,h.c)(s,2),d=u[0],m=u[1],p=(0,i.useState)({mirror:!0,optimize:!0}),f=(0,h.c)(p,2),_=f[0],v=f[1];return(0,i.useEffect)((function(){m(!1),v({mirror:!0,optimize:!0})}),[c]),c?a().createElement(o.Modal,{actions:[a().createElement("div",{"data-cy":"sync-button",key:"sync"},a().createElement(o.Button,{key:"sync",onClick:function(){m(!0),n(_).then(t).finally((function(){return m(!1)}))},variant:"primary",isDisabled:d},r._s._({id:"Nu4DdT"}),d&&a().createElement(o.Spinner,{size:"sm"}))),a().createElement(o.Button,{key:"close",onClick:t,variant:"link"},r._s._({id:"yz7wBu"}))],isOpen:!0,onClose:t,title:r._s._({id:"ZkyFE9",values:{name:c}}),variant:"medium"},a().createElement(o.FormGroup,{label:r._s._({id:"xl5v4T"}),labelIcon:a().createElement(l.W0,{content:r._s._({id:"xGK5PA"})})},a().createElement(o.Switch,{isChecked:_.mirror,onChange:function(e){return v(H(H({},_),{},{mirror:e}))},label:r._s._({id:"CXfJAw"}),labelOff:r._s._({id:"JcAyYr"})})),a().createElement("br",null),a().createElement(o.FormGroup,{label:r._s._({id:"MLeMRw"}),labelIcon:a().createElement(l.W0,{content:r._s._({id:"GA4EFU"})})},a().createElement(o.Switch,{isChecked:_.optimize,onChange:function(e){return v(H(H({},_),{},{optimize:e}))},label:r._s._({id:"QksU5X"}),labelOff:r._s._({id:"4KZ64/"})})),a().createElement("br",null)):null},z=c({condition:u.ET,title:{id:"Nu4DdT"},modal:function(e){var t=e.addAlert,n=e.query,o=e.setState,i=e.state;return i.syncModalOpen?a().createElement(Q,{closeAction:function(){return o({syncModalOpen:null})},syncAction:function(e){return function(e,t,n){var o=e.name,i=e.pulp_href,a=t.addAlert,l=t.query,c=(0,p.oL)(i);return m.CG.sync(c,n||{mirror:!0}).then((function(e){var t=e.data;a((0,p.MR)(t.task,r._s._({id:"LN/UXA",values:{name:o}}))),l()})).catch((0,p.Ir)(r._s._({id:"HFnbWa",values:{name:o}}),(function(){return null}),a))}(i.syncModalOpen,{addAlert:t,query:n},e)},name:i.syncModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.pulp_href;return(0,t.setState)({syncModalOpen:{name:n,pulp_href:r}})},visible:function(e,t){return(0,t.hasPermission)("ansible.change_collectionremote")},disabled:function(e){var t=e.remote,n=e.last_sync_task;if(!t)return r._s._({id:"CtFEEh"});if(n&&["running","waiting"].includes(n.state))return r._s._({id:"wjw99g"});if(t&&"https://galaxy.ansible.com/api/"===t.url){var o=t.name,i=(0,s.oD)(s.uk.ansibleRemoteEdit,{name:o});if(!t.requirements_file)return a().createElement(S.mk,{id:"/Ro7TR",values:{name:o},components:{0:a().createElement(B.Link,{to:i})}});if(t.signed_only)return a().createElement(S.mk,{id:"jeIRua",values:{name:o},components:{0:a().createElement(B.Link,{to:i})}})}return null}}),L=function(e){var t=e.version,n=e.cancelAction,l=e.revertAction,c=(0,i.useState)(!1),s=(0,h.c)(c,2),u=s[0],d=s[1];return a().createElement(o.Modal,{actions:[a().createElement("div",{"data-cy":"delete-button",key:"delete"},a().createElement(o.Button,{key:"delete",onClick:function(){d(!0),l()},variant:"danger",isDisabled:u},r._s._({id:"jJdwCB"}),u&&a().createElement(o.Spinner,{size:"sm"}))),a().createElement(o.Button,{key:"cancel",onClick:n,variant:"link"},r._s._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:r._s._({id:"pbfHgy"}),titleIconVariant:"warning",variant:"small","data-cy":"modal_checkbox"},a().createElement(S.mk,{id:"8N1g3s"}),a().createElement("br",null),a().createElement("b",null,t))},W=c({condition:u.yu,title:{id:"Zo7Ryi"},modal:function(e){var t=e.addAlert,n=e.state,o=e.setState,i=e.query;return n.revertModal?a().createElement(L,{cancelAction:function(){return o({revertModal:null})},revertAction:function(){return function(e,t){var n=e.repositoryName,o=e.pulp_href,i=e.number,a=t.addAlert,l=t.setState,c=t.query,s=(0,p.oL)(o);return m.CG.revert(s,o).then((function(e){var t=e.data;a((0,p.MR)(t.task,r._s._({id:"n9spVP",values:{repositoryName:n}}))),l({revertModal:null}),c()})).catch((0,p.Ir)(r._s._({id:"VfVFE7",values:{repositoryName:n,number:i}}),(function(){return l({revertModal:null})}),a))}(n.revertModal,{addAlert:t,setState:o,query:i})},version:n.revertModal.number}):null},onClick:function(e,t){var n=e.repositoryName,r=e.number,o=e.pulp_href;return(0,t.setState)({revertModal:{repositoryName:n,number:r,pulp_href:o}})},disabled:function(e){return e.isLatest?r._s._({id:"0WOjYo"}):null}})},24760:(e,t,n)=>{n.d(t,{ET:()=>p,OM:()=>_,XI:()=>l,Yf:()=>s,a2:()=>d,i:()=>u,m2:()=>m,mW:()=>i,o7:()=>c,qI:()=>f,wT:()=>a,yu:()=>v});var r=function(e){return function(t){var n=t.hasPermission,r=t.user;return n(e)||(null==r?void 0:r.is_superuser)}},o=function(e){return function(t,n){var r=t.hasPermission,o=t.hasObjectPermission,i=t.user;return r(e)||(null==o?void 0:o(e,n))||(null==i?void 0:i.is_superuser)}},i=r("ansible.add_collectionremote"),a=o("ansible.delete_collectionremote"),l=o("ansible.change_collectionremote"),c=o("ansible.view_collectionremote"),s=o("ansible.manage_roles_collectionremote"),u=r("ansible.add_ansiblerepository"),d=o("ansible.delete_ansiblerepository"),m=o("ansible.change_ansiblerepository"),p=m,f=function(e){var t=e.user,n=e.featureFlags;return t&&(null==n?void 0:n.display_repositories)},_=o("ansible.manage_roles_ansiblerepository"),v=m}}]);
//# sourceMappingURL=../sourcemaps/7492.3ed77238875a39f2d29995f7549642ef.js.map