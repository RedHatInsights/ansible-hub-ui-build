"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[327],{66327:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var l=t(64467),n=t(47712),r=t(44914),u=t.n(r),s=t(35489),o=t(88696),i=t(35894),c=t(60165),d=t(5093),m=t(39799),v=t(80296),f=function(e){var a=e.item,t=e.actionContext,l=t.addAlert,s=t.featureFlags,f=t.hasPermission,R=t.state.params,p=t.user,h=(null==a?void 0:a.pulp_href)&&(0,m.dx)(a.pulp_href),b=(0,r.useState)(null==a?void 0:a.name),_=(0,v.A)(b,2),S=_[0],w=_[1],E=(0,r.useState)(null),g=(0,v.A)(E,2),j=g[0],y=g[1],U=(0,r.useState)(null),A=(0,v.A)(U,2),O=A[0],P=A[1],k=(0,r.useState)(!1),D=(0,v.A)(k,2),Y=D[0],F=D[1],z=(0,r.useState)(null),x=(0,v.A)(z,2),M=x[0],W=x[1],G=(0,r.useState)(null),J=(0,v.A)(G,2),Q=J[0],C=J[1],V=(0,r.useState)(null),L=(0,v.A)(V,2),T=L[0],q=L[1],N=(0,r.useState)(null),B=(0,v.A)(N,2),H=B[0],I=B[1],Z=(0,r.useState)(null),K=(0,v.A)(Z,2),X=K[0],$=K[1],ee=(0,r.useState)(null),ae=(0,v.A)(ee,2),te=ae[0],le=ae[1],ne=(0,r.useState)(null),re=(0,v.A)(ne,2),ue=re[0],se=re[1],oe=(0,r.useState)(null),ie=(0,v.A)(oe,2),ce=ie[0],de=ie[1],me=function(){P(null),y(null),o.DY.myPermissions(h).then((function(e){var a=e.data.permissions;F((0,d.$w)({hasPermission:f,hasObjectPermission:function(e){return a.includes(e)},user:p,featureFlags:s})),o.DY.listRoles(h,{page_size:100}).then((function(e){var a=e.data.roles,t=(0,m.LF)(a),l=t.users,n=t.groups;w(S),P(l),y(n)})).catch((function(){P([]),y([])}))})).catch((function(){P([]),y([]),F(!1)}))},ve=function(e){var a=e.roles,t=e.alertSuccess,n=e.alertFailure,r=e.stateUpdate;Promise.all(a).then((function(){l({title:t,variant:"success"}),me()})).catch((function(e){var a=e.response,t=a.status,r=a.statusText;l({title:n,variant:"danger",description:(0,m.gJ)(t,r)})})).finally((function(){fe(r)}))},fe=function(e){Object.entries(e).forEach((function(e){var a=(0,v.A)(e,2),t=a[0],l=a[1];switch(t){case"showUserRemoveModal":q(l);break;case"showUserSelectWizard":I(l);break;case"showGroupRemoveModal":$(l);break;case"showGroupSelectWizard":le(l);break;case"showRoleRemoveModal":se(l);break;case"showRoleSelectWizard":de(l);break;default:console.error("updateProps",t,l)}}))};return(0,r.useEffect)(me,[a.pulp_href]),(0,r.useEffect)((function(){O&&(null!=R&&R.user?o.QS.list({username:R.user}).then((function(e){var a=e.data.data;C(O.find((function(e){return e.username===a[0].username})))})):C(null))}),[null==R?void 0:R.user,O]),(0,r.useEffect)((function(){j&&(null!=R&&R.group?o.YF.list({name:R.group}).then((function(e){var a=e.data.data;W(j.find((function(e){return e.name===a[0].name})))})):W(null))}),[null==R?void 0:R.group,j]),u().createElement(i.Gj,{addGroup:function(e,a){var t=a.map((function(a){return o.DY.addRole(h,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:n.Ru._({id:"lylrvu",values:{0:e.name,name:S}}),alertFailure:n.Ru._({id:"9/YKZd",values:{0:e.name,name:S}}),stateUpdate:{showGroupSelectWizard:null}})},addRole:function(e,a){var t=a.map((function(a){return o.DY.addRole(h,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:n.Ru._({id:"svLSRe",values:{0:e.name,name:S}}),alertFailure:n.Ru._({id:"eeQk9h",values:{0:e.name,name:S}}),stateUpdate:{showRoleSelectWizard:null}})},addUser:function(e,a){var t=a.map((function(a){return o.DY.addRole(h,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:n.Ru._({id:"J7EvK0",values:{0:e.username,name:S}}),alertFailure:n.Ru._({id:"0P+eGj",values:{0:e.username,name:S}}),stateUpdate:{showUserSelectWizard:null}})},addUserRole:function(e,a){var t=a.map((function(a){return o.DY.addRole(h,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:n.Ru._({id:"ifVlo4",values:{0:e.username,name:S}}),alertFailure:n.Ru._({id:"xJC6dy",values:{0:e.username,name:S}}),stateUpdate:{showRoleSelectWizard:null}})},canEditOwners:Y,group:M,groups:j,name:S,pulpObjectType:"remotes/ansible/collection",removeGroup:function(e){var a=e.object_roles.map((function(a){return o.DY.removeRole(h,{role:a,groups:[e.name]})}));ve({roles:a,alertSuccess:n.Ru._({id:"94LxzI",values:{0:e.name,name:S}}),alertFailure:n.Ru._({id:"j17tAi",values:{0:e.name,name:S}}),stateUpdate:{showGroupRemoveModal:null}})},removeRole:function(e,a){var t=o.DY.removeRole(h,{role:e,groups:[a.name]});ve({roles:[t],alertSuccess:n.Ru._({id:"svLSRe",values:{0:a.name,name:S}}),alertFailure:n.Ru._({id:"eeQk9h",values:{0:a.name,name:S}}),stateUpdate:{showRoleRemoveModal:null}})},removeUser:function(e){var a=e.object_roles.map((function(a){return o.DY.removeRole(h,{role:a,users:[e.username]})}));ve({roles:a,alertSuccess:n.Ru._({id:"ekGBsh",values:{0:e.username,name:S}}),alertFailure:n.Ru._({id:"O21voo",values:{0:e.username,name:S}}),stateUpdate:{showUserRemoveModal:null}})},removeUserRole:function(e,a){var t=o.DY.removeRole(h,{role:e,users:[a.username]});ve({roles:[t],alertSuccess:n.Ru._({id:"ifVlo4",values:{0:a.username,name:S}}),alertFailure:n.Ru._({id:"xJC6dy",values:{0:a.username,name:S}}),stateUpdate:{showRoleRemoveModal:null}})},selectRolesMessage:n.Ru._({id:"FoCVlu"}),showGroupRemoveModal:X,showGroupSelectWizard:te,showRoleRemoveModal:ue,showRoleSelectWizard:ce,showUserRemoveModal:T,showUserSelectWizard:H,updateProps:fe,user:Q,users:O,urlPrefix:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:S})})},R=t(85738),p=t(33774),h=t(20810);const b=e=>{var{children:a=null,className:t}=e,l=(0,R.Tt)(e,["children","className"]);return r.createElement("div",Object.assign({className:(0,p.A)(`${h.A.codeBlockActions}-item`,t)},l),a)};b.displayName="CodeBlockAction";var _=t(54709),S=t(65956),w=function(e){var a=e.code,t=u().createElement(b,null,u().createElement(i.TZ,{text:a,textId:"code-content"}));return u().createElement(_.N,{actions:t},u().createElement(S.s,{id:"code-content"},a))},E=function(e){var a=e.code;return a?u().createElement(w,{code:a}):u().createElement(u().Fragment,null,n.Ru._({id:"EdQY6l"}))},g=function(e){var a,t,l=e.item;return u().createElement(i.B_,{fields:[{label:n.Ru._({id:"W+/a1z"}),value:null==l?void 0:l.name},{label:n.Ru._({id:"IagCbF"}),value:u().createElement(i.hi,{url:null==l?void 0:l.url,fallback:!0})},{label:n.Ru._({id:"vEkjkD"}),value:u().createElement(i.hi,{url:null==l?void 0:l.proxy_url,fallback:!0})},{label:n.Ru._({id:"r2AaSF"}),value:null!=l&&l.tls_validation?n.Ru._({id:"RxzN1M"}):n.Ru._({id:"E/QGRL"})},{label:n.Ru._({id:"lWw/5G"}),value:(null==l?void 0:l.client_cert)||n.Ru._({id:"EdQY6l"})},{label:n.Ru._({id:"qldWHB"}),value:(null==l?void 0:l.ca_cert)||n.Ru._({id:"EdQY6l"})},{label:n.Ru._({id:"+e1mLz"}),value:null!==(a=null==l?void 0:l.download_concurrency)&&void 0!==a?a:n.Ru._({id:"EdQY6l"})},{label:n.Ru._({id:"SeWdiM"}),value:null!==(t=null==l?void 0:l.rate_limit)&&void 0!==t?t:n.Ru._({id:"EdQY6l"})},{label:n.Ru._({id:"ooullr"}),value:u().createElement(i.PO,{remoteHref:null==l?void 0:l.pulp_href})},{label:n.Ru._({id:"6rUIqH"}),value:u().createElement(E,{code:null==l?void 0:l.requirements_file})}]})};function j(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,l)}return t}function y(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?j(Object(t),!0).forEach((function(a){(0,l.A)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}const U=(0,i.UE)({breadcrumbs:function(e){var a=e.name,t=e.tab,l=e.params,r=l.user,u=l.group;return[{url:(0,c.jV)(c.Jh.ansibleRemotes),name:n.Ru._({id:"TiuMpz"})},{url:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:a}),name:a},"access"===t&&(u||r)?{url:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:a},{tab:t}),name:n.Ru._({id:"LuXP9q"})}:null,"access"===t&&u?{name:n.Ru._({id:"8uT/P7",values:{group:u}})}:null,"access"===t&&r?{name:n.Ru._({id:"AkUbn7",values:{user:r}})}:null,"access"!==t||r||u?null:{name:n.Ru._({id:"LuXP9q"})}].filter(Boolean)},condition:d.re,displayName:"AnsibleRemoteDetail",errorTitle:{id:"cFwIgK"},headerActions:[s.Zl,s.Zb,s.Uv,s.$Q,s.Ql],listUrl:(0,c.jV)(c.Jh.ansibleRemotes),query:function(e){var a=e.name;return o.DY.list({name:a}).then((function(e){return e.data.results[0]})).then((function(e){return e?o.DY.myPermissions((0,m.dx)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(a){return y(y({},e),{},{my_permissions:a})})):Promise.reject({response:{status:404}})}))},renderTab:function(e,a,t){return{details:u().createElement(g,{item:a,actionContext:t}),access:u().createElement(f,{item:a,actionContext:t})}[e]},tabs:function(e,a){return[{active:"details"===e,title:n.Ru._({id:"URmyfc"}),link:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:a},{tab:"details"})},{active:"access"===e,title:n.Ru._({id:"LuXP9q"}),link:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:a},{tab:"access"})}]}})}}]);
//# sourceMappingURL=../sourcemaps/327.bd8343648145207f54648938f26d2825.js.map