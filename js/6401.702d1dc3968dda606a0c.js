"use strict";(self.webpackChunkansible_hub_ui=self.webpackChunkansible_hub_ui||[]).push([[6401],{46401:(e,r,n)=>{n.r(r),n.d(r,{default:()=>y});var t=n(44925),o=n(4942),a=n(13855),i=n(92950),s=n.n(i),l=n(45586),u=n(14057),c=n(61647),m=n(6640),d=n(92518),f=["name"];function _(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function b(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var p={name:"",url:"",ca_cert:null,client_cert:null,tls_validation:!0,proxy_url:null,download_concurrency:null,rate_limit:null,requirements_file:null,auth_url:null,signed_only:!1,hidden_fields:["client_key","proxy_username","proxy_password","username","password","token"].map((function(e){return{name:e,is_set:!1}}))};const y=(0,u.T3)({breadcrumbs:function(e){var r=e.name;return[{url:(0,c.dI)(c.nB.ansibleRemotes),name:a.ag._("Remotes")},r&&{url:(0,c.dI)(c.nB.ansibleRemoteDetail,{name:r}),name:r},r?{name:a.ag._("Edit")}:{name:a.ag._("Add")}].filter(Boolean)},condition:function(e,r){return(0,m.rH)(e)||(0,m.DQ)(e,r)},displayName:"AnsibleRemoteEdit",errorTitle:a.ag._("Remote could not be displayed."),query:function(e){var r=e.name;return l.GC.list({name:r}).then((function(e){return e.data.results[0]})).then((function(e){return l.GC.myPermissions((0,d.LL)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(r){return b(b({},e),{},{my_permissions:r})}))}))},title:function(e){return e.name||a.ag._("Add new remote")},transformParams:function(e){var r=e.name;return b(b({},(0,t.Z)(e,f)),{},{name:"_"!==r?r:null})},render:function(e,r){var n=r.navigate,t=r.queueAlert,o=r.state,i=r.setState;if(!o.remoteToEdit){var m=b(b({},p),e);i({remoteToEdit:m,errorMessages:{}})}var f=o.remoteToEdit,_=o.errorMessages;return f?s().createElement(u.bi,{allowEditName:!e,remote:f,updateRemote:function(e){return i({remoteToEdit:e})},remoteType:"ansible-remote",showMain:!0,saveRemote:function(){var r=b({},o.remoteToEdit);e||(Object.keys(r).forEach((function(e){""!==r[e]&&null!=r[e]||delete r[e]})),delete r.hidden_fields),delete r.my_permissions,!r.url||r.url.includes("?")||r.url.endsWith("/")||(r.url+="/"),(e?l.GC.smartUpdate((0,d.LL)(e.pulp_href),r,e):l.GC.create(r)).then((function(o){var s=o.data;i({errorMessages:{},remoteToEdit:void 0}),t(e?(0,d.zT)(s,a.ag._("Update started for remote {0}",{0:r.name})):{variant:"success",title:a.ag._("Successfully created remote {0}",{0:r.name})}),n((0,c.dI)(c.nB.ansibleRemoteDetail,{name:r.name}))})).catch((function(e){var r=e.response.data;return i({errorMessages:b({__nofield:r.non_field_errors||r.detail},r)})}))},errorMessages:_,closeModal:function(){i({errorMessages:{},remoteToEdit:void 0}),n(e?(0,c.dI)(c.nB.ansibleRemoteDetail,{name:e.name}):(0,c.dI)(c.nB.ansibleRemotes))}}):null}})},6640:(e,r,n)=>{n.d(r,{DQ:()=>s,MT:()=>l,Wt:()=>p,X0:()=>b,Xn:()=>m,fY:()=>_,lo:()=>d,nm:()=>i,rH:()=>a,vn:()=>f,yA:()=>u,zN:()=>c});var t=function(e){return function(r){var n=r.hasPermission,t=r.user;return n(e)||(null==t?void 0:t.is_superuser)}},o=function(e){return function(r,n){var t=r.hasPermission,o=r.hasObjectPermission,a=r.user;return t(e)||(null==o?void 0:o(e,n))||(null==a?void 0:a.is_superuser)}},a=t("ansible.add_collectionremote"),i=o("ansible.delete_collectionremote"),s=o("ansible.change_collectionremote"),l=o("ansible.view_collectionremote"),u=o("ansible.manage_roles_collectionremote"),c=t("ansible.add_ansiblerepository"),m=o("ansible.delete_ansiblerepository"),d=o("ansible.change_ansiblerepository"),f=d,_=function(e){var r=e.user,n=e.featureFlags;return r&&(null==n?void 0:n.display_repositories)},b=o("ansible.manage_roles_ansiblerepository"),p=d}}]);
//# sourceMappingURL=../sourcemaps/6401.44aa66aa7e1578a6c45e14dcc0cd43a3.js.map