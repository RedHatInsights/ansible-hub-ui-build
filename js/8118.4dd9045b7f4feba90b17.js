"use strict";(self.webpackChunkansible_hub_ui=self.webpackChunkansible_hub_ui||[]).push([[8118],{75907:(e,t,n)=>{n.d(t,{Bu:()=>d,bU:()=>f,PU:()=>v,MC:()=>y,Rq:()=>b,JJ:()=>g,sO:()=>_,DO:()=>h,e5:()=>E,cv:()=>O,hE:()=>S,W:()=>P});var r=n(35356),a=n(92950),o=n.n(a),l=n(41315),i=function(e){var t=e.buttonVariant,n=e.condition,a=void 0===n?function(){return!0}:n,i=e.disabled,s=void 0===i?function(){return null}:i,u=e.modal,c=void 0===u?null:u,d=e.onClick,m=e.title,p=e.visible,f=void 0===p?function(){return!0}:p;return{title:m,button:function(e,n){return a(n,e)&&f(e,n)?s(e,n)?o().createElement(l.u,{content:s(e,n),key:m},o().createElement(r.Button,{variant:t,isDisabled:!0},m)):o().createElement(r.Button,{variant:t,key:m,onClick:function(){return d(e,n)}},m):null},dropdownItem:function(e,t){return a(t,e)&&f(e,t)?s(e,t)?o().createElement(r.DropdownItem,{key:m,description:s(e,t),isDisabled:!0},m):o().createElement(r.DropdownItem,{key:m,onClick:function(){return d(e,t)}},m):null},modal:c,visible:f,disabled:s}},s=n(13855),u=n(61647),c=n(6640),d=i({condition:c.rH,title:s.ag._("Add remote"),onClick:function(e,t){return(0,t.navigate)((0,u.dI)(u.nB.ansibleRemoteEdit,{name:"_"}))}}),m=n(45586),p=n(92518),f=i({condition:c.nm,title:s.ag._("Delete"),modal:function(e){var t=e.addAlert,n=e.query,r=e.setState,a=e.state;return a.deleteModalOpen?o().createElement(l.X3,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){var n=e.name,r=e.pulpId,a=t.addAlert,o=t.setState,l=t.query;return m.GC.delete(r).then((function(e){var t=e.data;a((0,p.zT)(t.task,s.ag._("Removal started for remote {name}",{name:n}))),o({deleteModalOpen:null}),l()})).catch((0,p.rJ)(s.ag._("Failed to remove remote {name}",{name:n}),(function(){return null}),a))}(a.deleteModalOpen,{addAlert:t,setState:r,query:n})},name:a.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,a=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.LL)(a),name:n}})}}),v=i({title:s.ag._("Download CA certificate"),onClick:function(e){var t=e.ca_cert;return(0,p.Qz)(t,"ca_cert")},visible:function(e){return!!e.ca_cert}}),y=i({title:s.ag._("Download client certificate"),onClick:function(e){var t=e.client_cert;return(0,p.Qz)(t,"client_cert")},visible:function(e){return!!e.client_cert}}),b=i({title:s.ag._("Download requirements YAML"),onClick:function(e){var t=e.requirements_file;return(0,p.Qz)(t,"requirements.yml")},visible:function(e){return!!e.requirements_file}}),g=i({condition:c.DQ,title:s.ag._("Edit"),onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,u.dI)(u.nB.ansibleRemoteEdit,{name:n}))}}),_=i({title:s.ag._("Copy CLI configuration"),onClick:function(e,t){var n=t.addAlert,r=["[galaxy]","server_list = ".concat(e.name,"_repo"),"","[galaxy_server.".concat(e.name,"_repo]"),"url=".concat((0,p.qX)()),"token=<put your token here>"].join("\n");navigator.clipboard.writeText(r),n({title:s.ag._("Successfully copied to clipboard"),variant:"success",description:o().createElement("pre",null,r)})}}),h=i({condition:c.zN,title:s.ag._("Add repository"),onClick:function(e,t){return(0,t.navigate)((0,u.dI)(u.nB.ansibleRepositoryEdit,{name:"_"}))}}),E=i({condition:c.Xn,title:s.ag._("Delete"),modal:function(e){var t=e.addAlert,n=e.query,r=e.setState,a=e.state;return a.deleteModalOpen?o().createElement(l.Iq,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){var n=e.name,r=e.pulpId,a=t.addAlert,o=t.setState,l=t.query;return m.UX.delete(r).then((function(e){var t=e.data;a((0,p.zT)(t.task,s.ag._("Removal started for repository {name}",{name:n}))),o({deleteModalOpen:null}),l()})).catch((0,p.rJ)(s.ag._("Failed to remove repository {name}",{name:n}),(function(){return null}),a))}(a.deleteModalOpen,{addAlert:t,setState:r,query:n})},name:a.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,a=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.LL)(a),name:n}})}}),O=i({condition:c.lo,title:s.ag._("Edit"),onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,u.dI)(u.nB.ansibleRepositoryEdit,{name:n}))}}),S=i({condition:c.vn,title:s.ag._("Sync"),onClick:function(e,t){var n=e.name,r=e.pulp_href,a=t.addAlert,o=t.query,l=(0,p.LL)(r);m.UX.sync(l).then((function(e){var t=e.data;a((0,p.zT)(t.task,s.ag._('Sync started for repository "{name}".',{name:n}))),o()})).catch((0,p.rJ)(s.ag._('Failed to sync repository "{name}"',{name:n}),(function(){return null}),a))},visible:function(e,t){return(0,t.hasPermission)("ansible.change_collectionremote")},disabled:function(e){var t=e.remote,n=e.last_sync_task;return t?n&&["running","waiting"].includes(n.state)?s.ag._("Sync task is already queued."):null:s.ag._("There are no remotes associated with this repository.")}}),w=n(70885),k=n(14744),C=function(e){var t=e.version,n=e.cancelAction,l=e.revertAction,i=(0,a.useState)(!1),u=(0,w.Z)(i,2),c=u[0],d=u[1];return o().createElement(r.Modal,{actions:[o().createElement("div",{"data-cy":"delete-button",key:"delete"},o().createElement(r.Button,{key:"delete",onClick:function(){d(!0),l()},variant:"danger",isDisabled:c},s.ag._("Revert"),c&&o().createElement(r.Spinner,{size:"sm"}))),o().createElement(r.Button,{key:"cancel",onClick:n,variant:"link"},s.ag._("Cancel"))],isOpen:!0,onClose:n,title:s.ag._("Revert repository"),titleIconVariant:"warning",variant:"small","data-cy":"modal_checkbox"},o().createElement(k.cC,{id:"Are you sure you want to revert this repository to the version below?"}),o().createElement("br",null),o().createElement("b",null,t))},P=i({condition:c.Wt,title:s.ag._("Revert to this version"),modal:function(e){var t=e.addAlert,n=e.state,r=e.setState,a=e.query;return n.revertModal?o().createElement(C,{cancelAction:function(){return r({revertModal:null})},revertAction:function(){return function(e,t){var n=e.repositoryName,r=e.pulp_href,a=e.number,o=t.addAlert,l=t.setState,i=t.query,u=(0,p.LL)(r);return m.UX.revert(u,r).then((function(e){var t=e.data;o((0,p.zT)(t.task,s.ag._('Revert started for repository "{repositoryName}".',{repositoryName:n}))),l({revertModal:null}),i()})).catch((0,p.rJ)(s.ag._('Failed to revert repository "{repositoryName}" to version "{number}"',{repositoryName:n,number:a}),(function(){return l({revertModal:null})}),o))}(n.revertModal,{addAlert:t,setState:r,query:a})},version:n.revertModal.number}):null},onClick:function(e,t){var n=e.repositoryName,r=e.number,a=e.pulp_href;return(0,t.setState)({revertModal:{repositoryName:n,number:r,pulp_href:a}})},disabled:function(e){return e.isLatest?s.ag._("Already the current version"):null}})},48118:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var r=n(4942),a=n(14744),o=n(13855),l=n(92950),i=n.n(l),s=n(75907),u=n(45586),c=n(41315),d=n(61647),m=n(6640),p=n(92518),f=n(70885);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.item,n=e.actionContext,r=n.addAlert,a=n.state.params,s=n.hasPermission,y=n.user,b=(null==t?void 0:t.pulp_href)&&(0,p.LL)(t.pulp_href),g=(0,l.useState)(null==t?void 0:t.name),_=(0,f.Z)(g,2),h=_[0],E=_[1],O=(0,l.useState)(null),S=(0,f.Z)(O,2),w=S[0],k=S[1],C=(0,l.useState)(!1),P=(0,f.Z)(C,2),R=P[0],j=P[1],D=(0,l.useState)(null),A=(0,f.Z)(D,2),I=A[0],M=A[1],L=(0,l.useState)(null),q=(0,f.Z)(L,2),Z=q[0],N=q[1],T=(0,l.useState)(null),U=(0,f.Z)(T,2),B=U[0],x=U[1],z=(0,l.useState)(null),G=(0,f.Z)(z,2),X=G[0],V=G[1],F=(0,l.useState)(null),W=(0,f.Z)(F,2),H=W[0],J=W[1],Q=function(){k(null),u.UX.myPermissions(b).then((function(e){var t=e.data.permissions;j((0,m.X0)({hasPermission:s,hasObjectPermission:function(e){return t.includes(e)},user:y})),u.UX.listRoles(b).then((function(e){var t,n=e.data.roles,r=[],a=v(n);try{for(a.s();!(t=a.n()).done;){var o,l=t.value,i=l.groups,s=l.role,u=v(i);try{var c=function(){var e=o.value,t=r.findIndex((function(t){return t.name===e}));-1==t?r.push({name:e,object_roles:[s]}):r[t].object_roles.push(s)};for(u.s();!(o=u.n()).done;)c()}catch(e){u.e(e)}finally{u.f()}}}catch(e){a.e(e)}finally{a.f()}E(h),k(r)})).catch((function(){k([])}))})).catch((function(){k([]),j(!1)}))},Y=function(e){var t=e.roles,n=e.alertSuccess,a=e.alertFailure,o=e.stateUpdate;Promise.all(t).then((function(){r({title:n,variant:"success"}),Q()})).catch((function(e){var t=e.response,n=t.status,o=t.statusText;r({title:a,variant:"danger",description:(0,p.N3)(n,o)})})).finally((function(){$(o)}))},$=function(e){Object.entries(e).forEach((function(e){var t=(0,f.Z)(e,2),n=t[0],r=t[1];switch(n){case"showGroupRemoveModal":N(r);break;case"showGroupSelectWizard":x(r);break;case"showRoleRemoveModal":V(r);break;case"showRoleSelectWizard":J(r);break;default:console.error("updateProps",n,r)}}))};return(0,l.useEffect)(Q,[t.pulp_href]),(0,l.useEffect)((function(){w&&(null!=a&&a.group?u.lO.list({name:a.group}).then((function(e){var t=e.data.data;M(w.find((function(e){return e.name===t[0].name})))})):M(null))}),[null==a?void 0:a.group,w]),i().createElement(c.yW,{addGroup:function(e,t){var n=t.map((function(t){return u.UX.addRole(b,{role:t.name,groups:[e.name]})}));Y({roles:n,alertSuccess:o.ag._('Group "{0}" has been successfully added to "{name}".',{0:e.name,name:h}),alertFailure:o.ag._('Group "{0}" could not be added to "{name}".',{0:e.name,name:h}),stateUpdate:{showGroupSelectWizard:null}})},addRole:function(e,t){var n=t.map((function(t){return u.UX.addRole(b,{role:t.name,groups:[e.name]})}));Y({roles:n,alertSuccess:o.ag._('Group "{0}" roles successfully updated in "{name}".',{0:e.name,name:h}),alertFailure:o.ag._('Group "{0}" roles could not be update in "{name}".',{0:e.name,name:h}),stateUpdate:{showRoleSelectWizard:null}})},canEditOwners:R,group:I,groups:w,name:h,pulpObjectType:"repositories/ansible/ansible",removeGroup:function(e){var t=e.object_roles.map((function(t){return u.UX.removeRole(b,{role:t,groups:[e.name]})}));Y({roles:t,alertSuccess:o.ag._('Group "{0}" has been successfully removed from "{name}".',{0:e.name,name:h}),alertFailure:o.ag._('Group "{0}" could not be removed from "{name}".',{0:e.name,name:h}),stateUpdate:{showGroupRemoveModal:null}})},removeRole:function(e,t){var n=u.UX.removeRole(b,{role:e,groups:[t.name]});Y({roles:[n],alertSuccess:o.ag._('Group "{0}" roles successfully updated in "{name}".',{0:t.name,name:h}),alertFailure:o.ag._('Group "{0}" roles could not be update in "{name}".',{0:t.name,name:h}),stateUpdate:{showRoleRemoveModal:null}})},selectRolesMessage:o.ag._("The selected roles will be added to this specific Ansible repository."),showGroupRemoveModal:Z,showGroupSelectWizard:B,showRoleRemoveModal:X,showRoleSelectWizard:H,updateProps:$,urlPrefix:(0,d.dI)(d.nB.ansibleRepositoryDetail,{name:h})})},g=n(62012);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t=e.item,n=e.actionContext,r=n.addAlert,a=n.hasPermission,s=function(e){var n=h({},e.params);n.ordering=n.sort,delete n.sort;var r=(0,p.LL)(t.pulp_href);return u.eq.list(h({repository:r},n)).then((function(e){var t=e.data;return{data:{count:t.meta.count,results:t.data}}}))},m=(0,l.useState)({}),v=(0,f.Z)(m,2),y=v[0],b=v[1];return i().createElement(c.qU,{actionContext:{addAlert:r,state:y,setState:b,query:s,hasPermission:a},defaultPageSize:10,defaultSort:"name",errorTitle:o.ag._("Collection versions could not be displayed."),filterConfig:null,listItemActions:[],noDataButton:null,noDataDescription:o.ag._("Collection versions will appear once the collection is modified."),noDataTitle:o.ag._("No collection versions yet"),query:s,renderTableRow:function(e,t,n,r){var a=e.collection_version,o=a.name,l=a.namespace,s=a.version,u=a.description,m=r.map((function(t){return t.dropdownItem(e,n)}));return i().createElement("tr",{key:t},i().createElement("td",null,i().createElement(g.Link,{to:(0,d.dI)(d.nB.collection,{namespace:l,collection:o},{version:s})},l,".",o," v",s)),i().createElement("td",null,u),i().createElement(c.cT,{kebabItems:m}))},sortHeaders:[{title:o.ag._("Collection"),type:"none",id:"col1"},{title:o.ag._("Description"),type:"none",id:"col2"}],title:o.ag._("Collection versions")})},O=function(e){var t,n=e.item,r=(0,l.useState)(null),a=(0,f.Z)(r,2),s=a[0],m=a[1];return(0,l.useEffect)((function(){var e=n.remote&&(0,p.LL)(n.remote);e?u.GC.get(e).then((function(e){var t=e.data;return m(t)})):m(null)}),[n.remote]),i().createElement(c.PO,{fields:[{label:o.ag._("Repository name"),value:null==n?void 0:n.name},{label:o.ag._("Description"),value:(null==n?void 0:n.description)||o.ag._("None")},{label:o.ag._("Retained version count"),value:null!==(t=null==n?void 0:n.retain_repo_versions)&&void 0!==t?t:o.ag._("All")},{label:o.ag._("Distribution"),value:i().createElement(c.fM,{repositoryHref:n.pulp_href})},{label:o.ag._("Labels"),value:i().createElement(c.rT,{labels:null==n?void 0:n.pulp_labels})},{label:o.ag._("Private"),value:null!=n&&n.private?o.ag._("Yes"):o.ag._("No")},{label:o.ag._("Remote"),value:s?i().createElement(g.Link,{to:(0,d.dI)(d.nB.ansibleRemoteDetail,{name:s.name})},s.name):o.ag._("None")}]})},S=n(43144),w=n(15671),k=n(97326),C=n(79340),P=n(82963),R=n(61120),j=n(35356);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.href,n=e.addAlert,a=e.hasPermission,s=(0,l.useState)({}),m=(0,f.Z)(s,2),p=m[0],v=m[1];if(!t)return null;var y=function(e){return new(function(t){(0,C.Z)(l,t);var n,a,o=(n=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(n);if(a){var r=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,P.Z)(this,e)});function l(){var t;(0,w.Z)(this,l);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=o.call.apply(o,[this].concat(a)),(0,r.Z)((0,k.Z)(t),"useOrdering",!0),(0,r.Z)((0,k.Z)(t),"apiPath",e.replace("/api/automation-hub/pulp/api/v3/","")),t}return(0,S.Z)(l)}(u.jx))}(t),b=function(e){var t=e.params;return y.list(t)};return i().createElement(c.qU,{actionContext:{addAlert:n,state:p,setState:v,query:b,hasPermission:a},defaultPageSize:10,defaultSort:"name",errorTitle:o.ag._("Collection versions could not be displayed."),noDataDescription:o.ag._("No collection versions in this repository version."),noDataTitle:o.ag._("No collection versions yet"),query:b,renderTableRow:function(e){var t=e.manifest.collection_info,n=t.namespace,r=t.name,a=t.version,o=e.description;return i().createElement("tr",null,i().createElement("td",null,i().createElement(g.Link,{to:(0,d.dI)(d.nB.collection,{namespace:n,collection:r},{version:a})},n,".",r," v",a)),i().createElement("td",null,o))},sortHeaders:[{title:o.ag._("Collection"),type:"none",id:"col1"},{title:o.ag._("Description"),type:"none",id:"col2"}],title:o.ag._("Collection versions")})},M=function(e){var t=e.data;return Object.keys(t).length?i().createElement("table",{className:"pf-c-table"},i().createElement("tr",null,i().createElement("th",null,o.ag._("Count")),i().createElement("th",null,o.ag._("Pulp type"))),Object.entries(t).map((function(e){var t=(0,f.Z)(e,2),n=t[0],r=t[1];return i().createElement("tr",{key:n},i().createElement("td",null,r.count),i().createElement("th",null,n))}))):i().createElement(i().Fragment,null,o.ag._("None"))},L=function(e){var t=e.repositoryName,n=e.data;if(!n)return i().createElement(i().Fragment,null,o.ag._("None"));var r=n.split("/").at(-2);return i().createElement(g.Link,{to:(0,d.dI)(d.nB.ansibleRepositoryDetail,{name:t},{repositoryVersion:r,tab:"repository-versions"})},r)},q=function(e){var t,n,r,a=e.item,m=e.actionContext,v=m.addAlert,y=m.state,b=m.hasPermission,_=m.hasObjectPermission,h=(0,p.LL)(a.pulp_href),E=a.latest_version_href,O=a.name,S=function(e){var t=e.params;return u.UX.listVersions(h,t)},w=(0,l.useState)({}),k=(0,f.Z)(w,2),C=k[0],P=k[1],R=(0,l.useState)(null),D=(0,f.Z)(R,2),q=D[0],Z=D[1];return(0,l.useEffect)((function(){var e,t;y.params.repositoryVersion?(e={number:y.params.repositoryVersion},t=e.number,u.UX.listVersions(h,{number:t})).then((function(e){var t,n=e.data;null!=n&&null!==(t=n.results)&&void 0!==t&&t[0]||v({variant:"danger",title:o.ag._("Failed to find repository version")}),Z(n.results[0])})):Z(null)}),[y.params.repositoryVersion]),y.params.repositoryVersion?q?i().createElement(i().Fragment,null,i().createElement(c.PO,{fields:[{label:o.ag._("Version number"),value:q.number},{label:o.ag._("Created date"),value:i().createElement(c.Id,{date:q.pulp_created})},{label:o.ag._("Content added"),value:i().createElement(M,{data:null===(t=q.content_summary)||void 0===t?void 0:t.added})},{label:o.ag._("Content removed"),value:i().createElement(M,{data:null===(n=q.content_summary)||void 0===n?void 0:n.removed})},{label:o.ag._("Current content"),value:i().createElement(M,{data:null===(r=q.content_summary)||void 0===r?void 0:r.present})},{label:o.ag._("Base version"),value:i().createElement(L,{repositoryName:O,data:q.base_version})}]}),i().createElement("div",{className:"pf-c-page__main-section",style:{padding:"8px 0",margin:"24px -16px 0"}}),i().createElement(I,q.content_summary.present["ansible.collection_version"])):i().createElement(j.Spinner,{size:"md"}):i().createElement(c.qU,{actionContext:{addAlert:v,state:C,setState:P,query:S,hasPermission:b,hasObjectPermission:_},defaultPageSize:10,defaultSort:"-pulp_created",errorTitle:o.ag._("Repository versions could not be displayed."),filterConfig:null,listItemActions:[s.W],noDataButton:null,noDataDescription:o.ag._("Repository versions will appear once the repository is modified."),noDataTitle:o.ag._("No repository versions yet"),query:S,renderTableRow:function(e,t,n,r){var a=e.number,l=e.pulp_created,s=e.pulp_href,u=E===s,m=r.map((function(t){return t.dropdownItem(A(A({},e),{},{isLatest:u,repositoryName:O}),n)}));return i().createElement("tr",{key:t},i().createElement("td",null,i().createElement(g.Link,{to:(0,d.dI)(d.nB.ansibleRepositoryDetail,{name:O},{repositoryVersion:a,tab:"repository-versions"})},a),u?" "+o.ag._("(latest)"):null),i().createElement("td",null,i().createElement(c.Id,{date:l})),i().createElement(c.cT,{kebabItems:m}))},sortHeaders:[{title:o.ag._("Version number"),type:"numeric",id:"number"},{title:o.ag._("Created date"),type:"numeric",id:"pulp_created"}],title:o.ag._("Repository versions")})};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=[{id:"details",name:o.ag._("Details")},{id:"access",name:o.ag._("Access")},{id:"collection-versions",name:o.ag._("Collection versions")},{id:"repository-versions",name:o.ag._("Versions")}];const U=(0,c.L9)({breadcrumbs:function(e){var t=e.name,n=e.tab,r=e.params,a=r.repositoryVersion,l=r.group;return[{url:(0,d.dI)(d.nB.ansibleRepositories),name:o.ag._("Repositories")},{url:(0,d.dI)(d.nB.ansibleRepositoryDetail,{name:t}),name:t},"repository-versions"===n.id&&a||"access"===n.id&&l?{url:(0,d.dI)(d.nB.ansibleRepositoryDetail,{name:t},{tab:n.id}),name:n.name}:null,"repository-versions"===n.id&&a?{name:o.ag._("Version {repositoryVersion}",{repositoryVersion:a})}:"access"===n.id&&l?{name:o.ag._("Group {group}",{group:l})}:{name:n.name}].filter(Boolean)},condition:m.fY,displayName:"AnsibleRepositoryDetail",errorTitle:o.ag._("Repository could not be displayed."),headerActions:[s.cv,s.hE,s.sO,s.e5],headerDetails:function(e){return i().createElement(i().Fragment,null,(null==e?void 0:e.last_sync_task)&&i().createElement("p",{className:"hub-m-truncated"},i().createElement(a.cC,{id:"Last updated from registry {0}",values:{0:(0,p.Fr)(e)}})," ",(0,p.Eb)(e)))},query:function(e){var t=e.name;return u.UX.list({name:t}).then((function(e){return e.data.results[0]})).then((function(e){return u.UX.myPermissions((0,p.LL)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(t){return N(N({},e),{},{my_permissions:t})}))}))},renderTab:function(e,t,n){return{details:i().createElement(O,{item:t,actionContext:n}),access:i().createElement(b,{item:t,actionContext:n}),"collection-versions":i().createElement(E,{item:t,actionContext:n}),"repository-versions":i().createElement(q,{item:t,actionContext:n})}[e]},tabs:T,tabUpdateParams:function(e){return delete e.repositoryVersion,delete e.group,e}})},6640:(e,t,n)=>{n.d(t,{DQ:()=>i,MT:()=>s,Wt:()=>y,X0:()=>v,Xn:()=>d,fY:()=>f,lo:()=>m,nm:()=>l,rH:()=>o,vn:()=>p,yA:()=>u,zN:()=>c});var r=function(e){return function(t){var n=t.hasPermission,r=t.user;return n(e)||(null==r?void 0:r.is_superuser)}},a=function(e){return function(t,n){var r=t.hasPermission,a=t.hasObjectPermission,o=t.user;return r(e)||(null==a?void 0:a(e,n))||(null==o?void 0:o.is_superuser)}},o=r("ansible.add_collectionremote"),l=a("ansible.delete_collectionremote"),i=a("ansible.change_collectionremote"),s=a("ansible.view_collectionremote"),u=a("ansible.manage_roles_collectionremote"),c=r("ansible.add_ansiblerepository"),d=a("ansible.delete_ansiblerepository"),m=a("ansible.change_ansiblerepository"),p=m,f=function(e){var t=e.user;return t&&!t.is_anonymous},v=a("ansible.manage_roles_ansiblerepository"),y=m}}]);
//# sourceMappingURL=../sourcemaps/8118.fb1557950226a5b49741ebcb3bcb07c8.js.map