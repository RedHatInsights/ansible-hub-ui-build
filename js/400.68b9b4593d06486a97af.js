"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[400],{6662:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(80296),o=n(64467),c=n(88696),r=n(60165),s=n(39799);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={repository:null,namespace:null,name:null,version:null,actuallyCollection:null,collection:null,collections:[],collectionsCount:0,content:null};function p(e){var t=e.forceReload,n=e.matchParams,o=e.navigate,i=e.setCollection,p=e.stateParams.version,d=n.collection,m=n.namespace,v=n.repo;if(t||u.repository!==v||u.namespace!==m||u.name!==d||u.version!==p){var f=l(l({},v?{repository_name:v}:{}),{},{namespace:m,name:d}),y=(p?c.R4.list(l(l({},f),{},{version:p})):c.R4.list(l(l({},f),{},{is_highest:!0}))).then((function(e){return e.data.data[0]})),h=y.then((function(e){return c.Xy.getContent(m,d,e.collection_version.version)})).then((function(e){return e.data.results[0]})).catch((function(){return o((0,r.jV)(r.Jh.notFound))})),g=c.R4.list(l(l({},f),{},{order_by:"-version",page_size:10})).then((function(e){return e.data})).catch((function(){return{data:[],meta:{count:0}}})),D=(0,s.Jh)(v).then((function(e){return c.Xy.getDetail(e,m,d)})).then((function(e){return e.data}));return Promise.all([g,y,h,D]).then((function(e){var t=(0,a.A)(e,4),n=t[0],o=n.data,c=n.meta.count,r=t[1],s=t[2],l=t[3];i(o,r,s,c,l),u.repository=v,u.namespace=m,u.name=d,u.version=p,u.actuallyCollection=l,u.collection=r,u.collections=o,u.collectionsCount=c,u.content=s}))}i(u.collections,u.collection,u.content,u.collectionsCount,u.actuallyCollection)}},18019:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var a=n(45458),o=n(80296),c=n(23029),r=n(92901),s=n(56822),i=n(53954),l=n(9417),u=n(15361),p=n(64467),d=n(47712),m=n(44914),v=n.n(m),f=n(88696),y=n(35894),h=n(97899),g=n(60165),D=n(39799),b=n(6662);function C(e,t,n){return t=(0,i.A)(t),(0,s.A)(e,R()?Reflect.construct(t,n||[],(0,i.A)(e).constructor):t.apply(e,n))}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}var _=function(e){function t(e){var n;(0,c.A)(this,t),n=C(this,t,[e]),(0,p.A)((0,l.A)(n),"ignoredParams",["page_size","page","sort","name__icontains"]);var a=D.mb.parseParamString(e.location.search,["page","page_size"]);return a.sort=a.sort?"collection":"-collection",n.state={actuallyCollection:null,alerts:[],collection:null,collections:[],collectionsCount:0,content:null,dependencies_repos:[],params:a,usedByDependencies:[],usedByDependenciesCount:0,usedByDependenciesLoading:!0},n}return(0,u.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.loadData(!1)}},{key:"render",value:function(){var e=this,t=this.state,n=t.actuallyCollection,a=t.alerts,o=t.collection,c=t.collections,r=t.collectionsCount,s=t.content,i=t.params,l=t.usedByDependencies,u=t.usedByDependenciesCount,p=t.usedByDependenciesLoading;if(c.length<=0)return v().createElement(y.AV,null);var m=o.collection_version,f=o.repository,h=[(0,g.nb)(),{url:(0,g.jV)(g.Jh.namespaceDetail,{namespace:m.namespace}),name:m.namespace},{url:(0,g.jV)(g.Jh.collectionByRepo,{namespace:m.namespace,collection:m.name,repo:f.name}),name:m.name},{name:d.Ru._({id:"xHe/7h"})}],b=D.mb.getReduced(i,this.ignoredParams),C=D.mb.getReduced(i,["version"]),R=!Object.keys(m.dependencies).length;return v().createElement(v().Fragment,null,v().createElement(y.NS,{alerts:a,closeAlert:function(t){return(0,y.R$)(t,{alerts:a,setAlerts:function(t){return e.setState({alerts:t})}})}}),v().createElement(y.SG,{activeTab:"dependencies",actuallyCollection:n,breadcrumbs:h,collection:o,collections:c,collectionsCount:r,content:s,params:b,reload:function(){return e.loadData(!0)},repo:f.name,updateParams:function(t){e.updateParams(t,(function(){return e.loadData(!0)}))}}),v().createElement(y.gZ,null,v().createElement("section",{className:"body"},v().createElement("div",{className:"pf-v5-c-content collection-dependencies"},v().createElement("h1",null,d.Ru._({id:"xHe/7h"})),v().createElement("p",null,d.Ru._({id:"ie4x3e"})),R?v().createElement(y.a4,{title:d.Ru._({id:"416elZ"}),description:d.Ru._({id:"vRf+F6"})}):v().createElement(y.mW,{collection:this.state.collection,dependencies_repos:this.state.dependencies_repos}),v().createElement("p",null,d.Ru._({id:"BRmiuR"}))),v().createElement(y.Q7,{usedByDependencies:l,itemCount:u,params:C,usedByDependenciesLoading:p,updateParams:function(t){return e.updateParams(t,(function(){return e.loadUsedByDependencies()}))}}))))}},{key:"loadData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loadCollection(t,(function(){return e.loadCollectionsDependenciesRepos((function(){return e.loadUsedByDependencies()}))}))}},{key:"loadCollectionsDependenciesRepos",value:function(e){var t=this,n=this.state.collection.collection_version.dependencies,a=[],c=[];Object.keys(n).forEach((function(e){var r=e.split("."),s=(0,o.A)(r,2),i=s[0],l={name:s[1],namespace:i,version_range:n[e],repo:"",path:""};a.push(l);var u=t.loadDependencyRepo(l);c.push(u)})),Promise.all(c).then((function(){t.setState({dependencies_repos:a},e())}))}},{key:"loadDependencyRepo",value:function(e){return f.R4.list({namespace:e.namespace,name:e.name,version_range:e.version_range,page_size:1}).then((function(t){var n=(0,o.A)(t.data.data,1)[0];e.repo=n.repository.name,e.path=(0,g.jV)(g.Jh.collectionByRepo,{collection:e.name,namespace:e.namespace,repo:e.repo})})).catch((function(){}))}},{key:"loadUsedByDependencies",value:function(){var e=this;this.setState({usedByDependenciesLoading:!0},(function(){var t=e.state.collection.collection_version,n=t.name,o=t.namespace;f.Xy.getUsedDependenciesByCollection(o,n,D.mb.getReduced(e.state.params,["version"])).then((function(t){var n=t.data;e.setState({usedByDependencies:n.data,usedByDependenciesCount:n.meta.count,usedByDependenciesLoading:!1})})).catch((function(t){var n=t.response,o=n.status,c=n.statusText;e.setState({usedByDependenciesLoading:!1,alerts:[].concat((0,a.A)(e.state.alerts),[{variant:"danger",title:d.Ru._({id:"7YVePD"}),description:(0,D.gJ)(o,c)}])})}))}))}},{key:"loadCollection",value:function(e,t){var n=this;(0,b.Z)({forceReload:e,matchParams:this.props.routeParams,navigate:this.props.navigate,setCollection:function(e,a,o,c,r){return n.setState({collections:e,collection:a,content:o,collectionsCount:c,actuallyCollection:r},t)},stateParams:this.state.params.version?{version:this.state.params.version}:{}})}},{key:"updateParams",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;D.mb.updateParams({params:e,navigate:function(e){return t.props.navigate(e)},setState:function(e){return t.setState(e,n)}})}},{key:"separateVersion",value:function(e){var t=e.match(/((\d+\.*)+)/);return t?{version:t[0]}:{}}}]),t}(m.Component);(0,p.A)(_,"contextType",h.B);const P=(0,D.y)(_)}}]);
//# sourceMappingURL=../sourcemaps/400.69df05d3c6ad06db518abb5a296cc928.js.map