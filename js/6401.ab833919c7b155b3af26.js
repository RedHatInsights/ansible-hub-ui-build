"use strict";(self.webpackChunkansible_hub_ui=self.webpackChunkansible_hub_ui||[]).push([[6401],{46401:(e,n,r)=>{r.r(n),r.d(n,{default:()=>y});var t=r(44925),o=r(4942),a=r(13855),i=r(92950),s=r.n(i),l=r(45586),u=r(41315),c=r(61647),m=r(6640),d=r(92518),f=["name"];function _(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function b(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var p={name:"",url:"",ca_cert:null,client_cert:null,tls_validation:!0,proxy_url:null,download_concurrency:null,rate_limit:null,requirements_file:null,auth_url:null,signed_only:!1,hidden_fields:["client_key","proxy_username","proxy_password","username","password","token"].map((function(e){return{name:e,is_set:!1}}))};const y=(0,u.T3)({breadcrumbs:function(e){var n=e.name;return[{url:(0,c.dI)(c.nB.ansibleRemotes),name:a.ag._("Remotes")},n&&{url:(0,c.dI)(c.nB.ansibleRemoteDetail,{name:n}),name:n},n?{name:a.ag._("Edit")}:{name:a.ag._("Add")}].filter(Boolean)},condition:function(e,n){return(0,m.rH)(e)||(0,m.DQ)(e,n)},displayName:"AnsibleRemoteEdit",errorTitle:a.ag._("Remote could not be displayed."),query:function(e){var n=e.name;return l.GC.list({name:n}).then((function(e){return e.data.results[0]})).then((function(e){return l.GC.myPermissions((0,d.LL)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(n){return b(b({},e),{},{my_permissions:n})}))}))},title:function(e){return e.name||a.ag._("Add new remote")},transformParams:function(e){var n=e.name;return b(b({},(0,t.Z)(e,f)),{},{name:"_"!==n?n:null})},render:function(e,n){var r=n.navigate,t=n.queueAlert,o=n.state,i=n.setState;if(!o.remoteToEdit){var m=b(b({},p),e);i({remoteToEdit:m,errorMessages:{}})}var f=o.remoteToEdit,_=o.errorMessages;return f?s().createElement(u.bi,{allowEditName:!e,remote:f,updateRemote:function(e){return i({remoteToEdit:e})},remoteType:"ansible-remote",showMain:!0,saveRemote:function(){var n=b({},o.remoteToEdit);e||(Object.keys(n).forEach((function(e){""!==n[e]&&null!=n[e]||delete n[e]})),delete n.hidden_fields),delete n.my_permissions,!n.url||n.url.includes("?")||n.url.endsWith("/")||(n.url+="/"),(e?l.GC.smartUpdate((0,d.LL)(e.pulp_href),n,e):l.GC.create(n)).then((function(o){var s=o.data;i({errorMessages:{},remoteToEdit:void 0}),t(e?(0,d.zT)(s,a.ag._("Update started for remote {0}",{0:n.name})):{variant:"success",title:a.ag._("Successfully created remote {0}",{0:n.name})}),r((0,c.dI)(c.nB.ansibleRemoteDetail,{name:n.name}))})).catch((function(e){var n=e.response.data;return i({errorMessages:b({__nofield:n.non_field_errors||n.detail},n)})}))},errorMessages:_,closeModal:function(){i({errorMessages:{},remoteToEdit:void 0}),r(e?(0,c.dI)(c.nB.ansibleRemoteDetail,{name:e.name}):(0,c.dI)(c.nB.ansibleRemotes))}}):null}})},6640:(e,n,r)=>{r.d(n,{DQ:()=>s,MT:()=>l,Wt:()=>p,X0:()=>b,Xn:()=>m,fY:()=>_,lo:()=>d,nm:()=>i,rH:()=>a,vn:()=>f,yA:()=>u,zN:()=>c});var t=function(e){return function(n){var r=n.hasPermission,t=n.user;return r(e)||(null==t?void 0:t.is_superuser)}},o=function(e){return function(n,r){var t=n.hasPermission,o=n.hasObjectPermission,a=n.user;return t(e)||(null==o?void 0:o(e,r))||(null==a?void 0:a.is_superuser)}},a=t("ansible.add_collectionremote"),i=o("ansible.delete_collectionremote"),s=o("ansible.change_collectionremote"),l=o("ansible.view_collectionremote"),u=o("ansible.manage_roles_collectionremote"),c=t("ansible.add_ansiblerepository"),m=o("ansible.delete_ansiblerepository"),d=o("ansible.change_ansiblerepository"),f=d,_=function(e){var n=e.user;return n&&!n.is_anonymous},b=o("ansible.manage_roles_ansiblerepository"),p=d}}]);
//# sourceMappingURL=../sourcemaps/6401.2cf7efb1858993c2b8bda08d33fadf01.js.map