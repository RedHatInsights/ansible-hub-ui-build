"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[8127],{58127:(e,a,t)=>{t.r(a),t.d(a,{default:()=>w});var n=t(64467),l=t(47712),r=t(32995),u=t.n(r),o=t(35489),s=t(88756),i=t(62017),c=t(60165),d=t(5093),m=t(18712),v=t(80296),p=function(e){var a=e.item,t=e.actionContext,n=t.addAlert,o=t.featureFlags,p=t.hasPermission,f=t.state.params,R=t.user,b=(null==a?void 0:a.pulp_href)&&(0,m.dx)(a.pulp_href),h=(0,r.useState)(null==a?void 0:a.name),_=(0,v.A)(h,2),S=_[0],w=_[1],g=(0,r.useState)(null),E=(0,v.A)(g,2),y=E[0],j=E[1],U=(0,r.useState)(null),O=(0,v.A)(U,2),k=O[0],P=O[1],A=(0,r.useState)(!1),D=(0,v.A)(A,2),Y=D[0],F=D[1],x=(0,r.useState)(null),C=(0,v.A)(x,2),z=C[0],W=C[1],G=(0,r.useState)(null),M=(0,v.A)(G,2),Q=M[0],J=M[1],B=(0,r.useState)(null),T=(0,v.A)(B,2),V=T[0],L=T[1],H=(0,r.useState)(null),I=(0,v.A)(H,2),q=I[0],K=I[1],Z=(0,r.useState)(null),N=(0,v.A)(Z,2),X=N[0],$=N[1],ee=(0,r.useState)(null),ae=(0,v.A)(ee,2),te=ae[0],ne=ae[1],le=(0,r.useState)(null),re=(0,v.A)(le,2),ue=re[0],oe=re[1],se=(0,r.useState)(null),ie=(0,v.A)(se,2),ce=ie[0],de=ie[1],me=function(){P(null),j(null),s.DY.myPermissions(b).then((function(e){var a=e.data.permissions;F((0,d.$w)({hasPermission:p,hasObjectPermission:function(e){return a.includes(e)},user:R,featureFlags:o})),s.DY.listRoles(b,{page_size:100}).then((function(e){var a=e.data.roles,t=(0,m.LF)(a),n=t.users,l=t.groups;w(S),P(n),j(l)})).catch((function(){P([]),j([])}))})).catch((function(){P([]),j([]),F(!1)}))},ve=function(e){var a=e.roles,t=e.alertSuccess,l=e.alertFailure,r=e.stateUpdate;Promise.all(a).then((function(){n({title:t,variant:"success"}),me()})).catch((function(e){var a=e.response,t=a.status,r=a.statusText;n({title:l,variant:"danger",description:(0,m.gJ)(t,r)})})).finally((function(){pe(r)}))},pe=function(e){Object.entries(e).forEach((function(e){var a=(0,v.A)(e,2),t=a[0],n=a[1];switch(t){case"showUserRemoveModal":L(n);break;case"showUserSelectWizard":K(n);break;case"showGroupRemoveModal":$(n);break;case"showGroupSelectWizard":ne(n);break;case"showRoleRemoveModal":oe(n);break;case"showRoleSelectWizard":de(n);break;default:console.error("updateProps",t,n)}}))};return(0,r.useEffect)(me,[a.pulp_href]),(0,r.useEffect)((function(){k&&(null!=f&&f.user?s.QS.list({username:f.user}).then((function(e){var a=e.data.data;J(k.find((function(e){return e.username===a[0].username})))})):J(null))}),[null==f?void 0:f.user,k]),(0,r.useEffect)((function(){y&&(null!=f&&f.group?s.YF.list({name:f.group}).then((function(e){var a=e.data.data;W(y.find((function(e){return e.name===a[0].name})))})):W(null))}),[null==f?void 0:f.group,y]),u().createElement(i.Gj,{addGroup:function(e,a){var t=a.map((function(a){return s.DY.addRole(b,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:l.Ru._({id:"lylrvu",values:{0:e.name,name:S}}),alertFailure:l.Ru._({id:"9/YKZd",values:{0:e.name,name:S}}),stateUpdate:{showGroupSelectWizard:null}})},addRole:function(e,a){var t=a.map((function(a){return s.DY.addRole(b,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:l.Ru._({id:"svLSRe",values:{0:e.name,name:S}}),alertFailure:l.Ru._({id:"eeQk9h",values:{0:e.name,name:S}}),stateUpdate:{showRoleSelectWizard:null}})},addUser:function(e,a){var t=a.map((function(a){return s.DY.addRole(b,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:l.Ru._({id:"J7EvK0",values:{0:e.username,name:S}}),alertFailure:l.Ru._({id:"0P+eGj",values:{0:e.username,name:S}}),stateUpdate:{showUserSelectWizard:null}})},addUserRole:function(e,a){var t=a.map((function(a){return s.DY.addRole(b,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:l.Ru._({id:"ifVlo4",values:{0:e.username,name:S}}),alertFailure:l.Ru._({id:"xJC6dy",values:{0:e.username,name:S}}),stateUpdate:{showRoleSelectWizard:null}})},canEditOwners:Y,group:z,groups:y,name:S,pulpObjectType:"remotes/ansible/collection",removeGroup:function(e){var a=e.object_roles.map((function(a){return s.DY.removeRole(b,{role:a,groups:[e.name]})}));ve({roles:a,alertSuccess:l.Ru._({id:"94LxzI",values:{0:e.name,name:S}}),alertFailure:l.Ru._({id:"j17tAi",values:{0:e.name,name:S}}),stateUpdate:{showGroupRemoveModal:null}})},removeRole:function(e,a){var t=s.DY.removeRole(b,{role:e,groups:[a.name]});ve({roles:[t],alertSuccess:l.Ru._({id:"svLSRe",values:{0:a.name,name:S}}),alertFailure:l.Ru._({id:"eeQk9h",values:{0:a.name,name:S}}),stateUpdate:{showRoleRemoveModal:null}})},removeUser:function(e){var a=e.object_roles.map((function(a){return s.DY.removeRole(b,{role:a,users:[e.username]})}));ve({roles:a,alertSuccess:l.Ru._({id:"ekGBsh",values:{0:e.username,name:S}}),alertFailure:l.Ru._({id:"O21voo",values:{0:e.username,name:S}}),stateUpdate:{showUserRemoveModal:null}})},removeUserRole:function(e,a){var t=s.DY.removeRole(b,{role:e,users:[a.username]});ve({roles:[t],alertSuccess:l.Ru._({id:"ifVlo4",values:{0:a.username,name:S}}),alertFailure:l.Ru._({id:"xJC6dy",values:{0:a.username,name:S}}),stateUpdate:{showRoleRemoveModal:null}})},selectRolesMessage:l.Ru._({id:"FoCVlu"}),showGroupRemoveModal:X,showGroupSelectWizard:te,showRoleRemoveModal:ue,showRoleSelectWizard:ce,showUserRemoveModal:V,showUserSelectWizard:q,updateProps:pe,user:Q,users:k,urlPrefix:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:S})})},f=t(85889),R=function(e){var a=e.code,t=u().useState(!1),n=(0,v.A)(t,2),r=n[0],o=n[1],s=u().createElement(u().Fragment,null,u().createElement(f.CodeBlockAction,null,u().createElement(f.ClipboardCopyButton,{id:"basic-copy-button",textId:"code-content","aria-label":"Copy to clipboard",onClick:function(e){return function(e,a){navigator.clipboard.writeText(a.toString())}(0,a),void o(!0)},exitDelay:r?1500:600,maxWidth:"110px",variant:"plain",onTooltipHidden:function(){return o(!1)}},r?l.Ru._({id:"ORamYR"}):l.Ru._({id:"/4gGIX"}))));return u().createElement(f.CodeBlock,{actions:s},u().createElement(f.CodeBlockCode,{id:"code-content"},a))},b=function(e){var a=e.code;return a?u().createElement(R,{code:a}):u().createElement(u().Fragment,null,l.Ru._({id:"EdQY6l"}))},h=function(e){var a,t,n=e.item;return u().createElement(i.B_,{fields:[{label:l.Ru._({id:"W+/a1z"}),value:null==n?void 0:n.name},{label:l.Ru._({id:"IagCbF"}),value:u().createElement(i.hi,{url:null==n?void 0:n.url,fallback:!0})},{label:l.Ru._({id:"vEkjkD"}),value:u().createElement(i.hi,{url:null==n?void 0:n.proxy_url,fallback:!0})},{label:l.Ru._({id:"r2AaSF"}),value:null!=n&&n.tls_validation?l.Ru._({id:"RxzN1M"}):l.Ru._({id:"E/QGRL"})},{label:l.Ru._({id:"lWw/5G"}),value:(null==n?void 0:n.client_cert)||l.Ru._({id:"EdQY6l"})},{label:l.Ru._({id:"qldWHB"}),value:(null==n?void 0:n.ca_cert)||l.Ru._({id:"EdQY6l"})},{label:l.Ru._({id:"+e1mLz"}),value:null!==(a=null==n?void 0:n.download_concurrency)&&void 0!==a?a:l.Ru._({id:"EdQY6l"})},{label:l.Ru._({id:"SeWdiM"}),value:null!==(t=null==n?void 0:n.rate_limit)&&void 0!==t?t:l.Ru._({id:"EdQY6l"})},{label:l.Ru._({id:"ooullr"}),value:u().createElement(i.PO,{remoteHref:null==n?void 0:n.pulp_href})},{label:l.Ru._({id:"6rUIqH"}),value:u().createElement(b,{code:null==n?void 0:n.requirements_file})}]})};function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function S(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(Object(t),!0).forEach((function(a){(0,n.A)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}const w=(0,i.UE)({breadcrumbs:function(e){var a=e.name,t=e.tab,n=e.params,r=n.user,u=n.group;return[{url:(0,c.jV)(c.Jh.ansibleRemotes),name:l.Ru._({id:"TiuMpz"})},{url:(0,c.jV)(c.Jh.ansibleRemoteDetail,{name:a}),name:a},"access"===t.id&&(u||r)?{url:(0,c.jV)(c.Jh.ansibleRepositoryDetail,{name:a},{tab:t.id}),name:t.name}:null,"access"===t.id&&u?{name:l.Ru._({id:"8uT/P7",values:{group:u}})}:null,"access"===t.id&&r?{name:l.Ru._({id:"AkUbn7",values:{user:r}})}:null,"access"!==t.id||r||u?null:{name:t.name}].filter(Boolean)},condition:d.re,displayName:"AnsibleRemoteDetail",errorTitle:{id:"cFwIgK"},headerActions:[o.Zl,o.Zb,o.Uv,o.$Q,o.Ql],listUrl:(0,c.jV)(c.Jh.ansibleRemotes),query:function(e){var a=e.name;return s.DY.list({name:a}).then((function(e){return e.data.results[0]})).then((function(e){return e?s.DY.myPermissions((0,m.dx)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(a){return S(S({},e),{},{my_permissions:a})})):Promise.reject({response:{status:404}})}))},renderTab:function(e,a,t){return{details:u().createElement(h,{item:a,actionContext:t}),access:u().createElement(p,{item:a,actionContext:t})}[e]},tabs:[{id:"details",name:{id:"URmyfc"}},{id:"access",name:{id:"LuXP9q"}}],tabUpdateParams:function(e){return delete e.group,delete e.user,e}})}}]);
//# sourceMappingURL=../sourcemaps/8127.c616cbe32973e8782d105a68352c1164.js.map