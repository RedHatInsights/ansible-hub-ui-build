"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[1811],{61811:(e,t,n)=>{n.d(t,{Bu:()=>m,bU:()=>v,PU:()=>y,MC:()=>b,Rq:()=>_,JJ:()=>g,Ub:()=>B,No:()=>R,sO:()=>O,DO:()=>C,e5:()=>S,cv:()=>j,hE:()=>x,W:()=>I});var r,a=n(89555),i=n(8213),o=n(92950),l=n.n(o),c=n(1161),u=function(e){var t=e.buttonVariant,n=e.condition,r=void 0===n?function(){return!0}:n,o=e.disabled,u=void 0===o?function(){return null}:o,s=e.modal,d=void 0===s?null:s,m=e.onClick,p=e.title,f=e.visible,v=void 0===f?function(){return!0}:f;return{title:a.ag._(p),button:function(e,n){return r(n,e)&&v(e,n)?u(e,n)?l().createElement(c.u,{content:u(e,n),key:a.ag._(p)},l().createElement(i.Button,{variant:t,isDisabled:!0},a.ag._(p))):l().createElement(i.Button,{variant:t,key:a.ag._(p),onClick:function(){return m(e,n)}},a.ag._(p)):null},dropdownItem:function(e,t){return r(t,e)&&v(e,t)?u(e,t)?l().createElement(i.DropdownItem,{key:a.ag._(p),description:u(e,t),isDisabled:!0},a.ag._(p)):l().createElement(i.DropdownItem,{key:a.ag._(p),onClick:function(){return m(e,t)}},a.ag._(p)):null},modal:d,visible:v,disabled:u}},s=n(61647),d=n(6640),m=u({condition:d.rH,title:{id:"ZbLFVx"},onClick:function(e,t){return(0,t.navigate)((0,s.dI)(s.nB.ansibleRemoteEdit,{name:"_"}))}}),p=n(844),f=n(52713),v=u({condition:d.nm,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,r=e.setState,i=e.state;return i.deleteModalOpen?l().createElement(c.X3,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){var n=e.name,r=e.pulpId,i=t.addAlert,o=t.setState,l=t.listQuery;return p.GC.delete(r).then((function(e){var t=e.data;return i((0,f.zT)(t.task,a.ag._({id:"eYzGw4",values:{name:n}}))),o({deleteModalOpen:null}),(0,f.bt)(t.task)})).then((function(){return l()})).catch((0,f.rJ)(a.ag._({id:"7GMpqA",values:{name:n}}),(function(){return null}),i))}(i.deleteModalOpen,{addAlert:t,setState:r,listQuery:n})},name:i.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,a=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,f.LL)(a),name:n}})}}),y=u({title:{id:"f2gEiZ"},onClick:function(e){var t=e.ca_cert;return(0,f.Qz)(t,"ca_cert")},visible:function(e){return!!e.ca_cert}}),b=u({title:{id:"1bW0sk"},onClick:function(e){var t=e.client_cert;return(0,f.Qz)(t,"client_cert")},visible:function(e){return!!e.client_cert}}),_=u({title:{id:"nAWnrE"},onClick:function(e){var t=e.requirements_file;return(0,f.Qz)(t,"requirements.yml")},visible:function(e){return!!e.requirements_file}}),g=u({condition:d.DQ,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,s.dI)(s.nB.ansibleRemoteEdit,{name:n}))}}),h=n(15861),k=n(64687),E=n.n(k),O=u({title:{id:"5wEn9x"},onClick:(r=(0,h.Z)(E().mark((function e(t,n){var r,i,o,c,u;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.addAlert,i=null,t.distributions){e.next=24;break}return r({id:"copy-cli-config",title:a.ag._({id:"O/Dt81"}),variant:"info"}),e.next=6,p.Lj.list({repository:t.pulp_href});case 6:if(e.t3=o=e.sent,e.t2=null===e.t3,e.t2){e.next=10;break}e.t2=void 0===o;case 10:if(e.t1=e.t2,e.t1){e.next=13;break}e.t1=null===(o=o.data)||void 0===o;case 13:if(e.t0=e.t1,e.t0){e.next=16;break}e.t0=null===(o=o.results)||void 0===o;case 16:if(!e.t0){e.next=20;break}e.t4=void 0,e.next=21;break;case 20:e.t4=o[0];case 21:i=e.t4,e.next=25;break;case 24:i=null===(c=t.distributions)||void 0===c?void 0:c[0];case 25:if(i){e.next=28;break}return r({id:"copy-cli-config",title:a.ag._({id:"bqNryO"}),variant:"danger"}),e.abrupt("return");case 28:u=["[galaxy]","server_list = ".concat(i.base_path),"","[galaxy_server.".concat(i.base_path,"]"),"url=".concat((0,f.hv)(i.base_path)),"token=<put your token here>"].join("\n"),navigator.clipboard.writeText(u),r({description:l().createElement("pre",null,u),id:"copy-cli-config",title:a.ag._({id:"ORamYR"}),variant:"success"});case 31:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)}),disabled:function(e){var t=e.distributions;return t&&!t.length?a.ag._({id:"bqNryO"}):null}}),C=u({condition:d.zN,title:{id:"Czn04i"},onClick:function(e,t){return(0,t.navigate)((0,s.dI)(s.nB.ansibleRepositoryEdit,{name:"_"}))}}),A=n(42982),M=n(42807),S=u({condition:d.Xn,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,r=e.setState,a=e.state;return a.deleteModalOpen?l().createElement(c.Iq,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){return w.apply(this,arguments)}(a.deleteModalOpen,{addAlert:t,listQuery:n,setState:r})},name:a.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,a=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,f.LL)(a),name:n,pulp_href:a}})},disabled:function(e){var t=e.name;return M.g.PROTECTED_REPOSITORIES.includes(t)?a.ag._({id:"G8qmOx"}):null}});function w(){return(w=(0,h.Z)(E().mark((function e(t,n){var r,i,o,l,c,u,s,d,m;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,i=t.pulp_href,o=t.pulpId,l=n.addAlert,c=n.setState,u=n.listQuery,e.next=4,p.Lj.list({repository:i}).then((function(e){return e.data.results||[]})).catch((function(e){return(0,f.rJ)(a.ag._({id:"fSg4cw"}),(function(){return null}),l)(e),[]}));case 4:return s=e.sent,d=p.UX.delete(o).then((function(e){var t=e.data;return l((0,f.zT)(t.task,a.ag._({id:"I9erLk",values:{name:r}}))),(0,f.bt)(t.task)})).catch((0,f.rJ)(a.ag._({id:"YRWr1H",values:{name:r}}),(function(){return c({deleteModalOpen:null})}),l)),m=function(e){var t=e.name,n=e.pulp_href,r=(0,f.LL)(n);return p.Lj.delete(r).then((function(e){var n=e.data;return l((0,f.zT)(n.task,a.ag._({id:"Hiczol",values:{name:t}}))),(0,f.bt)(n.task)})).catch((0,f.rJ)(a.ag._({id:"bO1/oq",values:{name:t}}),(function(){return null}),l))},e.abrupt("return",Promise.all([d].concat((0,A.Z)(s.map(m)))).then((function(){c({deleteModalOpen:null}),u()})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=u({condition:d.lo,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,s.dI)(s.nB.ansibleRepositoryEdit,{name:n}))}}),q=n(4942),P=n(70885);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){var t=e.closeAction,n=e.syncAction,r=e.name,u=(0,o.useState)(!1),s=(0,P.Z)(u,2),d=s[0],m=s[1],p=(0,o.useState)({mirror:!0,optimize:!0}),f=(0,P.Z)(p,2),v=f[0],y=f[1];return(0,o.useEffect)((function(){m(!1),y({mirror:!0,optimize:!0})}),[r]),r?l().createElement(i.Modal,{actions:[l().createElement("div",{"data-cy":"sync-button",key:"sync"},l().createElement(i.Button,{key:"sync",onClick:function(){m(!0),n(v).then(t).finally((function(){return m(!1)}))},variant:"primary",isDisabled:d},a.ag._({id:"Nu4DdT"}),d&&l().createElement(i.Spinner,{size:"sm"}))),l().createElement(i.Button,{key:"close",onClick:t,variant:"link"},a.ag._({id:"yz7wBu"}))],isOpen:!0,onClose:t,title:a.ag._({id:"ZkyFE9",values:{name:r}}),variant:"medium"},l().createElement(i.FormGroup,{label:a.ag._({id:"xl5v4T"}),labelIcon:l().createElement(c.p6,{content:a.ag._({id:"xGK5PA"})})},l().createElement(i.Switch,{isChecked:v.mirror,onChange:function(e){return y(D(D({},v),{},{mirror:e}))},label:a.ag._({id:"CXfJAw"}),labelOff:a.ag._({id:"JcAyYr"})})),l().createElement("br",null),l().createElement(i.FormGroup,{label:a.ag._({id:"MLeMRw"}),labelIcon:l().createElement(c.p6,{content:a.ag._({id:"Wongkv"})})},l().createElement(i.Switch,{isChecked:v.optimize,onChange:function(e){return y(D(D({},v),{},{optimize:e}))},label:a.ag._({id:"t/j6qO"}),labelOff:a.ag._({id:"4KZ64/"})})),l().createElement("br",null)):null},x=u({condition:d.vn,title:{id:"Nu4DdT"},modal:function(e){var t=e.addAlert,n=e.query,r=e.setState,i=e.state;return i.syncModalOpen?l().createElement(V,{closeAction:function(){return r({syncModalOpen:null})},syncAction:function(e){return function(e,t,n){var r=e.name,i=e.pulp_href,o=t.addAlert,l=t.query,c=(0,f.LL)(i);return p.UX.sync(c,n||{mirror:!0}).then((function(e){var t=e.data;o((0,f.zT)(t.task,a.ag._({id:"LN/UXA",values:{name:r}}))),l()})).catch((0,f.rJ)(a.ag._({id:"HFnbWa",values:{name:r}}),(function(){return null}),o))}(i.syncModalOpen,{addAlert:t,query:n},e)},name:i.syncModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.pulp_href;return(0,t.setState)({syncModalOpen:{name:n,pulp_href:r}})},visible:function(e,t){return(0,t.hasPermission)("ansible.change_collectionremote")},disabled:function(e){var t=e.remote,n=e.last_sync_task;return t?n&&["running","waiting"].includes(n.state)?a.ag._({id:"wjw99g"}):null:a.ag._({id:"CtFEEh"})}}),z=n(4361),L=function(e){var t=e.version,n=e.cancelAction,r=e.revertAction,c=(0,o.useState)(!1),u=(0,P.Z)(c,2),s=u[0],d=u[1];return l().createElement(i.Modal,{actions:[l().createElement("div",{"data-cy":"delete-button",key:"delete"},l().createElement(i.Button,{key:"delete",onClick:function(){d(!0),r()},variant:"danger",isDisabled:s},a.ag._({id:"jJdwCB"}),s&&l().createElement(i.Spinner,{size:"sm"}))),l().createElement(i.Button,{key:"cancel",onClick:n,variant:"link"},a.ag._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:a.ag._({id:"pbfHgy"}),titleIconVariant:"warning",variant:"small","data-cy":"modal_checkbox"},l().createElement(z.cC,{id:"8N1g3s"}),l().createElement("br",null),l().createElement("b",null,t))},I=u({condition:d.Wt,title:{id:"Zo7Ryi"},modal:function(e){var t=e.addAlert,n=e.state,r=e.setState,i=e.query;return n.revertModal?l().createElement(L,{cancelAction:function(){return r({revertModal:null})},revertAction:function(){return function(e,t){var n=e.repositoryName,r=e.pulp_href,i=e.number,o=t.addAlert,l=t.setState,c=t.query,u=(0,f.LL)(r);return p.UX.revert(u,r).then((function(e){var t=e.data;o((0,f.zT)(t.task,a.ag._({id:"n9spVP",values:{repositoryName:n}}))),l({revertModal:null}),c()})).catch((0,f.rJ)(a.ag._({id:"VfVFE7",values:{repositoryName:n,number:i}}),(function(){return l({revertModal:null})}),o))}(n.revertModal,{addAlert:t,setState:r,query:i})},version:n.revertModal.number}):null},onClick:function(e,t){var n=e.repositoryName,r=e.number,a=e.pulp_href;return(0,t.setState)({revertModal:{repositoryName:n,number:r,pulp_href:a}})},disabled:function(e){return e.isLatest?a.ag._({id:"0WOjYo"}):null}});function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(e){var t=e.addAction,n=e.closeAction,r=e.sourceRepository,u=(0,o.useState)([]),s=(0,P.Z)(u,2),d=s[0],m=s[1],v=(0,o.useState)([]),y=(0,P.Z)(v,2),b=y[0],_=y[1],g=function(e){var t=Z({},e.params);return t.ordering=t.sort,delete t.sort,p.eq.list(Z({},t)).then((function(e){var t=e.data;return{data:{count:t.meta.count,results:t.data}}}))},h=(0,o.useState)({}),k=(0,P.Z)(h,2),E=k[0],O=k[1];return l().createElement(i.Modal,{actions:[l().createElement(i.Button,{key:"confirm",onClick:function(){return t(b)},variant:"primary",isDisabled:!b},a.ag._({id:"rG3WVm"})),l().createElement(i.Button,{key:"cancel",onClick:n,variant:"link"},a.ag._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:a.ag._({id:"D9JyS0"}),variant:"large"},l().createElement("section",{className:"modal-body","data-cy":"modal-body"},l().createElement(c.qU,{actionContext:{addAlert:function(e){m([].concat((0,A.Z)(d),[e]))},state:E,setState:O,query:g,hasPermission:function(){throw"unused"}},defaultPageSize:10,defaultSort:"name",errorTitle:a.ag._({id:"GNyQoC"}),filterConfig:[{id:"keywords",title:a.ag._({id:"/n/HCO"})},{id:"namespace",title:a.ag._({id:"wMe2Qp"})},{id:"repository_name",title:a.ag._({id:"IreQBq"})}],noDataDescription:a.ag._({id:"UzlZ+i"}),noDataTitle:a.ag._({id:"Ut02fq"}),query:g,renderTableRow:function(e,t){var n=e.collection_version,a=n.name,o=n.namespace,c=n.version,u=n.description,s=e.repository,d=r.pulp_href===s.pulp_href;return l().createElement("tr",{onClick:function(){return _(f.KU.pushToOrFilterOutCollections(e,b))},key:t},l().createElement("td",null,l().createElement(i.Checkbox,{"aria-label":"".concat(o,".").concat(a," v").concat(c),id:"collection-".concat(t),isChecked:d||b.includes(e),name:"collection-".concat(t),isDisabled:d})),l().createElement("td",null,o,".",a," v",c),l().createElement("td",null,u),l().createElement("td",null,s.name))},sortHeaders:[{title:"",type:"none",id:"radio"},{title:a.ag._({id:"q+hNag"}),type:"none",id:"col1"},{title:a.ag._({id:"Nu4oKW"}),type:"none",id:"col2"},{title:a.ag._({id:"IreQBq"}),type:"none",id:"col3"}],title:a.ag._({id:"QGV1gp"})})),l().createElement(c.UW,{alerts:d,closeAlert:function(e){return(0,c.M6)(e,{alerts:d,setAlerts:m})}}))},B=u({condition:d.lo,title:{id:"aoEnJe"},modal:function(e){var t=e.addAlert,n=e.state,r=e.setState,i=e.query;return n.addCollectionVersionModal?l().createElement(Q,{addAction:function(e){!function(e,t,n){var r=e.repositoryHref,i=e.repositoryName,o=n.addAlert,l=n.setState,c=n.query,u=(0,f.LL)(r),s=t.map((function(e){return e.collection_version.pulp_href}));p.UX.addContent(u,s).then((function(e){var n=e.data;t.map((function(e){var t=e.collection_version,r=t.name,u=t.namespace,s=t.version,d=e.repository;o((0,f.zT)(n.task,a.ag._({id:"HywrEO",values:{0:d.name,namespace:u,name:r,version:s,repositoryName:i}}))),l((function(e){return Z(Z({},e),{},{addCollectionVersionModal:null})})),c({})}))})).catch((0,f.rJ)(a.ag._({id:"hQPQZ4",values:{0:t.length,repositoryName:i}}),(function(){return l((function(e){return Z(Z({},e),{},{addCollectionVersionModal:null})}))}),o))}(n.addCollectionVersionModal,e,{addAlert:t,setState:r,query:i})},closeAction:function(){return r((function(e){return Z(Z({},e),{},{addCollectionVersionModal:null})}))},sourceRepository:n.repository}):null},onClick:function(e,t){var n=t.state.repository,r=n.name,a=n.pulp_href;return(0,t.setState)((function(e){return Z(Z({},e),{},{addCollectionVersionModal:{repositoryHref:a,repositoryName:r}})}))}}),H=function(e){var t=e.name,n=e.namespace,r=e.repositoryName,u=e.version,s=e.closeAction,d=e.deleteAction,m=(0,o.useState)(!1),p=(0,P.Z)(m,2),f=p[0],v=p[1];return t?l().createElement(c.pf,{spinner:f,cancelAction:function(){v(!1),s()},deleteAction:function(){v(!1),d()},isDisabled:f,isRemove:!0,title:a.ag._({id:"t7e8jE"})},l().createElement(i.Text,null,l().createElement(z.cC,{id:"Agq2UM",values:{namespace:n,name:t,version:u,repositoryName:r},components:{0:l().createElement("b",null),1:l().createElement("b",null)}}))):null},R=u({condition:d.lo,title:{id:"t/YqKh"},modal:function(e){var t=e.addAlert,n=e.state,r=e.setState,i=e.query;return n.removeCollectionVersionModal?l().createElement(H,{closeAction:function(){return r({removeCollectionVersionModal:null})},deleteAction:function(){return function(e,t){var n=e.collection,r=n.namespace,i=n.name,o=n.version,l=e.collectionVersionHref,c=e.repositoryHref,u=e.repositoryName,s=t.addAlert,d=t.setState,m=t.query,v=(0,f.LL)(c);return p.UX.removeContent(v,l).then((function(e){var t=e.data;s((0,f.zT)(t.task,a.ag._({id:"cIK9va",values:{namespace:r,name:i,version:o,repositoryName:u}}))),d({removeCollectionVersionModal:null}),m()})).catch((0,f.rJ)(a.ag._({id:"ecxEjo",values:{namespace:r,name:i,version:o,repositoryName:u}}),(function(){return d({removeCollectionVersionModal:null})}),s))}(n.removeCollectionVersionModal,{addAlert:t,setState:r,query:i})},name:n.removeCollectionVersionModal.collection.name,namespace:n.removeCollectionVersionModal.collection.namespace,repositoryName:n.removeCollectionVersionModal.repositoryName,version:n.removeCollectionVersionModal.collection.version}):null},onClick:function(e,t){var n=e.collection_version,r=n.namespace,a=n.name,i=n.version,o=n.pulp_href,l=e.repository,c=l.name,u=l.pulp_href;return(0,t.setState)({removeCollectionVersionModal:{collection:{namespace:r,name:a,version:i},repositoryName:c,repositoryHref:u,collectionVersionHref:o}})}})},6640:(e,t,n)=>{n.d(t,{DQ:()=>l,MT:()=>c,Wt:()=>y,X0:()=>v,Xn:()=>d,fY:()=>f,lo:()=>m,nm:()=>o,rH:()=>i,vn:()=>p,yA:()=>u,zN:()=>s});var r=function(e){return function(t){var n=t.hasPermission,r=t.user;return n(e)||(null==r?void 0:r.is_superuser)}},a=function(e){return function(t,n){var r=t.hasPermission,a=t.hasObjectPermission,i=t.user;return r(e)||(null==a?void 0:a(e,n))||(null==i?void 0:i.is_superuser)}},i=r("ansible.add_collectionremote"),o=a("ansible.delete_collectionremote"),l=a("ansible.change_collectionremote"),c=a("ansible.view_collectionremote"),u=a("ansible.manage_roles_collectionremote"),s=r("ansible.add_ansiblerepository"),d=a("ansible.delete_ansiblerepository"),m=a("ansible.change_ansiblerepository"),p=m,f=function(e){var t=e.user,n=e.featureFlags;return t&&(null==n?void 0:n.display_repositories)},v=a("ansible.manage_roles_ansiblerepository"),y=m}}]);
//# sourceMappingURL=../sourcemaps/1811.cc79d963e6801bd04ff2b5ffa340df19.js.map