"use strict";(self.webpackChunkansible_hub_ui=self.webpackChunkansible_hub_ui||[]).push([[282],{9473:(e,t,n)=>{n.d(t,{Y:()=>c});var o=n(70885),a=n(3943),r=n(61647);function c(e){var t=e.forceReload,n=e.matchParams,c=e.navigate,l=e.setCollection,i=e.stateParams.version,s=n.collection,u=n.namespace,m=n.repo;a.eq.getCached({repository_name:m,namespace:u,name:s,order_by:"-version"},t).then((function(e){var t=i?e.find((function(e){return e.collection_version.version==i})):e.find((function(e){return e.is_highest}));a.gu.getContent(u,s,t.collection_version.version).then((function(n){var a=(0,o.Z)(n.data.results,1)[0];l(e,t,a)}))})).catch((function(){c((0,r.dI)(r.nB.notFound))}))}},22282:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var o=n(15671),a=n(43144),r=n(79340),c=n(82963),l=n(61120),i=n(13855),s=n(92950),u=n(3943),m=n(59330),p=n(61542),d=n(61647),f=n(92518),v=n(43819),h=n(9473);var g=function(e){(0,r.Z)(f,e);var t,n,p=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(o,arguments,a)}else e=o.apply(this,arguments);return(0,c.Z)(this,e)});function f(e){var t;(0,o.Z)(this,f),t=p.call(this,e);var n=v.q.parseParamString(e.location.search);return t.state={collection:null,collections:[],content:null,params:n,loadingImports:!0,selectedImportDetail:void 0,selectedImport:void 0,apiError:void 0},t}return(0,a.Z)(f,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.collection,o=t.collections,a=t.params,r=t.loadingImports,c=t.selectedImportDetail,l=t.selectedImport,u=t.apiError,p=t.content;if(!n)return s.createElement(m.gO,null);var f=n.collection_version,v=n.repository,h=[d.Th,{url:(0,d.dI)(d.nB.namespaceDetail,{namespace:f.namespace}),name:f.namespace},{url:(0,d.dI)(d.nB.collectionByRepo,{namespace:f.namespace,collection:f.name,repo:v.name}),name:f.name},{name:i.ag._("Import log")}];return s.createElement(s.Fragment,null,s.createElement(m.X8,{reload:function(){return e.loadData(!0)},collections:o,collection:n,content:p,params:a,updateParams:function(t){return e.updateParams(t,(function(){return e.loadData(!0)}))},breadcrumbs:h,activeTab:"import-log"}),s.createElement(m.or,null,s.createElement("section",{className:"body"},s.createElement(m.Fb,{empty:!1,loading:r,task:c,followMessages:!1,setFollowMessages:function(){return null},selectedImport:l,apiError:u,hideCollectionName:!0}))))}},{key:"loadData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=i.ag._("Could not load import log");this.setState({loadingImports:!0},(function(){e.loadCollection(t,(function(){u.q3.list({namespace:e.state.collection.collection_version.namespace,name:e.state.collection.collection_version.name,version:e.state.collection.collection_version.version,sort:"-created"}).then((function(t){var o=t.data.data[0];u.q3.get(o.id).then((function(t){e.setState({apiError:void 0,loadingImports:!1,selectedImport:o,selectedImportDetail:t.data})})).catch((function(){e.setState({apiError:n,loadingImports:!1})}))})).catch((function(){e.setState({apiError:n,loadingImports:!1})}))}))}))}},{key:"loadCollection",value:function(e,t){var n=this;(0,h.Y)({forceReload:e,matchParams:this.props.routeParams,navigate:this.props.navigate,setCollection:function(e,o,a){return n.setState({collections:e,collection:o,content:a},t)},stateParams:this.state.params})}},{key:"updateParams",get:function(){return v.q.updateParamsMixin()}}]),f}(s.Component);const y=(0,f.EN)(g);g.contextType=p.I}}]);
//# sourceMappingURL=../sourcemaps/282.548e285916417c10a9b03b8bc50e421c.js.map