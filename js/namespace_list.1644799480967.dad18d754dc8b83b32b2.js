"use strict";(self.webpackChunkansible_hub_ui=self.webpackChunkansible_hub_ui||[]).push([[684],{22366:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(87462),r=n(15671),s=n(43144),o=n(60136),c=n(6215),l=n(61120),i=n(30624),u=n(86235),m=n(98314),p=n(61647),d=n(61542),f=n(53703);var h=function(e){(0,o.Z)(d,e);var t,n,u=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(){return(0,r.Z)(this,d),u.apply(this,arguments)}return(0,s.Z)(d,[{key:"render",value:function(){return!this.context.user||this.context.user.is_anonymous?i.createElement(f.iA,null):i.createElement(m.T,(0,a.Z)({},this.props,{namespacePath:p.nB.myCollectionsByRepo,filterOwner:!0}))}}]),d}(i.Component);const g=(0,u.withRouter)(h);h.contextType=d.I},98314:(e,t,n)=>{n.d(t,{T:()=>Z});var a=n(87462),r=n(42982),s=n(15671),o=n(43144),c=n(97326),l=n(60136),i=n(6215),u=n(61120),m=n(4942),p=n(30624),d=n(65832),f=n(86235),h=n(43819),g=n(53703),v=n(34903),y=n(61647),E=n(42807),_=n(79698),P=n(61542),T=n(25221);var Z=function(e){(0,l.Z)(Z,e);var t,n,P=(t=Z,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function Z(e){var t;(0,s.Z)(this,Z),t=P.call(this,e),(0,m.Z)((0,c.Z)(t),"nonURLParams",["tenant"]),(0,m.Z)((0,c.Z)(t),"handleModalToggle",(function(){t.setState((function(e){return{isModalOpen:!e.isModalOpen}}))}));var n=h.q.parseParamString(e.location.search,["page","page_size"]);return n.page_size||(n.page_size=20),n.sort||(n.sort="name"),t.state={namespaces:void 0,itemCount:0,params:n,hasPermission:!0,isModalOpen:!1,loading:!0,inputText:n.keywords||""},t}return(0,o.Z)(Z,[{key:"componentDidMount",value:function(){var e=this;this.props.filterOwner?v.V$.list({}).then((function(t){0!==t.data.meta.count?e.loadNamespaces():e.setState({hasPermission:!1,namespaces:[],loading:!1})})).catch((function(t){return e.setState({namespaces:[],itemCount:0,loading:!1},(function(){return e.context.setAlerts([].concat((0,r.Z)(e.context.alerts),[{variant:"danger",title:T.ag._("Error loading my namespaces."),description:null==t?void 0:t.message}]))}))})):this.loadNamespaces()}},{key:"componentWillUnmount",value:function(){this.context.setAlerts([])}},{key:"render",value:function(){var e,t=this;if(this.state.redirect)return p.createElement(f.Redirect,{push:!0,to:this.state.redirect});var n=this.state,a=n.namespaces,r=n.params,s=n.itemCount,o=n.loading,c=n.inputText,l=this.props.filterOwner,i=this.context,u=i.user,m=i.alerts,h=!(0,_.vS)(this.state.params,["keywords"])&&void 0!==a&&0===a.length;if(o)return p.createElement(g.gO,null);var v=T.ag._(y.Th.name),P=function(e){e.page=1,t.updateParams(e,(function(){return t.loadNamespaces()}))};return p.createElement("div",{className:"hub-namespace-page"},p.createElement(g.RZ,{isOpen:this.state.isModalOpen,toggleModal:this.handleModalToggle,onCreateSuccess:function(e){return t.setState({redirect:(0,y.dI)(y.nB.myCollections,{namespace:e.name})})}}),p.createElement(g.UW,{alerts:m,closeAlert:function(){return t.closeAlert()}}),p.createElement(g.UP,{title:v},!this.context.user.is_anonymous&&p.createElement("div",{className:"hub-tab-link-container"},p.createElement("div",{className:"tabs"},p.createElement(g.Ak,{tabs:[{title:T.ag._("All"),link:y.nB.partners,active:!l},{title:T.ag._("My namespaces"),link:y.nB.myNamespaces,active:l}]}))),h?null:p.createElement("div",{className:"toolbar"},p.createElement(d.Toolbar,null,p.createElement(d.ToolbarContent,null,p.createElement(d.ToolbarGroup,{style:{marginLeft:0}},p.createElement(d.ToolbarItem,null,p.createElement(g.Kv,{inputText:c,onChange:function(e){return t.setState({inputText:e})},updateParams:P,params:r,filterConfig:[{id:"keywords",title:T.ag._("keywords")}]}),p.createElement(g.M$,{style:{marginTop:"16px"},updateParams:P,params:r,ignoredParams:["page_size","page","sort"]}))),p.createElement(d.ToolbarGroup,{style:{alignSelf:"start"}},p.createElement(d.ToolbarItem,null,p.createElement(g.PE,{options:[{title:T.ag._("Name"),id:"name",type:"alpha"}],params:r,updateParams:P})),(null==u||null===(e=u.model_permissions)||void 0===e?void 0:e.add_namespace)&&p.createElement(d.ToolbarItem,{key:"create-button"},p.createElement(d.Button,{variant:"primary",onClick:this.handleModalToggle},T.ag._("Create")))))),p.createElement("div",null,p.createElement(g.tl,{params:r,updateParams:function(e){return t.updateParams(e,(function(){return t.loadNamespaces()}))},count:s,isCompact:!0,perPageOptions:E.g.CARD_DEFAULT_PAGINATION_OPTIONS})))),p.createElement("section",{className:"card-area"},this.renderBody()),h||o?null:p.createElement("section",{className:"footer"},p.createElement(g.tl,{params:r,updateParams:function(e){return t.updateParams(e,(function(){return t.loadNamespaces()}))},perPageOptions:E.g.CARD_DEFAULT_PAGINATION_OPTIONS,count:s})))}},{key:"renderBody",value:function(){var e,t=this,n=this.state,r=n.namespaces,s=n.loading,o=this.props,c=o.namespacePath,l=o.filterOwner,i=this.context.user,u=T.ag._("No namespaces yet"),m=l?T.ag._("This account is not set up to manage any namespaces"):T.ag._("Namespaces will appear once created"),f=null!=i&&null!==(e=i.model_permissions)&&void 0!==e&&e.add_namespace?p.createElement(d.Button,{variant:"primary",onClick:function(){return t.handleModalToggle()}},T.ag._("Create")):null;return s?p.createElement("section",null,p.createElement(g.AW,null),";"):0===r.length?p.createElement("section",null,(0,_.vS)(this.state.params,["keywords"])?p.createElement(g.ei,null):p.createElement(g.vv,{title:u,description:m,button:f})):p.createElement("section",{className:"card-layout"},r.map((function(e,n){return p.createElement("div",{key:n,className:"card-wrapper"},p.createElement(g._v,(0,a.Z)({namespaceURL:(0,y.dI)(c,{namespace:e.name,repo:t.context.selectedRepo}),key:n},e)))})))}},{key:"loadNamespaces",value:function(){var e=this,t=this.props.filterOwner?v.V$:v.jZ;this.setState({loading:!0},(function(){t.list(e.state.params).then((function(t){e.setState({namespaces:t.data.data,itemCount:t.data.meta.count,loading:!1})})).catch((function(t){return e.setState({namespaces:[],itemCount:0,loading:!1},(function(){return e.context.setAlerts([].concat((0,r.Z)(e.context.alerts),[{variant:"danger",title:T.ag._("Error loading namespaces."),description:null==t?void 0:t.message}]))}))}))}))}},{key:"updateParams",get:function(){return h.q.updateParamsMixin(this.nonURLParams)}},{key:"closeAlert",value:function(){this.context.setAlerts([])}}]),Z}(p.Component);Z.contextType=P.I},42613:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(87462),r=n(15671),s=n(43144),o=n(60136),c=n(6215),l=n(61120),i=n(30624),u=n(86235),m=n(98314),p=n(61647);var d=function(e){(0,o.Z)(d,e);var t,n,u=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function d(){return(0,r.Z)(this,d),u.apply(this,arguments)}return(0,s.Z)(d,[{key:"render",value:function(){return i.createElement(m.T,(0,a.Z)({},this.props,{namespacePath:p.nB.namespaceByRepo,filterOwner:!1}))}}]),d}(i.Component);const f=(0,u.withRouter)(d)}}]);
//# sourceMappingURL=../sourcemaps/namespace_list.5c8a3974823675792c41d563b5eb1732.js.map