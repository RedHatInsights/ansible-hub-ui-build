"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[489],{35489:(e,t,n)=>{n.d(t,{rq:()=>m,Ql:()=>v,$Q:()=>y,Uv:()=>_,Zb:()=>b,Zl:()=>h,Oz:()=>N,$6:()=>x,i6:()=>B,X1:()=>H,Kf:()=>T,Bq:()=>I,_F:()=>K,Th:()=>W});var r=n(47712),i=n(72583),o=n(99780),a=n(44914),l=n.n(a),c=n(35894),u=function(e){var t=e.buttonVariant,n=e.condition,a=void 0===n?function(){return!0}:n,u=e.disabled,s=void 0===u?function(){return null}:u,d=e.modal,m=void 0===d?null:d,p=e.onClick,f=e.title,v=e.visible,y=void 0===v?function(){return!0}:v;return{title:r.Ru._(f),button:function(e,n){return a(n,e)&&y(e,n)?s(e,n)?l().createElement(c.m_,{content:s(e,n),key:r.Ru._(f)},l().createElement(i.$n,{variant:t,isDisabled:!0},r.Ru._(f))):l().createElement(i.$n,{variant:t,key:r.Ru._(f),onClick:function(){return p(e,n)}},r.Ru._(f)):null},dropdownItem:function(e,t){return a(t,e)&&y(e,t)?s(e,t)?l().createElement(o.t,{key:r.Ru._(f),description:s(e,t),isDisabled:!0},r.Ru._(f)):l().createElement(o.t,{key:r.Ru._(f),onClick:function(){return p(e,t)}},r.Ru._(f)):null},modal:m,visible:y,disabled:s}},s=n(60165),d=n(5093),m=u({condition:d.u9,title:{id:"ZbLFVx"},onClick:function(e,t){return(0,t.navigate)((0,s.jV)(s.Jh.ansibleRemoteEdit,{name:"_"}))}}),p=n(88696),f=n(39799),v=u({condition:d.Sq,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,i=e.setState,o=e.state;return o.deleteModalOpen?l().createElement(c.jP,{closeAction:function(){return i({deleteModalOpen:null})},deleteAction:function(){return function(e,t){var n=e.name,i=e.pulpId,o=t.addAlert,a=t.setState,l=t.listQuery;return p.DY.delete(i).then((function(e){var t=e.data;return o((0,f.Oz)(t.task,r.Ru._({id:"eYzGw4",values:{name:n}}))),a({deleteModalOpen:null}),(0,f.RN)(t.task)})).then((function(){return l()})).catch((0,f.tv)(r.Ru._({id:"7GMpqA",values:{name:n}}),(function(){return null}),o))}(o.deleteModalOpen,{addAlert:t,setState:i,listQuery:n})},name:o.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,i=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,f.dx)(i),name:n}})}}),y=u({title:{id:"f2gEiZ"},onClick:function(e){var t=e.ca_cert;return(0,f.YN)(t,"ca_cert")},visible:function(e){return!!e.ca_cert}}),_=u({title:{id:"1bW0sk"},onClick:function(e){var t=e.client_cert;return(0,f.YN)(t,"client_cert")},visible:function(e){return!!e.client_cert}}),b=u({title:{id:"nAWnrE"},onClick:function(e){var t=e.requirements_file;return(0,f.YN)(t,"requirements.yml")},visible:function(e){return!!e.requirements_file}}),h=u({condition:d.Xb,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,s.jV)(s.Jh.ansibleRemoteEdit,{name:n}))}}),R=n(80296),E=n(45458),k=n(64467),O=n(83873),A=n(40922),g=n(26805),C=n(52068);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,k.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S,w=function(e){var t=e.addAction,n=e.closeAction,o=e.sourceRepository,u=(0,a.useState)([]),s=(0,R.A)(u,2),d=s[0],m=s[1],f=(0,a.useState)([]),v=(0,R.A)(f,2),y=v[0],_=v[1],b=function(){var e=j({},(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params);return e.ordering=e.sort,delete e.sort,p.R4.list(j({},e)).then((function(e){var t=e.data;return{data:{count:t.meta.count,results:t.data}}}))},h=(0,a.useState)({}),k=(0,R.A)(h,2),M=k[0],S=k[1];return l().createElement(A.a,{actions:[l().createElement(i.$n,{key:"confirm",onClick:function(){return t(y)},variant:"primary",isDisabled:!y.length},r.Ru._({id:"rG3WVm"})),l().createElement(i.$n,{key:"cancel",onClick:n,variant:"link"},r.Ru._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:r.Ru._({id:"D9JyS0"}),variant:"large"},l().createElement("section",{className:"modal-body","data-cy":"modal-body"},l().createElement(c.cJ,{actionContext:{addAlert:function(e){m([].concat((0,E.A)(d),[e]))},state:M,setState:S,query:b,hasPermission:function(){throw"unused"}},defaultPageSize:10,defaultSort:"name",errorTitle:r.Ru._({id:"GNyQoC"}),filterConfig:[{id:"keywords",title:r.Ru._({id:"/n/HCO"})},{id:"namespace",title:r.Ru._({id:"wMe2Qp"})},{id:"repository_name",title:r.Ru._({id:"IreQBq"})}],noDataDescription:r.Ru._({id:"UzlZ+i"}),noDataTitle:r.Ru._({id:"Ut02fq"}),query:b,renderTableRow:function(e,t){var n=e.collection_version,r=n.name,i=n.namespace,a=n.version,c=n.description,u=e.repository,s=o.pulp_href===u.pulp_href;return l().createElement(g.Tr,{onClick:function(){return _((t=e,(n=y).find((function(e){var n=e.collection_version,r=e.repository;return n.pulp_href===t.collection_version.pulp_href&&r.pulp_href===t.repository.pulp_href}))?n.filter((function(e){var n=e.collection_version,r=e.repository;return n.pulp_href!==t.collection_version.pulp_href||r.pulp_href!==t.repository.pulp_href})):[].concat((0,E.A)(n),[t])));var t,n},key:t},l().createElement(C.Td,null,l().createElement(O.S,{"aria-label":"".concat(i,".").concat(r," v").concat(a),id:"collection-".concat(t),isChecked:s||y.includes(e),name:"collection-".concat(t),isDisabled:s})),l().createElement(C.Td,null,i,".",r," v",a),l().createElement(C.Td,null,c),l().createElement(C.Td,null,u.name))},sortHeaders:[{title:"",type:"none",id:"radio"},{title:r.Ru._({id:"q+hNag"}),type:"none",id:"col1"},{title:r.Ru._({id:"Nu4oKW"}),type:"none",id:"col2"},{title:r.Ru._({id:"IreQBq"}),type:"none",id:"col3"}],title:r.Ru._({id:"QGV1gp"})})),l().createElement(c.NS,{alerts:d,closeAlert:function(e){return(0,c.R$)(e,{alerts:d,setAlerts:m})}}))},N=u({condition:d.Bf,title:{id:"aoEnJe"},modal:function(e){var t=e.addAlert,n=e.state,i=e.setState,o=e.query;return n.addCollectionVersionModal?l().createElement(w,{addAction:function(e){!function(e,t,n){var i=e.repositoryHref,o=e.repositoryName,a=n.addAlert,l=n.setState,c=n.query,u=(0,f.dx)(i),s=t.map((function(e){return e.collection_version.pulp_href}));p.Xj.addContent(u,s).then((function(e){var n=e.data;t.map((function(e){var t=e.collection_version,i=t.name,u=t.namespace,s=t.version,d=e.repository;a((0,f.Oz)(n.task,r.Ru._({id:"HywrEO",values:{0:d.name,namespace:u,name:i,version:s,repositoryName:o}}))),l((function(e){return j(j({},e),{},{addCollectionVersionModal:null})})),c({})}))})).catch((0,f.tv)(r.Ru._({id:"hQPQZ4",values:{0:t.length,repositoryName:o}}),(function(){return l((function(e){return j(j({},e),{},{addCollectionVersionModal:null})}))}),a))}(n.addCollectionVersionModal,e,{addAlert:t,setState:i,query:o})},closeAction:function(){return i((function(e){return j(j({},e),{},{addCollectionVersionModal:null})}))},sourceRepository:n.repository}):null},onClick:function(e,t){var n=t.state.repository,r=n.name,i=n.pulp_href;return(0,t.setState)((function(e){return j(j({},e),{},{addCollectionVersionModal:{repositoryHref:i,repositoryName:r}})}))}}),q=n(42328),P=n(22069),V=function(e){var t=e.name,n=e.namespace,i=e.repositoryName,o=e.version,u=e.closeAction,s=e.deleteAction,d=(0,a.useState)(!1),m=(0,R.A)(d,2),p=m[0],f=m[1];return t?l().createElement(c.T6,{spinner:p,cancelAction:function(){f(!1),u()},deleteAction:function(){f(!1),s()},isDisabled:p,isRemove:!0,title:r.Ru._({id:"t7e8jE"})},l().createElement(P.E,null,l().createElement(q.x6,{id:"Agq2UM",values:{namespace:n,name:t,version:o,repositoryName:i},components:{0:l().createElement("b",null),1:l().createElement("b",null)}}))):null},x=u({condition:d.Bf,title:{id:"t/YqKh"},modal:function(e){var t=e.addAlert,n=e.state,i=e.setState,o=e.query;return n.removeCollectionVersionModal?l().createElement(V,{closeAction:function(){return i({removeCollectionVersionModal:null})},deleteAction:function(){return function(e,t){var n=e.collection,i=n.namespace,o=n.name,a=n.version,l=e.collectionVersionHref,c=e.repositoryHref,u=e.repositoryName,s=t.addAlert,d=t.setState,m=t.query,v=(0,f.dx)(c);return p.Xj.removeContent(v,l).then((function(e){var t=e.data;s((0,f.Oz)(t.task,r.Ru._({id:"cIK9va",values:{namespace:i,name:o,version:a,repositoryName:u}}))),d({removeCollectionVersionModal:null}),m()})).catch((0,f.tv)(r.Ru._({id:"ecxEjo",values:{namespace:i,name:o,version:a,repositoryName:u}}),(function(){return d({removeCollectionVersionModal:null})}),s))}(n.removeCollectionVersionModal,{addAlert:t,setState:i,query:o})},name:n.removeCollectionVersionModal.collection.name,namespace:n.removeCollectionVersionModal.collection.namespace,repositoryName:n.removeCollectionVersionModal.repositoryName,version:n.removeCollectionVersionModal.collection.version}):null},onClick:function(e,t){var n=e.collection_version,r=n.namespace,i=n.name,o=n.version,a=n.pulp_href,l=e.repository,c=l.name,u=l.pulp_href;return(0,t.setState)({removeCollectionVersionModal:{collection:{namespace:r,name:i,version:o},repositoryName:c,repositoryHref:u,collectionVersionHref:a}})}}),z=n(10467),D=n(54756),Q=n.n(D),B=u({title:{id:"5wEn9x"},onClick:(S=(0,z.A)(Q().mark((function e(t,n){var i,o,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.addAlert,o=null,t.distroBasePath){e.next=9;break}return i({id:"copy-cli-config",title:r.Ru._({id:"O/Dt81"}),variant:"info"}),e.next=6,(0,f.Jh)(t.name,t.pulp_href).catch((function(){return null}));case 6:o=e.sent,e.next=10;break;case 9:o=t.distroBasePath;case 10:if(o){e.next=13;break}return i({id:"copy-cli-config",title:r.Ru._({id:"bqNryO"}),variant:"danger"}),e.abrupt("return");case 13:a=["[galaxy]","server_list = ".concat(o),"","[galaxy_server.".concat(o,"]"),"url=".concat((0,f.k9)(o)),"token=<put your token here>"].join("\n"),navigator.clipboard.writeText(a),i({description:l().createElement("pre",null,a),id:"copy-cli-config",title:r.Ru._({id:"ORamYR"}),variant:"success"});case 16:case"end":return e.stop()}}),e)}))),function(e,t){return S.apply(this,arguments)}),disabled:function(e){return"distroBasePath"in e&&!e.distroBasePath?r.Ru._({id:"bqNryO"}):null}}),H=u({condition:d.QZ,title:{id:"Czn04i"},onClick:function(e,t){return(0,t.navigate)((0,s.jV)(s.Jh.ansibleRepositoryEdit,{name:"_"}))}}),T=u({condition:d._9,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,r=e.setState,i=e.state;return i.deleteModalOpen?l().createElement(c.N1,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){return $.apply(this,arguments)}(i.deleteModalOpen,{addAlert:t,listQuery:n,setState:r})},name:i.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,i=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,f.dx)(i),name:n,pulp_href:i}})},disabled:function(e){var t=e.name;return["rh-certified","validated","community","published","staging","rejected"].includes(t)?r.Ru._({id:"G8qmOx"}):null}});function $(){return($=(0,z.A)(Q().mark((function e(t,n){var i,o,a,l,c,u,s,d,m;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,o=t.pulp_href,a=t.pulpId,l=n.addAlert,c=n.setState,u=n.listQuery,e.next=4,p.zg.list({repository:o,page:1,page_size:100}).then((function(e){return e.data.results||[]})).catch((function(e){return(0,f.tv)(r.Ru._({id:"fSg4cw"}),(function(){return null}),l)(e),[]}));case 4:return s=e.sent,d=p.Xj.delete(a).then((function(e){var t=e.data;return l((0,f.Oz)(t.task,r.Ru._({id:"I9erLk",values:{name:i}}))),(0,f.RN)(t.task)})).catch((0,f.tv)(r.Ru._({id:"YRWr1H",values:{name:i}}),(function(){return c({deleteModalOpen:null})}),l)),m=function(e){var t=e.name,n=e.pulp_href,i=(0,f.dx)(n);return p.zg.delete(i).then((function(e){var n=e.data;return l((0,f.Oz)(n.task,r.Ru._({id:"Hiczol",values:{name:t}}))),(0,f.RN)(n.task)})).catch((0,f.tv)(r.Ru._({id:"bO1/oq",values:{name:t}}),(function(){return null}),l))},e.abrupt("return",Promise.all([d].concat((0,E.A)(s.map(m)))).then((function(){c({deleteModalOpen:null}),u()})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=u({condition:d.Bf,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,s.jV)(s.Jh.ansibleRepositoryEdit,{name:n}))}}),J=n(56780),Y=n(95872),F=n(84976);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,k.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=function(e){var t=e.closeAction,n=e.syncAction,o=e.name,u=(0,a.useState)(!1),s=(0,R.A)(u,2),d=s[0],m=s[1],p=(0,a.useState)({mirror:!0,optimize:!0}),f=(0,R.A)(p,2),v=f[0],y=f[1];return(0,a.useEffect)((function(){m(!1),y({mirror:!0,optimize:!0})}),[o]),o?l().createElement(A.a,{actions:[l().createElement("div",{"data-cy":"sync-button",key:"sync"},l().createElement(i.$n,{key:"sync",onClick:function(){m(!0),n(v).then(t).finally((function(){return m(!1)}))},variant:"primary",isDisabled:d},r.Ru._({id:"Nu4DdT"}),d&&l().createElement(c.y$,{size:"sm"}))),l().createElement(i.$n,{key:"close",onClick:t,variant:"link"},r.Ru._({id:"yz7wBu"}))],isOpen:!0,onClose:t,title:r.Ru._({id:"ZkyFE9",values:{name:o}}),variant:"medium"},l().createElement(J.g,{label:r.Ru._({id:"xl5v4T"}),labelIcon:l().createElement(c.mF,{content:r.Ru._({id:"xGK5PA"})})},l().createElement(Y.d,{isChecked:v.mirror,onChange:function(e,t){return y(Z(Z({},v),{},{mirror:t}))},label:r.Ru._({id:"CXfJAw"}),labelOff:r.Ru._({id:"JcAyYr"})})),l().createElement("br",null),l().createElement(J.g,{label:r.Ru._({id:"MLeMRw"}),labelIcon:l().createElement(c.mF,{content:r.Ru._({id:"GA4EFU"})})},l().createElement(Y.d,{isChecked:v.optimize,onChange:function(e,t){return y(Z(Z({},v),{},{optimize:t}))},label:r.Ru._({id:"QksU5X"}),labelOff:r.Ru._({id:"4KZ64/"})})),l().createElement("br",null)):null},K=u({condition:d.wY,title:{id:"Nu4DdT"},modal:function(e){var t=e.addAlert,n=e.query,i=e.setState,o=e.state;return o.syncModalOpen?l().createElement(G,{closeAction:function(){return i({syncModalOpen:null})},syncAction:function(e){return function(e,t,n){var i=e.name,o=e.pulp_href,a=t.addAlert,l=t.query,c=(0,f.dx)(o);return p.Xj.sync(c,n||{mirror:!0}).then((function(e){var t=e.data;a((0,f.Oz)(t.task,r.Ru._({id:"LN/UXA",values:{name:i}}))),l()})).catch((0,f.tv)(r.Ru._({id:"HFnbWa",values:{name:i}}),(function(){return null}),a))}(o.syncModalOpen,{addAlert:t,query:n},e)},name:o.syncModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.pulp_href;return(0,t.setState)({syncModalOpen:{name:n,pulp_href:r}})},visible:function(e,t){return(0,t.hasPermission)("ansible.change_collectionremote")},disabled:function(e){var t=e.remote,n=e.last_sync_task;if(!t)return r.Ru._({id:"CtFEEh"});if(n&&["running","waiting"].includes(n.state))return r.Ru._({id:"wjw99g"});if(t&&"https://galaxy.ansible.com/api/"===t.url){var i=t.name,o=(0,s.jV)(s.Jh.ansibleRemoteEdit,{name:i});if(!t.requirements_file)return l().createElement(q.x6,{id:"/Ro7TR",values:{name:i},components:{0:l().createElement(F.N_,{to:o})}});if(t.signed_only)return l().createElement(q.x6,{id:"jeIRua",values:{name:i},components:{0:l().createElement(F.N_,{to:o})}})}return null}}),U=function(e){var t=e.version,n=e.cancelAction,o=e.revertAction,u=(0,a.useState)(!1),s=(0,R.A)(u,2),d=s[0],m=s[1];return l().createElement(A.a,{actions:[l().createElement("div",{"data-cy":"delete-button",key:"delete"},l().createElement(i.$n,{key:"delete",onClick:function(){m(!0),o()},variant:"danger",isDisabled:d},r.Ru._({id:"jJdwCB"}),d&&l().createElement(c.y$,{size:"sm"}))),l().createElement(i.$n,{key:"cancel",onClick:n,variant:"link"},r.Ru._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:r.Ru._({id:"pbfHgy"}),titleIconVariant:"warning",variant:"small","data-cy":"modal_checkbox"},l().createElement(q.x6,{id:"8N1g3s"}),l().createElement("br",null),l().createElement("b",null,t))},W=u({condition:d.hB,title:{id:"Zo7Ryi"},modal:function(e){var t=e.addAlert,n=e.state,i=e.setState,o=e.query;return n.revertModal?l().createElement(U,{cancelAction:function(){return i({revertModal:null})},revertAction:function(){return function(e,t){var n=e.repositoryName,i=e.pulp_href,o=e.number,a=t.addAlert,l=t.setState,c=t.query,u=(0,f.dx)(i);return p.Xj.revert(u,i).then((function(e){var t=e.data;a((0,f.Oz)(t.task,r.Ru._({id:"n9spVP",values:{repositoryName:n}}))),l({revertModal:null}),c()})).catch((0,f.tv)(r.Ru._({id:"VfVFE7",values:{repositoryName:n,number:o}}),(function(){return l({revertModal:null})}),a))}(n.revertModal,{addAlert:t,setState:i,query:o})},version:n.revertModal.number}):null},onClick:function(e,t){var n=e.repositoryName,r=e.number,i=e.pulp_href;return(0,t.setState)({revertModal:{repositoryName:n,number:r,pulp_href:i}})},disabled:function(e){return e.isLatest?r.Ru._({id:"0WOjYo"}):null}})},5093:(e,t,n)=>{n.d(t,{$w:()=>u,Bf:()=>m,Fs:()=>v,QZ:()=>s,Sq:()=>a,Xb:()=>l,_9:()=>d,hB:()=>y,k3:()=>f,re:()=>c,u9:()=>o,wY:()=>p});var r=function(e){return function(t){var n=t.hasPermission,r=t.user;return n(e)||(null==r?void 0:r.is_superuser)}},i=function(e){return function(t,n){var r=t.hasPermission,i=t.hasObjectPermission,o=t.user;return r(e)||(null==i?void 0:i(e,n))||(null==o?void 0:o.is_superuser)}},o=r("ansible.add_collectionremote"),a=i("ansible.delete_collectionremote"),l=i("ansible.change_collectionremote"),c=i("ansible.view_collectionremote"),u=i("ansible.manage_roles_collectionremote"),s=r("ansible.add_ansiblerepository"),d=i("ansible.delete_ansiblerepository"),m=i("ansible.change_ansiblerepository"),p=m,f=function(e){var t=e.user,n=e.featureFlags;return t&&(null==n?void 0:n.display_repositories)},v=i("ansible.manage_roles_ansiblerepository"),y=m}}]);
//# sourceMappingURL=../sourcemaps/489.2005fc2d873611ef2840314d6cebe1d8.js.map