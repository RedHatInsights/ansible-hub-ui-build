{"version":3,"sources":["webpack:///./src/containers/namespace-list/namespace-list.scss","webpack:///./src/containers/namespace-list/namespace-list.tsx","webpack:///./src/containers/namespace-list/namespace-list.scss?e8b7","webpack:///./src/containers/namespace-list/my-namespaces.tsx","webpack:///./src/containers/namespace-list/partners.tsx"],"names":["module","exports","push","i","props","nonURLParams","handleModalToggle","setState","isModalOpen","params","parseParamString","location","search","state","namespaces","undefined","itemCount","hasPermission","loading","componentDidMount","this","filterOwner","list","then","results","data","meta","count","loadNamespaces","render","user","context","noData","length","extra","model_permissions","add_namespace","key","variant","onClick","title","name","toLowerCase","className","isOpen","toggleModal","onCreateSuccess","result","history","myCollections","namespace","tabs","link","active","myNamespaces","sortOptions","id","type","searchPlaceholder","updateParams","p","extraInputs","isCompact","perPageOptions","CARD_DEFAULT_PAGINATION_OPTIONS","renderBody","namespacePath","noDataDescription","noDataButton","description","button","map","ns","namespaceURL","repo","selectedRepo","apiFunc","updateParamsMixin","NamespaceList","contextType","content","options","transform","update","locals","hot","accept","newContent","a","b","idx","Error","dispose","myCollectionsByRepo","MyNamespaces","namespaceByRepo","Partners"],"mappings":"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","file":"js/namespace_list.b44fd187f49ab5505a5f.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".namespace-page{height:100%;display:flex;flex-direction:column;justify-content:space-between}.namespace-page .card-area{margin-top:24px;margin-left:24px;flex-grow:1}.namespace-page .card-area .card-layout{display:flex;flex-wrap:wrap}.namespace-page .card-area .card-layout .card-wrapper{margin-right:24px;margin-bottom:24px}.namespace-page .toolbar{display:flex;justify-content:space-between}.namespace-page .pf-c-toolbar__content{padding-left:0px}.namespace-page .footer{border-top:1px solid #d8d8d8;flex-shrink:0}\", \"\"]);\n\n","import * as React from 'react';\nimport './namespace-list.scss';\n\nimport { RouteComponentProps } from 'react-router-dom';\n\nimport { ParamHelper } from 'src/utilities/param-helper';\nimport {\n  BaseHeader,\n  EmptyStateFilter,\n  EmptyStateNoData,\n  LinkTabs,\n  LoadingPageSpinner,\n  LoadingPageWithHeader,\n  NamespaceCard,\n  NamespaceModal,\n  Pagination,\n  Toolbar,\n} from 'src/components';\nimport { Button, ToolbarItem } from '@patternfly/react-core';\nimport { NamespaceAPI, NamespaceListType, MyNamespaceAPI } from 'src/api';\nimport { formatPath, namespaceBreadcrumb, Paths } from 'src/paths';\nimport { Constants } from 'src/constants';\nimport { AppContext } from 'src/loaders/app-context';\nimport { filterIsSet } from 'src/utilities';\n\ninterface IState {\n  namespaces: NamespaceListType[];\n  itemCount: number;\n  params: {\n    name?: string;\n    sort?: string;\n    page?: number;\n    page_size?: number;\n    tenant?: string;\n  };\n  hasPermission: boolean;\n  isModalOpen: boolean;\n  loading: boolean;\n}\n\ninterface IProps extends RouteComponentProps {\n  namespacePath: Paths;\n  filterOwner?: boolean;\n}\n\nexport class NamespaceList extends React.Component<IProps, IState> {\n  nonURLParams = ['tenant'];\n\n  constructor(props) {\n    super(props);\n\n    const params = ParamHelper.parseParamString(props.location.search, [\n      'page',\n      'page_size',\n    ]);\n\n    if (!params['page_size']) {\n      params['page_size'] = 20;\n    }\n\n    if (!params['sort']) {\n      params['sort'] = 'name';\n    }\n\n    this.state = {\n      namespaces: undefined,\n      itemCount: 0,\n      params: params,\n      hasPermission: true,\n      isModalOpen: false,\n      loading: true,\n    };\n  }\n\n  private handleModalToggle = () => {\n    this.setState(({ isModalOpen }) => ({\n      isModalOpen: !isModalOpen,\n    }));\n  };\n\n  componentDidMount() {\n    if (this.props.filterOwner) {\n      // Make a query with no params and see if it returns results to tell\n      // if the user can edit namespaces\n      MyNamespaceAPI.list({}).then(results => {\n        if (results.data.meta.count !== 0) {\n          this.loadNamespaces();\n        } else {\n          this.setState({\n            hasPermission: false,\n            namespaces: [],\n            loading: false,\n          });\n        }\n      });\n    } else {\n      this.loadNamespaces();\n    }\n  }\n\n  render() {\n    const { namespaces, params, itemCount } = this.state;\n    const { filterOwner } = this.props;\n    const { user } = this.context;\n    const noData =\n      !filterIsSet(this.state.params, ['keywords']) &&\n      namespaces !== undefined &&\n      namespaces.length === 0;\n\n    if (!namespaces) {\n      return <LoadingPageWithHeader></LoadingPageWithHeader>;\n    }\n\n    let extra = [];\n\n    if (user?.model_permissions?.add_namespace) {\n      extra.push(\n        <ToolbarItem key='create-button'>\n          <Button variant='primary' onClick={this.handleModalToggle}>\n            Create\n          </Button>\n        </ToolbarItem>,\n      );\n    }\n\n    const title = namespaceBreadcrumb.name;\n    const search = filterOwner\n      ? 'Search my namespaces'\n      : 'Search all ' + title.toLowerCase();\n\n    return (\n      <div className='namespace-page'>\n        <NamespaceModal\n          isOpen={this.state.isModalOpen}\n          toggleModal={this.handleModalToggle}\n          onCreateSuccess={result =>\n            this.props.history.push(\n              formatPath(Paths.myCollections, {\n                namespace: result['name'],\n              }),\n            )\n          }\n        ></NamespaceModal>\n        <BaseHeader title={title}>\n          <div className='tab-link-container'>\n            <div className='tabs'>\n              <LinkTabs\n                tabs={[\n                  {\n                    title: 'All',\n                    link: Paths[NAMESPACE_TERM],\n                    active: !filterOwner,\n                  },\n                  {\n                    title: 'My namespaces',\n                    link: Paths.myNamespaces,\n                    active: filterOwner,\n                  },\n                ]}\n              />\n            </div>\n          </div>\n          {noData ? null : (\n            <div className='toolbar'>\n              <Toolbar\n                params={params}\n                sortOptions={[{ title: 'Name', id: 'name', type: 'alpha' }]}\n                searchPlaceholder={search}\n                updateParams={p =>\n                  this.updateParams(p, () => this.loadNamespaces())\n                }\n                extraInputs={extra}\n              />\n              <div>\n                <Pagination\n                  params={params}\n                  updateParams={p =>\n                    this.updateParams(p, () => this.loadNamespaces())\n                  }\n                  count={itemCount}\n                  isCompact\n                  perPageOptions={Constants.CARD_DEFAULT_PAGINATION_OPTIONS}\n                />\n              </div>\n            </div>\n          )}\n        </BaseHeader>\n        <section className='card-area'>{this.renderBody()}</section>\n        {noData ? null : (\n          <section className='footer'>\n            <Pagination\n              params={params}\n              updateParams={p =>\n                this.updateParams(p, () => this.loadNamespaces())\n              }\n              perPageOptions={Constants.CARD_DEFAULT_PAGINATION_OPTIONS}\n              count={itemCount}\n            />\n          </section>\n        )}\n      </div>\n    );\n  }\n\n  private renderBody() {\n    const { namespaces, loading } = this.state;\n    const { namespacePath, filterOwner } = this.props;\n    const { user } = this.context;\n\n    const noDataTitle = 'No namespaces yet';\n    const noDataDescription = !filterOwner\n      ? 'Namespaces will appear once created'\n      : 'This account is not set up to manage any namespaces';\n\n    const noDataButton = user?.model_permissions?.add_namespace ? (\n      <Button variant='primary' onClick={() => this.handleModalToggle()}>\n        Create\n      </Button>\n    ) : null;\n\n    if (loading) {\n      return (\n        <section>\n          <LoadingPageSpinner></LoadingPageSpinner>;\n        </section>\n      );\n    }\n\n    if (namespaces.length === 0) {\n      return (\n        <section>\n          {filterIsSet(this.state.params, ['keywords']) ? (\n            <EmptyStateFilter />\n          ) : (\n            <EmptyStateNoData\n              title={noDataTitle}\n              description={noDataDescription}\n              button={noDataButton}\n            />\n          )}\n        </section>\n      );\n    }\n\n    return (\n      <section className='card-layout'>\n        {namespaces.map((ns, i) => (\n          <div key={i} className='card-wrapper'>\n            <NamespaceCard\n              namespaceURL={formatPath(namespacePath, {\n                namespace: ns.name,\n                repo: this.context.selectedRepo,\n              })}\n              key={i}\n              {...ns}\n            ></NamespaceCard>\n          </div>\n        ))}\n      </section>\n    );\n  }\n\n  private loadNamespaces() {\n    let apiFunc: any;\n\n    if (this.props.filterOwner) {\n      apiFunc = p => MyNamespaceAPI.list(p);\n    } else {\n      apiFunc = p => NamespaceAPI.list(p);\n    }\n    this.setState({ loading: true }, () => {\n      apiFunc(this.state.params).then(results => {\n        this.setState({\n          namespaces: results.data.data,\n          itemCount: results.data.meta.count,\n          loading: false,\n        });\n      });\n    });\n  }\n\n  private get updateParams() {\n    return ParamHelper.updateParamsMixin(this.nonURLParams);\n  }\n}\n\nNamespaceList.contextType = AppContext;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./namespace-list.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./namespace-list.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./namespace-list.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\nimport { NamespaceList } from './namespace-list';\nimport { Paths } from 'src/paths';\n\nclass MyNamespaces extends React.Component<RouteComponentProps, {}> {\n  render() {\n    return (\n      <NamespaceList\n        {...this.props}\n        namespacePath={Paths.myCollectionsByRepo}\n        filterOwner={true}\n      />\n    );\n  }\n}\n\nexport default withRouter(MyNamespaces);\n","import * as React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\nimport { NamespaceList } from './namespace-list';\nimport { Paths } from 'src/paths';\n\nclass Partners extends React.Component<RouteComponentProps, {}> {\n  render() {\n    return (\n      <NamespaceList\n        {...this.props}\n        namespacePath={Paths.namespaceByRepo}\n        filterOwner={false}\n      />\n    );\n  }\n}\n\nexport default withRouter(Partners);\n"],"sourceRoot":""}