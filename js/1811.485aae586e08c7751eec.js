"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[1811],{61811:(e,t,n)=>{n.d(t,{Bu:()=>d,bU:()=>f,PU:()=>v,MC:()=>y,Rq:()=>_,JJ:()=>g,Ub:()=>M,No:()=>P,sO:()=>D,DO:()=>V,e5:()=>I,cv:()=>B,hE:()=>H,W:()=>J});var r=n(89555),a=n(15021),o=n(92950),i=n.n(o),l=n(65723),c=function(e){var t=e.buttonVariant,n=e.condition,o=void 0===n?function(){return!0}:n,c=e.disabled,u=void 0===c?function(){return null}:c,s=e.modal,d=void 0===s?null:s,m=e.onClick,p=e.title,f=e.visible,v=void 0===f?function(){return!0}:f;return{title:r.ag._(p),button:function(e,n){return o(n,e)&&v(e,n)?u(e,n)?i().createElement(l.u,{content:u(e,n),key:r.ag._(p)},i().createElement(a.Button,{variant:t,isDisabled:!0},r.ag._(p))):i().createElement(a.Button,{variant:t,key:r.ag._(p),onClick:function(){return m(e,n)}},r.ag._(p)):null},dropdownItem:function(e,t){return o(t,e)&&v(e,t)?u(e,t)?i().createElement(a.DropdownItem,{key:r.ag._(p),description:u(e,t),isDisabled:!0},r.ag._(p)):i().createElement(a.DropdownItem,{key:r.ag._(p),onClick:function(){return m(e,t)}},r.ag._(p)):null},modal:d,visible:v,disabled:u}},u=n(61647),s=n(6640),d=c({condition:s.rH,title:{id:"ZbLFVx"},onClick:function(e,t){return(0,t.navigate)((0,u.dI)(u.nB.ansibleRemoteEdit,{name:"_"}))}}),m=n(31286),p=n(15751),f=c({condition:s.nm,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,a=e.setState,o=e.state;return o.deleteModalOpen?i().createElement(l.X3,{closeAction:function(){return a({deleteModalOpen:null})},deleteAction:function(){return function(e,t){var n=e.name,a=e.pulpId,o=t.addAlert,i=t.setState,l=t.listQuery;return m.GC.delete(a).then((function(e){var t=e.data;return o((0,p.zT)(t.task,r.ag._({id:"eYzGw4",values:{name:n}}))),i({deleteModalOpen:null}),(0,p.bt)(t.task)})).then((function(){return l()})).catch((0,p.rJ)(r.ag._({id:"7GMpqA",values:{name:n}}),(function(){return null}),o))}(o.deleteModalOpen,{addAlert:t,setState:a,listQuery:n})},name:o.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,a=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.LL)(a),name:n}})}}),v=c({title:{id:"f2gEiZ"},onClick:function(e){var t=e.ca_cert;return(0,p.Qz)(t,"ca_cert")},visible:function(e){return!!e.ca_cert}}),y=c({title:{id:"1bW0sk"},onClick:function(e){var t=e.client_cert;return(0,p.Qz)(t,"client_cert")},visible:function(e){return!!e.client_cert}}),_=c({title:{id:"nAWnrE"},onClick:function(e){var t=e.requirements_file;return(0,p.Qz)(t,"requirements.yml")},visible:function(e){return!!e.requirements_file}}),g=c({condition:s.DQ,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,u.dI)(u.nB.ansibleRemoteEdit,{name:n}))}}),b=n(70885),h=n(42982),E=n(4942);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C,A=function(e){var t=e.addAction,n=e.closeAction,c=e.sourceRepository,u=(0,o.useState)([]),s=(0,b.Z)(u,2),d=s[0],p=s[1],f=(0,o.useState)([]),v=(0,b.Z)(f,2),y=v[0],_=v[1],g=function(){var e=O({},(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params);return e.ordering=e.sort,delete e.sort,m.eq.list(O({},e)).then((function(e){var t=e.data;return{data:{count:t.meta.count,results:t.data}}}))},E=(0,o.useState)({}),k=(0,b.Z)(E,2),C=k[0],A=k[1];return i().createElement(a.Modal,{actions:[i().createElement(a.Button,{key:"confirm",onClick:function(){return t(y)},variant:"primary",isDisabled:!y.length},r.ag._({id:"rG3WVm"})),i().createElement(a.Button,{key:"cancel",onClick:n,variant:"link"},r.ag._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:r.ag._({id:"D9JyS0"}),variant:"large"},i().createElement("section",{className:"modal-body","data-cy":"modal-body"},i().createElement(l.qU,{actionContext:{addAlert:function(e){p([].concat((0,h.Z)(d),[e]))},state:C,setState:A,query:g,hasPermission:function(){throw"unused"}},defaultPageSize:10,defaultSort:"name",errorTitle:r.ag._({id:"GNyQoC"}),filterConfig:[{id:"keywords",title:r.ag._({id:"/n/HCO"})},{id:"namespace",title:r.ag._({id:"wMe2Qp"})},{id:"repository_name",title:r.ag._({id:"IreQBq"})}],noDataDescription:r.ag._({id:"UzlZ+i"}),noDataTitle:r.ag._({id:"Ut02fq"}),query:g,renderTableRow:function(e,t){var n=e.collection_version,r=n.name,o=n.namespace,l=n.version,u=n.description,s=e.repository,d=c.pulp_href===s.pulp_href;return i().createElement("tr",{onClick:function(){return _((t=e,(n=y).find((function(e){var n=e.collection_version,r=e.repository;return n.pulp_href===t.collection_version.pulp_href&&r.pulp_href===t.repository.pulp_href}))?n.filter((function(e){var n=e.collection_version,r=e.repository;return n.pulp_href!==t.collection_version.pulp_href||r.pulp_href!==t.repository.pulp_href})):[].concat((0,h.Z)(n),[t])));var t,n},key:t},i().createElement("td",null,i().createElement(a.Checkbox,{"aria-label":"".concat(o,".").concat(r," v").concat(l),id:"collection-".concat(t),isChecked:d||y.includes(e),name:"collection-".concat(t),isDisabled:d})),i().createElement("td",null,o,".",r," v",l),i().createElement("td",null,u),i().createElement("td",null,s.name))},sortHeaders:[{title:"",type:"none",id:"radio"},{title:r.ag._({id:"q+hNag"}),type:"none",id:"col1"},{title:r.ag._({id:"Nu4oKW"}),type:"none",id:"col2"},{title:r.ag._({id:"IreQBq"}),type:"none",id:"col3"}],title:r.ag._({id:"QGV1gp"})})),i().createElement(l.UW,{alerts:d,closeAlert:function(e){return(0,l.M6)(e,{alerts:d,setAlerts:p})}}))},M=c({condition:s.lo,title:{id:"aoEnJe"},modal:function(e){var t=e.addAlert,n=e.state,a=e.setState,o=e.query;return n.addCollectionVersionModal?i().createElement(A,{addAction:function(e){!function(e,t,n){var a=e.repositoryHref,o=e.repositoryName,i=n.addAlert,l=n.setState,c=n.query,u=(0,p.LL)(a),s=t.map((function(e){return e.collection_version.pulp_href}));m.UX.addContent(u,s).then((function(e){var n=e.data;t.map((function(e){var t=e.collection_version,a=t.name,u=t.namespace,s=t.version,d=e.repository;i((0,p.zT)(n.task,r.ag._({id:"HywrEO",values:{0:d.name,namespace:u,name:a,version:s,repositoryName:o}}))),l((function(e){return O(O({},e),{},{addCollectionVersionModal:null})})),c({})}))})).catch((0,p.rJ)(r.ag._({id:"hQPQZ4",values:{0:t.length,repositoryName:o}}),(function(){return l((function(e){return O(O({},e),{},{addCollectionVersionModal:null})}))}),i))}(n.addCollectionVersionModal,e,{addAlert:t,setState:a,query:o})},closeAction:function(){return a((function(e){return O(O({},e),{},{addCollectionVersionModal:null})}))},sourceRepository:n.repository}):null},onClick:function(e,t){var n=t.state.repository,r=n.name,a=n.pulp_href;return(0,t.setState)((function(e){return O(O({},e),{},{addCollectionVersionModal:{repositoryHref:a,repositoryName:r}})}))}}),S=n(82080),w=function(e){var t=e.name,n=e.namespace,c=e.repositoryName,u=e.version,s=e.closeAction,d=e.deleteAction,m=(0,o.useState)(!1),p=(0,b.Z)(m,2),f=p[0],v=p[1];return t?i().createElement(l.pf,{spinner:f,cancelAction:function(){v(!1),s()},deleteAction:function(){v(!1),d()},isDisabled:f,isRemove:!0,title:r.ag._({id:"t7e8jE"})},i().createElement(a.Text,null,i().createElement(S.cC,{id:"Agq2UM",values:{namespace:n,name:t,version:u,repositoryName:c},components:{0:i().createElement("b",null),1:i().createElement("b",null)}}))):null},P=c({condition:s.lo,title:{id:"t/YqKh"},modal:function(e){var t=e.addAlert,n=e.state,a=e.setState,o=e.query;return n.removeCollectionVersionModal?i().createElement(w,{closeAction:function(){return a({removeCollectionVersionModal:null})},deleteAction:function(){return function(e,t){var n=e.collection,a=n.namespace,o=n.name,i=n.version,l=e.collectionVersionHref,c=e.repositoryHref,u=e.repositoryName,s=t.addAlert,d=t.setState,f=t.query,v=(0,p.LL)(c);return m.UX.removeContent(v,l).then((function(e){var t=e.data;s((0,p.zT)(t.task,r.ag._({id:"cIK9va",values:{namespace:a,name:o,version:i,repositoryName:u}}))),d({removeCollectionVersionModal:null}),f()})).catch((0,p.rJ)(r.ag._({id:"ecxEjo",values:{namespace:a,name:o,version:i,repositoryName:u}}),(function(){return d({removeCollectionVersionModal:null})}),s))}(n.removeCollectionVersionModal,{addAlert:t,setState:a,query:o})},name:n.removeCollectionVersionModal.collection.name,namespace:n.removeCollectionVersionModal.collection.namespace,repositoryName:n.removeCollectionVersionModal.repositoryName,version:n.removeCollectionVersionModal.collection.version}):null},onClick:function(e,t){var n=e.collection_version,r=n.namespace,a=n.name,o=n.version,i=n.pulp_href,l=e.repository,c=l.name,u=l.pulp_href;return(0,t.setState)({removeCollectionVersionModal:{collection:{namespace:r,name:a,version:o},repositoryName:c,repositoryHref:u,collectionVersionHref:i}})}}),q=n(15861),j=n(64687),N=n.n(j),D=c({title:{id:"5wEn9x"},onClick:(C=(0,q.Z)(N().mark((function e(t,n){var a,o,l;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.addAlert,o=null,t.distroBasePath){e.next=9;break}return a({id:"copy-cli-config",title:r.ag._({id:"O/Dt81"}),variant:"info"}),e.next=6,(0,p.YH)(t.name,t.pulp_href).catch((function(){return null}));case 6:o=e.sent,e.next=10;break;case 9:o=t.distroBasePath;case 10:if(o){e.next=13;break}return a({id:"copy-cli-config",title:r.ag._({id:"bqNryO"}),variant:"danger"}),e.abrupt("return");case 13:l=["[galaxy]","server_list = ".concat(o),"","[galaxy_server.".concat(o,"]"),"url=".concat((0,p.hv)(o)),"token=<put your token here>"].join("\n"),navigator.clipboard.writeText(l),a({description:i().createElement("pre",null,l),id:"copy-cli-config",title:r.ag._({id:"ORamYR"}),variant:"success"});case 16:case"end":return e.stop()}}),e)}))),function(e,t){return C.apply(this,arguments)}),disabled:function(e){return"distroBasePath"in e&&!e.distroBasePath?r.ag._({id:"bqNryO"}):null}}),V=c({condition:s.zN,title:{id:"Czn04i"},onClick:function(e,t){return(0,t.navigate)((0,u.dI)(u.nB.ansibleRepositoryEdit,{name:"_"}))}}),z=n(42807),I=c({condition:s.Xn,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,r=e.setState,a=e.state;return a.deleteModalOpen?i().createElement(l.Iq,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){return L.apply(this,arguments)}(a.deleteModalOpen,{addAlert:t,listQuery:n,setState:r})},name:a.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,a=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.LL)(a),name:n,pulp_href:a}})},disabled:function(e){var t=e.name;return z.g.PROTECTED_REPOSITORIES.includes(t)?r.ag._({id:"G8qmOx"}):null}});function L(){return(L=(0,q.Z)(N().mark((function e(t,n){var a,o,i,l,c,u,s,d,f;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,o=t.pulp_href,i=t.pulpId,l=n.addAlert,c=n.setState,u=n.listQuery,e.next=4,m.Lj.list({repository:o,page:1,page_size:100}).then((function(e){return e.data.results||[]})).catch((function(e){return(0,p.rJ)(r.ag._({id:"fSg4cw"}),(function(){return null}),l)(e),[]}));case 4:return s=e.sent,d=m.UX.delete(i).then((function(e){var t=e.data;return l((0,p.zT)(t.task,r.ag._({id:"I9erLk",values:{name:a}}))),(0,p.bt)(t.task)})).catch((0,p.rJ)(r.ag._({id:"YRWr1H",values:{name:a}}),(function(){return c({deleteModalOpen:null})}),l)),f=function(e){var t=e.name,n=e.pulp_href,a=(0,p.LL)(n);return m.Lj.delete(a).then((function(e){var n=e.data;return l((0,p.zT)(n.task,r.ag._({id:"Hiczol",values:{name:t}}))),(0,p.bt)(n.task)})).catch((0,p.rJ)(r.ag._({id:"bO1/oq",values:{name:t}}),(function(){return null}),l))},e.abrupt("return",Promise.all([d].concat((0,h.Z)(s.map(f)))).then((function(){c({deleteModalOpen:null}),u()})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=c({condition:s.lo,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,u.dI)(u.nB.ansibleRepositoryEdit,{name:n}))}}),x=n(62012);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t=e.closeAction,n=e.syncAction,c=e.name,u=(0,o.useState)(!1),s=(0,b.Z)(u,2),d=s[0],m=s[1],p=(0,o.useState)({mirror:!0,optimize:!0}),f=(0,b.Z)(p,2),v=f[0],y=f[1];return(0,o.useEffect)((function(){m(!1),y({mirror:!0,optimize:!0})}),[c]),c?i().createElement(a.Modal,{actions:[i().createElement("div",{"data-cy":"sync-button",key:"sync"},i().createElement(a.Button,{key:"sync",onClick:function(){m(!0),n(v).then(t).finally((function(){return m(!1)}))},variant:"primary",isDisabled:d},r.ag._({id:"Nu4DdT"}),d&&i().createElement(a.Spinner,{size:"sm"}))),i().createElement(a.Button,{key:"close",onClick:t,variant:"link"},r.ag._({id:"yz7wBu"}))],isOpen:!0,onClose:t,title:r.ag._({id:"ZkyFE9",values:{name:c}}),variant:"medium"},i().createElement(a.FormGroup,{label:r.ag._({id:"xl5v4T"}),labelIcon:i().createElement(l.p6,{content:r.ag._({id:"xGK5PA"})})},i().createElement(a.Switch,{isChecked:v.mirror,onChange:function(e){return y(Z(Z({},v),{},{mirror:e}))},label:r.ag._({id:"CXfJAw"}),labelOff:r.ag._({id:"JcAyYr"})})),i().createElement("br",null),i().createElement(a.FormGroup,{label:r.ag._({id:"MLeMRw"}),labelIcon:i().createElement(l.p6,{content:r.ag._({id:"Wongkv"})})},i().createElement(a.Switch,{isChecked:v.optimize,onChange:function(e){return y(Z(Z({},v),{},{optimize:e}))},label:r.ag._({id:"t/j6qO"}),labelOff:r.ag._({id:"4KZ64/"})})),i().createElement("br",null)):null},H=c({condition:s.vn,title:{id:"Nu4DdT"},modal:function(e){var t=e.addAlert,n=e.query,a=e.setState,o=e.state;return o.syncModalOpen?i().createElement(T,{closeAction:function(){return a({syncModalOpen:null})},syncAction:function(e){return function(e,t,n){var a=e.name,o=e.pulp_href,i=t.addAlert,l=t.query,c=(0,p.LL)(o);return m.UX.sync(c,n||{mirror:!0}).then((function(e){var t=e.data;i((0,p.zT)(t.task,r.ag._({id:"LN/UXA",values:{name:a}}))),l()})).catch((0,p.rJ)(r.ag._({id:"HFnbWa",values:{name:a}}),(function(){return null}),i))}(o.syncModalOpen,{addAlert:t,query:n},e)},name:o.syncModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.pulp_href;return(0,t.setState)({syncModalOpen:{name:n,pulp_href:r}})},visible:function(e,t){return(0,t.hasPermission)("ansible.change_collectionremote")},disabled:function(e){var t=e.remote,n=e.last_sync_task;if(!t)return r.ag._({id:"CtFEEh"});if(n&&["running","waiting"].includes(n.state))return r.ag._({id:"wjw99g"});if(t&&"https://galaxy.ansible.com/api/"===t.url){var a=t.name,o=(0,u.dI)(u.nB.ansibleRemoteEdit,{name:a});if(!t.requirements_file)return i().createElement(S.cC,{id:"/Ro7TR",values:{name:a},components:{0:i().createElement(x.Link,{to:o})}});if(t.signed_only)return i().createElement(S.cC,{id:"jeIRua",values:{name:a},components:{0:i().createElement(x.Link,{to:o})}})}return null}}),Q=function(e){var t=e.version,n=e.cancelAction,l=e.revertAction,c=(0,o.useState)(!1),u=(0,b.Z)(c,2),s=u[0],d=u[1];return i().createElement(a.Modal,{actions:[i().createElement("div",{"data-cy":"delete-button",key:"delete"},i().createElement(a.Button,{key:"delete",onClick:function(){d(!0),l()},variant:"danger",isDisabled:s},r.ag._({id:"jJdwCB"}),s&&i().createElement(a.Spinner,{size:"sm"}))),i().createElement(a.Button,{key:"cancel",onClick:n,variant:"link"},r.ag._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:r.ag._({id:"pbfHgy"}),titleIconVariant:"warning",variant:"small","data-cy":"modal_checkbox"},i().createElement(S.cC,{id:"8N1g3s"}),i().createElement("br",null),i().createElement("b",null,t))},J=c({condition:s.Wt,title:{id:"Zo7Ryi"},modal:function(e){var t=e.addAlert,n=e.state,a=e.setState,o=e.query;return n.revertModal?i().createElement(Q,{cancelAction:function(){return a({revertModal:null})},revertAction:function(){return function(e,t){var n=e.repositoryName,a=e.pulp_href,o=e.number,i=t.addAlert,l=t.setState,c=t.query,u=(0,p.LL)(a);return m.UX.revert(u,a).then((function(e){var t=e.data;i((0,p.zT)(t.task,r.ag._({id:"n9spVP",values:{repositoryName:n}}))),l({revertModal:null}),c()})).catch((0,p.rJ)(r.ag._({id:"VfVFE7",values:{repositoryName:n,number:o}}),(function(){return l({revertModal:null})}),i))}(n.revertModal,{addAlert:t,setState:a,query:o})},version:n.revertModal.number}):null},onClick:function(e,t){var n=e.repositoryName,r=e.number,a=e.pulp_href;return(0,t.setState)({revertModal:{repositoryName:n,number:r,pulp_href:a}})},disabled:function(e){return e.isLatest?r.ag._({id:"0WOjYo"}):null}})},6640:(e,t,n)=>{n.d(t,{DQ:()=>l,MT:()=>c,Wt:()=>y,X0:()=>v,Xn:()=>d,fY:()=>f,lo:()=>m,nm:()=>i,rH:()=>o,vn:()=>p,yA:()=>u,zN:()=>s});var r=function(e){return function(t){var n=t.hasPermission,r=t.user;return n(e)||(null==r?void 0:r.is_superuser)}},a=function(e){return function(t,n){var r=t.hasPermission,a=t.hasObjectPermission,o=t.user;return r(e)||(null==a?void 0:a(e,n))||(null==o?void 0:o.is_superuser)}},o=r("ansible.add_collectionremote"),i=a("ansible.delete_collectionremote"),l=a("ansible.change_collectionremote"),c=a("ansible.view_collectionremote"),u=a("ansible.manage_roles_collectionremote"),s=r("ansible.add_ansiblerepository"),d=a("ansible.delete_ansiblerepository"),m=a("ansible.change_ansiblerepository"),p=m,f=function(e){var t=e.user,n=e.featureFlags;return t&&(null==n?void 0:n.display_repositories)},v=a("ansible.manage_roles_ansiblerepository"),y=m}}]);
//# sourceMappingURL=../sourcemaps/1811.658c1d2d14ae5d9e50ebe1449fc1e907.js.map