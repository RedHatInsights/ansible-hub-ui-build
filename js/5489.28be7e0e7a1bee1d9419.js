"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[5489],{35489:(e,t,n)=>{n.d(t,{rq:()=>d,Ql:()=>f,$Q:()=>v,Uv:()=>y,Zb:()=>_,Zl:()=>b,Oz:()=>C,$6:()=>w,i6:()=>P,X1:()=>x,Kf:()=>V,Bq:()=>z,_F:()=>G,Th:()=>Y});var r=n(47712),i=n(85889),o=n(44914),a=n.n(o),l=n(90593),c=function(e){var t=e.buttonVariant,n=e.condition,o=void 0===n?function(){return!0}:n,c=e.disabled,u=void 0===c?function(){return null}:c,s=e.modal,d=void 0===s?null:s,m=e.onClick,p=e.title,f=e.visible,v=void 0===f?function(){return!0}:f;return{title:r.Ru._(p),button:function(e,n){return o(n,e)&&v(e,n)?u(e,n)?a().createElement(l.m_,{content:u(e,n),key:r.Ru._(p)},a().createElement(i.Button,{variant:t,isDisabled:!0},r.Ru._(p))):a().createElement(i.Button,{variant:t,key:r.Ru._(p),onClick:function(){return m(e,n)}},r.Ru._(p)):null},dropdownItem:function(e,t){return o(t,e)&&v(e,t)?u(e,t)?a().createElement(i.DropdownItem,{key:r.Ru._(p),description:u(e,t),isDisabled:!0},r.Ru._(p)):a().createElement(i.DropdownItem,{key:r.Ru._(p),onClick:function(){return m(e,t)}},r.Ru._(p)):null},modal:d,visible:v,disabled:u}},u=n(60165),s=n(5093),d=c({condition:s.u9,title:{id:"ZbLFVx"},onClick:function(e,t){return(0,t.navigate)((0,u.jV)(u.Jh.ansibleRemoteEdit,{name:"_"}))}}),m=n(88756),p=n(75841),f=c({condition:s.Sq,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,i=e.setState,o=e.state;return o.deleteModalOpen?a().createElement(l.jP,{closeAction:function(){return i({deleteModalOpen:null})},deleteAction:function(){return function(e,t){var n=e.name,i=e.pulpId,o=t.addAlert,a=t.setState,l=t.listQuery;return m.DY.delete(i).then((function(e){var t=e.data;return o((0,p.Oz)(t.task,r.Ru._({id:"eYzGw4",values:{name:n}}))),a({deleteModalOpen:null}),(0,p.RN)(t.task)})).then((function(){return l()})).catch((0,p.tv)(r.Ru._({id:"7GMpqA",values:{name:n}}),(function(){return null}),o))}(o.deleteModalOpen,{addAlert:t,setState:i,listQuery:n})},name:o.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,i=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.dx)(i),name:n}})}}),v=c({title:{id:"f2gEiZ"},onClick:function(e){var t=e.ca_cert;return(0,p.YN)(t,"ca_cert")},visible:function(e){return!!e.ca_cert}}),y=c({title:{id:"1bW0sk"},onClick:function(e){var t=e.client_cert;return(0,p.YN)(t,"client_cert")},visible:function(e){return!!e.client_cert}}),_=c({title:{id:"nAWnrE"},onClick:function(e){var t=e.requirements_file;return(0,p.YN)(t,"requirements.yml")},visible:function(e){return!!e.requirements_file}}),b=c({condition:s.Xb,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,u.jV)(u.Jh.ansibleRemoteEdit,{name:n}))}}),h=n(80296),E=n(45458),R=n(64467);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,R.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A,g=function(e){var t=e.addAction,n=e.closeAction,c=e.sourceRepository,u=(0,o.useState)([]),s=(0,h.A)(u,2),d=s[0],p=s[1],f=(0,o.useState)([]),v=(0,h.A)(f,2),y=v[0],_=v[1],b=function(){var e=O({},(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params);return e.ordering=e.sort,delete e.sort,m.R4.list(O({},e)).then((function(e){var t=e.data;return{data:{count:t.meta.count,results:t.data}}}))},R=(0,o.useState)({}),k=(0,h.A)(R,2),A=k[0],g=k[1];return a().createElement(i.Modal,{actions:[a().createElement(i.Button,{key:"confirm",onClick:function(){return t(y)},variant:"primary",isDisabled:!y.length},r.Ru._({id:"rG3WVm"})),a().createElement(i.Button,{key:"cancel",onClick:n,variant:"link"},r.Ru._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:r.Ru._({id:"D9JyS0"}),variant:"large"},a().createElement("section",{className:"modal-body","data-cy":"modal-body"},a().createElement(l.cJ,{actionContext:{addAlert:function(e){p([].concat((0,E.A)(d),[e]))},state:A,setState:g,query:b,hasPermission:function(){throw"unused"}},defaultPageSize:10,defaultSort:"name",errorTitle:r.Ru._({id:"GNyQoC"}),filterConfig:[{id:"keywords",title:r.Ru._({id:"/n/HCO"})},{id:"namespace",title:r.Ru._({id:"wMe2Qp"})},{id:"repository_name",title:r.Ru._({id:"IreQBq"})}],noDataDescription:r.Ru._({id:"UzlZ+i"}),noDataTitle:r.Ru._({id:"Ut02fq"}),query:b,renderTableRow:function(e,t){var n=e.collection_version,r=n.name,o=n.namespace,l=n.version,u=n.description,s=e.repository,d=c.pulp_href===s.pulp_href;return a().createElement("tr",{onClick:function(){return _((t=e,(n=y).find((function(e){var n=e.collection_version,r=e.repository;return n.pulp_href===t.collection_version.pulp_href&&r.pulp_href===t.repository.pulp_href}))?n.filter((function(e){var n=e.collection_version,r=e.repository;return n.pulp_href!==t.collection_version.pulp_href||r.pulp_href!==t.repository.pulp_href})):[].concat((0,E.A)(n),[t])));var t,n},key:t},a().createElement("td",null,a().createElement(i.Checkbox,{"aria-label":"".concat(o,".").concat(r," v").concat(l),id:"collection-".concat(t),isChecked:d||y.includes(e),name:"collection-".concat(t),isDisabled:d})),a().createElement("td",null,o,".",r," v",l),a().createElement("td",null,u),a().createElement("td",null,s.name))},sortHeaders:[{title:"",type:"none",id:"radio"},{title:r.Ru._({id:"q+hNag"}),type:"none",id:"col1"},{title:r.Ru._({id:"Nu4oKW"}),type:"none",id:"col2"},{title:r.Ru._({id:"IreQBq"}),type:"none",id:"col3"}],title:r.Ru._({id:"QGV1gp"})})),a().createElement(l.NS,{alerts:d,closeAlert:function(e){return(0,l.R$)(e,{alerts:d,setAlerts:p})}}))},C=c({condition:s.Bf,title:{id:"aoEnJe"},modal:function(e){var t=e.addAlert,n=e.state,i=e.setState,o=e.query;return n.addCollectionVersionModal?a().createElement(g,{addAction:function(e){!function(e,t,n){var i=e.repositoryHref,o=e.repositoryName,a=n.addAlert,l=n.setState,c=n.query,u=(0,p.dx)(i),s=t.map((function(e){return e.collection_version.pulp_href}));m.Xj.addContent(u,s).then((function(e){var n=e.data;t.map((function(e){var t=e.collection_version,i=t.name,u=t.namespace,s=t.version,d=e.repository;a((0,p.Oz)(n.task,r.Ru._({id:"HywrEO",values:{0:d.name,namespace:u,name:i,version:s,repositoryName:o}}))),l((function(e){return O(O({},e),{},{addCollectionVersionModal:null})})),c({})}))})).catch((0,p.tv)(r.Ru._({id:"hQPQZ4",values:{0:t.length,repositoryName:o}}),(function(){return l((function(e){return O(O({},e),{},{addCollectionVersionModal:null})}))}),a))}(n.addCollectionVersionModal,e,{addAlert:t,setState:i,query:o})},closeAction:function(){return i((function(e){return O(O({},e),{},{addCollectionVersionModal:null})}))},sourceRepository:n.repository}):null},onClick:function(e,t){var n=t.state.repository,r=n.name,i=n.pulp_href;return(0,t.setState)((function(e){return O(O({},e),{},{addCollectionVersionModal:{repositoryHref:i,repositoryName:r}})}))}}),M=n(42328),S=function(e){var t=e.name,n=e.namespace,c=e.repositoryName,u=e.version,s=e.closeAction,d=e.deleteAction,m=(0,o.useState)(!1),p=(0,h.A)(m,2),f=p[0],v=p[1];return t?a().createElement(l.T6,{spinner:f,cancelAction:function(){v(!1),s()},deleteAction:function(){v(!1),d()},isDisabled:f,isRemove:!0,title:r.Ru._({id:"t7e8jE"})},a().createElement(i.Text,null,a().createElement(M.x6,{id:"Agq2UM",values:{namespace:n,name:t,version:u,repositoryName:c},components:{0:a().createElement("b",null),1:a().createElement("b",null)}}))):null},w=c({condition:s.Bf,title:{id:"t/YqKh"},modal:function(e){var t=e.addAlert,n=e.state,i=e.setState,o=e.query;return n.removeCollectionVersionModal?a().createElement(S,{closeAction:function(){return i({removeCollectionVersionModal:null})},deleteAction:function(){return function(e,t){var n=e.collection,i=n.namespace,o=n.name,a=n.version,l=e.collectionVersionHref,c=e.repositoryHref,u=e.repositoryName,s=t.addAlert,d=t.setState,f=t.query,v=(0,p.dx)(c);return m.Xj.removeContent(v,l).then((function(e){var t=e.data;s((0,p.Oz)(t.task,r.Ru._({id:"cIK9va",values:{namespace:i,name:o,version:a,repositoryName:u}}))),d({removeCollectionVersionModal:null}),f()})).catch((0,p.tv)(r.Ru._({id:"ecxEjo",values:{namespace:i,name:o,version:a,repositoryName:u}}),(function(){return d({removeCollectionVersionModal:null})}),s))}(n.removeCollectionVersionModal,{addAlert:t,setState:i,query:o})},name:n.removeCollectionVersionModal.collection.name,namespace:n.removeCollectionVersionModal.collection.namespace,repositoryName:n.removeCollectionVersionModal.repositoryName,version:n.removeCollectionVersionModal.collection.version}):null},onClick:function(e,t){var n=e.collection_version,r=n.namespace,i=n.name,o=n.version,a=n.pulp_href,l=e.repository,c=l.name,u=l.pulp_href;return(0,t.setState)({removeCollectionVersionModal:{collection:{namespace:r,name:i,version:o},repositoryName:c,repositoryHref:u,collectionVersionHref:a}})}}),j=n(10467),N=n(54756),q=n.n(N),P=c({title:{id:"5wEn9x"},onClick:(A=(0,j.A)(q().mark((function e(t,n){var i,o,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.addAlert,o=null,t.distroBasePath){e.next=9;break}return i({id:"copy-cli-config",title:r.Ru._({id:"O/Dt81"}),variant:"info"}),e.next=6,(0,p.Jh)(t.name,t.pulp_href).catch((function(){return null}));case 6:o=e.sent,e.next=10;break;case 9:o=t.distroBasePath;case 10:if(o){e.next=13;break}return i({id:"copy-cli-config",title:r.Ru._({id:"bqNryO"}),variant:"danger"}),e.abrupt("return");case 13:l=["[galaxy]","server_list = ".concat(o),"","[galaxy_server.".concat(o,"]"),"url=".concat((0,p.k9)(o)),"token=<put your token here>"].join("\n"),navigator.clipboard.writeText(l),i({description:a().createElement("pre",null,l),id:"copy-cli-config",title:r.Ru._({id:"ORamYR"}),variant:"success"});case 16:case"end":return e.stop()}}),e)}))),function(e,t){return A.apply(this,arguments)}),disabled:function(e){return"distroBasePath"in e&&!e.distroBasePath?r.Ru._({id:"bqNryO"}):null}}),x=c({condition:s.QZ,title:{id:"Czn04i"},onClick:function(e,t){return(0,t.navigate)((0,u.jV)(u.Jh.ansibleRepositoryEdit,{name:"_"}))}}),V=c({condition:s._9,title:{id:"cnGeoo"},modal:function(e){var t=e.addAlert,n=e.listQuery,r=e.setState,i=e.state;return i.deleteModalOpen?a().createElement(l.N1,{closeAction:function(){return r({deleteModalOpen:null})},deleteAction:function(){return function(e,t){return D.apply(this,arguments)}(i.deleteModalOpen,{addAlert:t,listQuery:n,setState:r})},name:i.deleteModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.id,i=e.pulp_href;return(0,t.setState)({deleteModalOpen:{pulpId:r||(0,p.dx)(i),name:n,pulp_href:i}})},disabled:function(e){var t=e.name;return["rh-certified","validated","community","published","staging","rejected"].includes(t)?r.Ru._({id:"G8qmOx"}):null}});function D(){return(D=(0,j.A)(q().mark((function e(t,n){var i,o,a,l,c,u,s,d,f;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,o=t.pulp_href,a=t.pulpId,l=n.addAlert,c=n.setState,u=n.listQuery,e.next=4,m.zg.list({repository:o,page:1,page_size:100}).then((function(e){return e.data.results||[]})).catch((function(e){return(0,p.tv)(r.Ru._({id:"fSg4cw"}),(function(){return null}),l)(e),[]}));case 4:return s=e.sent,d=m.Xj.delete(a).then((function(e){var t=e.data;return l((0,p.Oz)(t.task,r.Ru._({id:"I9erLk",values:{name:i}}))),(0,p.RN)(t.task)})).catch((0,p.tv)(r.Ru._({id:"YRWr1H",values:{name:i}}),(function(){return c({deleteModalOpen:null})}),l)),f=function(e){var t=e.name,n=e.pulp_href,i=(0,p.dx)(n);return m.zg.delete(i).then((function(e){var n=e.data;return l((0,p.Oz)(n.task,r.Ru._({id:"Hiczol",values:{name:t}}))),(0,p.RN)(n.task)})).catch((0,p.tv)(r.Ru._({id:"bO1/oq",values:{name:t}}),(function(){return null}),l))},e.abrupt("return",Promise.all([d].concat((0,E.A)(s.map(f)))).then((function(){c({deleteModalOpen:null}),u()})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=c({condition:s.Bf,title:{id:"ePK91l"},onClick:function(e,t){var n=e.name;return(0,t.navigate)((0,u.jV)(u.Jh.ansibleRepositoryEdit,{name:n}))}}),B=n(49634);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,R.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.closeAction,n=e.syncAction,c=e.name,u=(0,o.useState)(!1),s=(0,h.A)(u,2),d=s[0],m=s[1],p=(0,o.useState)({mirror:!0,optimize:!0}),f=(0,h.A)(p,2),v=f[0],y=f[1];return(0,o.useEffect)((function(){m(!1),y({mirror:!0,optimize:!0})}),[c]),c?a().createElement(i.Modal,{actions:[a().createElement("div",{"data-cy":"sync-button",key:"sync"},a().createElement(i.Button,{key:"sync",onClick:function(){m(!0),n(v).then(t).finally((function(){return m(!1)}))},variant:"primary",isDisabled:d},r.Ru._({id:"Nu4DdT"}),d&&a().createElement(i.Spinner,{size:"sm"}))),a().createElement(i.Button,{key:"close",onClick:t,variant:"link"},r.Ru._({id:"yz7wBu"}))],isOpen:!0,onClose:t,title:r.Ru._({id:"ZkyFE9",values:{name:c}}),variant:"medium"},a().createElement(i.FormGroup,{label:r.Ru._({id:"xl5v4T"}),labelIcon:a().createElement(l.EE,{content:r.Ru._({id:"xGK5PA"})})},a().createElement(i.Switch,{isChecked:v.mirror,onChange:function(e){return y(H(H({},v),{},{mirror:e}))},label:r.Ru._({id:"CXfJAw"}),labelOff:r.Ru._({id:"JcAyYr"})})),a().createElement("br",null),a().createElement(i.FormGroup,{label:r.Ru._({id:"MLeMRw"}),labelIcon:a().createElement(l.EE,{content:r.Ru._({id:"GA4EFU"})})},a().createElement(i.Switch,{isChecked:v.optimize,onChange:function(e){return y(H(H({},v),{},{optimize:e}))},label:r.Ru._({id:"QksU5X"}),labelOff:r.Ru._({id:"4KZ64/"})})),a().createElement("br",null)):null},G=c({condition:s.wY,title:{id:"Nu4DdT"},modal:function(e){var t=e.addAlert,n=e.query,i=e.setState,o=e.state;return o.syncModalOpen?a().createElement(I,{closeAction:function(){return i({syncModalOpen:null})},syncAction:function(e){return function(e,t,n){var i=e.name,o=e.pulp_href,a=t.addAlert,l=t.query,c=(0,p.dx)(o);return m.Xj.sync(c,n||{mirror:!0}).then((function(e){var t=e.data;a((0,p.Oz)(t.task,r.Ru._({id:"LN/UXA",values:{name:i}}))),l()})).catch((0,p.tv)(r.Ru._({id:"HFnbWa",values:{name:i}}),(function(){return null}),a))}(o.syncModalOpen,{addAlert:t,query:n},e)},name:o.syncModalOpen.name}):null},onClick:function(e,t){var n=e.name,r=e.pulp_href;return(0,t.setState)({syncModalOpen:{name:n,pulp_href:r}})},visible:function(e,t){return(0,t.hasPermission)("ansible.change_collectionremote")},disabled:function(e){var t=e.remote,n=e.last_sync_task;if(!t)return r.Ru._({id:"CtFEEh"});if(n&&["running","waiting"].includes(n.state))return r.Ru._({id:"wjw99g"});if(t&&"https://galaxy.ansible.com/api/"===t.url){var i=t.name,o=(0,u.jV)(u.Jh.ansibleRemoteEdit,{name:i});if(!t.requirements_file)return a().createElement(M.x6,{id:"/Ro7TR",values:{name:i},components:{0:a().createElement(B.Link,{to:o})}});if(t.signed_only)return a().createElement(M.x6,{id:"jeIRua",values:{name:i},components:{0:a().createElement(B.Link,{to:o})}})}return null}}),J=function(e){var t=e.version,n=e.cancelAction,l=e.revertAction,c=(0,o.useState)(!1),u=(0,h.A)(c,2),s=u[0],d=u[1];return a().createElement(i.Modal,{actions:[a().createElement("div",{"data-cy":"delete-button",key:"delete"},a().createElement(i.Button,{key:"delete",onClick:function(){d(!0),l()},variant:"danger",isDisabled:s},r.Ru._({id:"jJdwCB"}),s&&a().createElement(i.Spinner,{size:"sm"}))),a().createElement(i.Button,{key:"cancel",onClick:n,variant:"link"},r.Ru._({id:"dEgA5A"}))],isOpen:!0,onClose:n,title:r.Ru._({id:"pbfHgy"}),titleIconVariant:"warning",variant:"small","data-cy":"modal_checkbox"},a().createElement(M.x6,{id:"8N1g3s"}),a().createElement("br",null),a().createElement("b",null,t))},Y=c({condition:s.hB,title:{id:"Zo7Ryi"},modal:function(e){var t=e.addAlert,n=e.state,i=e.setState,o=e.query;return n.revertModal?a().createElement(J,{cancelAction:function(){return i({revertModal:null})},revertAction:function(){return function(e,t){var n=e.repositoryName,i=e.pulp_href,o=e.number,a=t.addAlert,l=t.setState,c=t.query,u=(0,p.dx)(i);return m.Xj.revert(u,i).then((function(e){var t=e.data;a((0,p.Oz)(t.task,r.Ru._({id:"n9spVP",values:{repositoryName:n}}))),l({revertModal:null}),c()})).catch((0,p.tv)(r.Ru._({id:"VfVFE7",values:{repositoryName:n,number:o}}),(function(){return l({revertModal:null})}),a))}(n.revertModal,{addAlert:t,setState:i,query:o})},version:n.revertModal.number}):null},onClick:function(e,t){var n=e.repositoryName,r=e.number,i=e.pulp_href;return(0,t.setState)({revertModal:{repositoryName:n,number:r,pulp_href:i}})},disabled:function(e){return e.isLatest?r.Ru._({id:"0WOjYo"}):null}})},5093:(e,t,n)=>{n.d(t,{$w:()=>u,Bf:()=>m,Fs:()=>v,QZ:()=>s,Sq:()=>a,Xb:()=>l,_9:()=>d,hB:()=>y,k3:()=>f,re:()=>c,u9:()=>o,wY:()=>p});var r=function(e){return function(t){var n=t.hasPermission,r=t.user;return n(e)||(null==r?void 0:r.is_superuser)}},i=function(e){return function(t,n){var r=t.hasPermission,i=t.hasObjectPermission,o=t.user;return r(e)||(null==i?void 0:i(e,n))||(null==o?void 0:o.is_superuser)}},o=r("ansible.add_collectionremote"),a=i("ansible.delete_collectionremote"),l=i("ansible.change_collectionremote"),c=i("ansible.view_collectionremote"),u=i("ansible.manage_roles_collectionremote"),s=r("ansible.add_ansiblerepository"),d=i("ansible.delete_ansiblerepository"),m=i("ansible.change_ansiblerepository"),p=m,f=function(e){var t=e.user,n=e.featureFlags;return t&&(null==n?void 0:n.display_repositories)},v=i("ansible.manage_roles_ansiblerepository"),y=m}}]);
//# sourceMappingURL=../sourcemaps/5489.afdb68527dc32c53c4bc2e11af65b68a.js.map