"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[3159],{63159:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var n=t(52536),l=t(72956),r=t(18232),s=t.n(r),o=t(47492),u=t(59072),i=t(49368),c=t(32004),d=t(24760),m=t(58860),v=t(98920),_=function(e){var a=e.item,t=e.actionContext,n=t.addAlert,o=t.featureFlags,_=t.hasPermission,p=t.state.params,f=t.user,b=(null==a?void 0:a.pulp_href)&&(0,m.oL)(a.pulp_href),h=(0,r.useState)(null==a?void 0:a.name),R=(0,v.c)(h,2),E=R[0],S=R[1],g=(0,r.useState)(null),w=(0,v.c)(g,2),k=w[0],y=w[1],O=(0,r.useState)(null),U=(0,v.c)(O,2),P=U[0],j=U[1],F=(0,r.useState)(!1),C=(0,v.c)(F,2),z=C[0],D=C[1],W=(0,r.useState)(null),x=(0,v.c)(W,2),M=x[0],G=x[1],A=(0,r.useState)(null),Q=(0,v.c)(A,2),Y=Q[0],L=Q[1],T=(0,r.useState)(null),B=(0,v.c)(T,2),H=B[0],I=B[1],q=(0,r.useState)(null),K=(0,v.c)(q,2),J=K[0],V=K[1],N=(0,r.useState)(null),X=(0,v.c)(N,2),Z=X[0],$=X[1],ee=(0,r.useState)(null),ae=(0,v.c)(ee,2),te=ae[0],ne=ae[1],le=(0,r.useState)(null),re=(0,v.c)(le,2),se=re[0],oe=re[1],ue=(0,r.useState)(null),ie=(0,v.c)(ue,2),ce=ie[0],de=ie[1],me=function(){j(null),y(null),u.E3.myPermissions(b).then((function(e){var a=e.data.permissions;D((0,d.Yf)({hasPermission:_,hasObjectPermission:function(e){return a.includes(e)},user:f,featureFlags:o})),u.E3.listRoles(b,{page_size:100}).then((function(e){var a=e.data.roles,t=(0,m.KM)(a),n=t.users,l=t.groups;S(E),j(n),y(l)})).catch((function(){j([]),y([])}))})).catch((function(){j([]),y([]),D(!1)}))},ve=function(e){var a=e.roles,t=e.alertSuccess,l=e.alertFailure,r=e.stateUpdate;Promise.all(a).then((function(){n({title:t,variant:"success"}),me()})).catch((function(e){var a=e.response,t=a.status,r=a.statusText;n({title:l,variant:"danger",description:(0,m._A)(t,r)})})).finally((function(){_e(r)}))},_e=function(e){Object.entries(e).forEach((function(e){var a=(0,v.c)(e,2),t=a[0],n=a[1];switch(t){case"showUserRemoveModal":I(n);break;case"showUserSelectWizard":V(n);break;case"showGroupRemoveModal":$(n);break;case"showGroupSelectWizard":ne(n);break;case"showRoleRemoveModal":oe(n);break;case"showRoleSelectWizard":de(n);break;default:console.error("updateProps",t,n)}}))};return(0,r.useEffect)(me,[a.pulp_href]),(0,r.useEffect)((function(){P&&(null!=p&&p.user?u.Qv.list({username:p.user}).then((function(e){var a=e.data.data;L(P.find((function(e){return e.username===a[0].username})))})):L(null))}),[null==p?void 0:p.user,P]),(0,r.useEffect)((function(){k&&(null!=p&&p.group?u.gH.list({name:p.group}).then((function(e){var a=e.data.data;G(k.find((function(e){return e.name===a[0].name})))})):G(null))}),[null==p?void 0:p.group,k]),s().createElement(i.sF,{addGroup:function(e,a){var t=a.map((function(a){return u.E3.addRole(b,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:l._s._({id:"lylrvu",values:{0:e.name,name:E}}),alertFailure:l._s._({id:"9/YKZd",values:{0:e.name,name:E}}),stateUpdate:{showGroupSelectWizard:null}})},addRole:function(e,a){var t=a.map((function(a){return u.E3.addRole(b,{role:a.name,groups:[e.name]})}));ve({roles:t,alertSuccess:l._s._({id:"svLSRe",values:{0:e.name,name:E}}),alertFailure:l._s._({id:"eeQk9h",values:{0:e.name,name:E}}),stateUpdate:{showRoleSelectWizard:null}})},addUser:function(e,a){var t=a.map((function(a){return u.E3.addRole(b,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:l._s._({id:"J7EvK0",values:{0:e.username,name:E}}),alertFailure:l._s._({id:"0P+eGj",values:{0:e.username,name:E}}),stateUpdate:{showUserSelectWizard:null}})},addUserRole:function(e,a){var t=a.map((function(a){return u.E3.addRole(b,{role:a.name,users:[e.username]})}));ve({roles:t,alertSuccess:l._s._({id:"ifVlo4",values:{0:e.username,name:E}}),alertFailure:l._s._({id:"xJC6dy",values:{0:e.username,name:E}}),stateUpdate:{showRoleSelectWizard:null}})},canEditOwners:z,group:M,groups:k,name:E,pulpObjectType:"remotes/ansible/collection",removeGroup:function(e){var a=e.object_roles.map((function(a){return u.E3.removeRole(b,{role:a,groups:[e.name]})}));ve({roles:a,alertSuccess:l._s._({id:"94LxzI",values:{0:e.name,name:E}}),alertFailure:l._s._({id:"j17tAi",values:{0:e.name,name:E}}),stateUpdate:{showGroupRemoveModal:null}})},removeRole:function(e,a){var t=u.E3.removeRole(b,{role:e,groups:[a.name]});ve({roles:[t],alertSuccess:l._s._({id:"svLSRe",values:{0:a.name,name:E}}),alertFailure:l._s._({id:"eeQk9h",values:{0:a.name,name:E}}),stateUpdate:{showRoleRemoveModal:null}})},removeUser:function(e){var a=e.object_roles.map((function(a){return u.E3.removeRole(b,{role:a,users:[e.username]})}));ve({roles:a,alertSuccess:l._s._({id:"ekGBsh",values:{0:e.username,name:E}}),alertFailure:l._s._({id:"O21voo",values:{0:e.username,name:E}}),stateUpdate:{showUserRemoveModal:null}})},removeUserRole:function(e,a){var t=u.E3.removeRole(b,{role:e,users:[a.username]});ve({roles:[t],alertSuccess:l._s._({id:"ifVlo4",values:{0:a.username,name:E}}),alertFailure:l._s._({id:"xJC6dy",values:{0:a.username,name:E}}),stateUpdate:{showRoleRemoveModal:null}})},selectRolesMessage:l._s._({id:"FoCVlu"}),showGroupRemoveModal:Z,showGroupSelectWizard:te,showRoleRemoveModal:se,showRoleSelectWizard:ce,showUserRemoveModal:H,showUserSelectWizard:J,updateProps:_e,user:Y,users:P,urlPrefix:(0,c.oD)(c.uk.ansibleRemoteDetail,{name:E})})},p=t(77104),f=function(e){var a=e.code,t=s().useState(!1),n=(0,v.c)(t,2),r=n[0],o=n[1],u=s().createElement(s().Fragment,null,s().createElement(p.CodeBlockAction,null,s().createElement(p.ClipboardCopyButton,{id:"basic-copy-button",textId:"code-content","aria-label":"Copy to clipboard",onClick:function(e){return function(e,a){navigator.clipboard.writeText(a.toString())}(0,a),void o(!0)},exitDelay:r?1500:600,maxWidth:"110px",variant:"plain",onTooltipHidden:function(){return o(!1)}},r?l._s._({id:"ORamYR"}):l._s._({id:"/4gGIX"}))));return s().createElement(p.CodeBlock,{actions:u},s().createElement(p.CodeBlockCode,{id:"code-content"},a))},b=function(e){var a=e.code;return a?s().createElement(f,{code:a}):s().createElement(s().Fragment,null,l._s._({id:"EdQY6l"}))},h=function(e){var a,t,n=e.item;return s().createElement(i.Sk,{fields:[{label:l._s._({id:"W+/a1z"}),value:null==n?void 0:n.name},{label:l._s._({id:"IagCbF"}),value:s().createElement(i.An,{url:null==n?void 0:n.url,fallback:!0})},{label:l._s._({id:"vEkjkD"}),value:s().createElement(i.An,{url:null==n?void 0:n.proxy_url,fallback:!0})},{label:l._s._({id:"r2AaSF"}),value:null!=n&&n.tls_validation?l._s._({id:"RxzN1M"}):l._s._({id:"E/QGRL"})},{label:l._s._({id:"lWw/5G"}),value:(null==n?void 0:n.client_cert)||l._s._({id:"EdQY6l"})},{label:l._s._({id:"qldWHB"}),value:(null==n?void 0:n.ca_cert)||l._s._({id:"EdQY6l"})},{label:l._s._({id:"+e1mLz"}),value:null!==(a=null==n?void 0:n.download_concurrency)&&void 0!==a?a:l._s._({id:"EdQY6l"})},{label:l._s._({id:"SeWdiM"}),value:null!==(t=null==n?void 0:n.rate_limit)&&void 0!==t?t:l._s._({id:"EdQY6l"})},{label:l._s._({id:"ooullr"}),value:s().createElement(i.Oc,{remoteHref:null==n?void 0:n.pulp_href})},{label:l._s._({id:"6rUIqH"}),value:s().createElement(b,{code:null==n?void 0:n.requirements_file})}]})};function R(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?R(Object(t),!0).forEach((function(a){(0,n.c)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}const S=(0,i.K6)({breadcrumbs:function(e){var a=e.name,t=e.tab,n=e.params,r=n.user,s=n.group;return[{url:(0,c.oD)(c.uk.ansibleRemotes),name:l._s._({id:"TiuMpz"})},{url:(0,c.oD)(c.uk.ansibleRemoteDetail,{name:a}),name:a},"access"===t.id&&(s||r)?{url:(0,c.oD)(c.uk.ansibleRepositoryDetail,{name:a},{tab:t.id}),name:t.name}:null,"access"===t.id&&s?{name:l._s._({id:"8uT/P7",values:{group:s}})}:null,"access"===t.id&&r?{name:l._s._({id:"AkUbn7",values:{user:r}})}:null,"access"!==t.id||r||s?null:{name:t.name}].filter(Boolean)},condition:d.o7,displayName:"AnsibleRemoteDetail",errorTitle:{id:"cFwIgK"},headerActions:[o.QD,o.WO,o.gY,o.o$,o.m2],listUrl:(0,c.oD)(c.uk.ansibleRemotes),query:function(e){var a=e.name;return u.E3.list({name:a}).then((function(e){return e.data.results[0]})).then((function(e){return e?u.E3.myPermissions((0,m.oL)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(a){return E(E({},e),{},{my_permissions:a})})):Promise.reject({response:{status:404}})}))},renderTab:function(e,a,t){return{details:s().createElement(h,{item:a,actionContext:t}),access:s().createElement(_,{item:a,actionContext:t})}[e]},tabs:[{id:"details",name:{id:"URmyfc"}},{id:"access",name:{id:"LuXP9q"}}],tabUpdateParams:function(e){return delete e.group,delete e.user,e}})}}]);
//# sourceMappingURL=3159.469229b6ad8c68e1e009.js.map