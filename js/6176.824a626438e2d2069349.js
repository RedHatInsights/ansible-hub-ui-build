"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[6176],{36176:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(4942),r=n(89555),l=n(92950),o=n.n(l),i=n(61811),u=n(76265),c=n(1161),s=n(61647),d=n(6640),m=n(52713),f=n(70885);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw l}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var b=function(e){var t=e.item,n=e.actionContext,a=n.addAlert,i=n.featureFlags,v=n.hasPermission,b=n.state.params,g=n.user,h=(null==t?void 0:t.pulp_href)&&(0,m.LL)(t.pulp_href),y=(0,l.useState)(null==t?void 0:t.name),_=(0,f.Z)(y,2),R=_[0],S=_[1],w=(0,l.useState)(null),E=(0,f.Z)(w,2),O=E[0],C=E[1],j=(0,l.useState)(!1),P=(0,f.Z)(j,2),k=P[0],G=P[1],x=(0,l.useState)(null),I=(0,f.Z)(x,2),A=I[0],F=I[1],M=(0,l.useState)(null),T=(0,f.Z)(M,2),W=T[0],Z=T[1],z=(0,l.useState)(null),L=(0,f.Z)(z,2),U=L[0],B=L[1],D=(0,l.useState)(null),Q=(0,f.Z)(D,2),Y=Q[0],q=Q[1],H=(0,l.useState)(null),K=(0,f.Z)(H,2),N=K[0],J=K[1],X=function(){C(null),u.GC.myPermissions(h).then((function(e){var t=e.data.permissions;G((0,d.yA)({hasPermission:v,hasObjectPermission:function(e){return t.includes(e)},user:g,featureFlags:i})),u.GC.listRoles(h).then((function(e){var t,n=e.data.roles,a=[],r=p(n);try{for(r.s();!(t=r.n()).done;){var l,o=t.value,i=o.groups,u=o.role,c=p(i);try{var s=function(){var e=l.value,t=a.findIndex((function(t){return t.name===e}));-1==t?a.push({name:e,object_roles:[u]}):a[t].object_roles.push(u)};for(c.s();!(l=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}}}catch(e){r.e(e)}finally{r.f()}S(R),C(a)})).catch((function(){C([])}))})).catch((function(){C([]),G(!1)}))},V=function(e){var t=e.roles,n=e.alertSuccess,r=e.alertFailure,l=e.stateUpdate;Promise.all(t).then((function(){a({title:n,variant:"success"}),X()})).catch((function(e){var t=e.response,n=t.status,l=t.statusText;a({title:r,variant:"danger",description:(0,m.N3)(n,l)})})).finally((function(){$(l)}))},$=function(e){Object.entries(e).forEach((function(e){var t=(0,f.Z)(e,2),n=t[0],a=t[1];switch(n){case"showGroupRemoveModal":Z(a);break;case"showGroupSelectWizard":B(a);break;case"showRoleRemoveModal":q(a);break;case"showRoleSelectWizard":J(a);break;default:console.error("updateProps",n,a)}}))};return(0,l.useEffect)(X,[t.pulp_href]),(0,l.useEffect)((function(){O&&(null!=b&&b.group?u.lO.list({name:b.group}).then((function(e){var t=e.data.data;F(O.find((function(e){return e.name===t[0].name})))})):F(null))}),[null==b?void 0:b.group,O]),o().createElement(c.yW,{addGroup:function(e,t){var n=t.map((function(t){return u.GC.addRole(h,{role:t.name,groups:[e.name]})}));V({roles:n,alertSuccess:r.ag._({id:"lylrvu",values:{0:e.name,name:R}}),alertFailure:r.ag._({id:"9/YKZd",values:{0:e.name,name:R}}),stateUpdate:{showGroupSelectWizard:null}})},addRole:function(e,t){var n=t.map((function(t){return u.GC.addRole(h,{role:t.name,groups:[e.name]})}));V({roles:n,alertSuccess:r.ag._({id:"svLSRe",values:{0:e.name,name:R}}),alertFailure:r.ag._({id:"eeQk9h",values:{0:e.name,name:R}}),stateUpdate:{showRoleSelectWizard:null}})},canEditOwners:k,group:A,groups:O,name:R,pulpObjectType:"remotes/ansible/collection",removeGroup:function(e){var t=e.object_roles.map((function(t){return u.GC.removeRole(h,{role:t,groups:[e.name]})}));V({roles:t,alertSuccess:r.ag._({id:"94LxzI",values:{0:e.name,name:R}}),alertFailure:r.ag._({id:"j17tAi",values:{0:e.name,name:R}}),stateUpdate:{showGroupRemoveModal:null}})},removeRole:function(e,t){var n=u.GC.removeRole(h,{role:e,groups:[t.name]});V({roles:[n],alertSuccess:r.ag._({id:"svLSRe",values:{0:t.name,name:R}}),alertFailure:r.ag._({id:"eeQk9h",values:{0:t.name,name:R}}),stateUpdate:{showRoleRemoveModal:null}})},selectRolesMessage:r.ag._({id:"FoCVlu"}),showGroupRemoveModal:W,showGroupSelectWizard:U,showRoleRemoveModal:Y,showRoleSelectWizard:N,updateProps:$,urlPrefix:(0,s.dI)(s.nB.ansibleRemoteDetail,{name:R})})},g=n(35356),h=function(e){var t=e.code,n=o().useState(!1),a=(0,f.Z)(n,2),l=a[0],i=a[1],u=o().createElement(o().Fragment,null,o().createElement(g.CodeBlockAction,null,o().createElement(g.ClipboardCopyButton,{id:"basic-copy-button",textId:"code-content","aria-label":"Copy to clipboard",onClick:function(e){return function(e,t){navigator.clipboard.writeText(t.toString())}(0,t),void i(!0)},exitDelay:l?1500:600,maxWidth:"110px",variant:"plain",onTooltipHidden:function(){return i(!1)}},l?r.ag._({id:"ORamYR"}):r.ag._({id:"/4gGIX"}))));return o().createElement(g.CodeBlock,{actions:u},o().createElement(g.CodeBlockCode,{id:"code-content"},t))},y=function(e){var t=e.code;return t?o().createElement(h,{code:t}):o().createElement(o().Fragment,null,r.ag._({id:"EdQY6l"}))},_=function(e){var t,n,a=e.item;return o().createElement(c.PO,{fields:[{label:r.ag._({id:"W+/a1z"}),value:null==a?void 0:a.name},{label:r.ag._({id:"IagCbF"}),value:o().createElement(c.TO,{url:null==a?void 0:a.url,fallback:!0})},{label:r.ag._({id:"vEkjkD"}),value:o().createElement(c.TO,{url:null==a?void 0:a.proxy_url,fallback:!0})},{label:r.ag._({id:"r2AaSF"}),value:null!=a&&a.tls_validation?r.ag._({id:"RxzN1M"}):r.ag._({id:"E/QGRL"})},{label:r.ag._({id:"lWw/5G"}),value:(null==a?void 0:a.client_cert)||r.ag._({id:"EdQY6l"})},{label:r.ag._({id:"qldWHB"}),value:(null==a?void 0:a.ca_cert)||r.ag._({id:"EdQY6l"})},{label:r.ag._({id:"+e1mLz"}),value:null!==(t=null==a?void 0:a.download_concurrency)&&void 0!==t?t:r.ag._({id:"EdQY6l"})},{label:r.ag._({id:"SeWdiM"}),value:null!==(n=null==a?void 0:a.rate_limit)&&void 0!==n?n:r.ag._({id:"EdQY6l"})},{label:r.ag._({id:"ooullr"}),value:o().createElement(c.oK,{remoteHref:null==a?void 0:a.pulp_href})},{label:r.ag._({id:"6rUIqH"}),value:o().createElement(y,{code:null==a?void 0:a.requirements_file})}]})};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const w=(0,c.L9)({breadcrumbs:function(e){var t=e.name,n=e.tab,a=e.params.group;return[{url:(0,s.dI)(s.nB.ansibleRemotes),name:r.ag._({id:"TiuMpz"})},{url:(0,s.dI)(s.nB.ansibleRemoteDetail,{name:t}),name:t},"access"===n.id&&a?{url:(0,s.dI)(s.nB.ansibleRepositoryDetail,{name:t},{tab:n.id}),name:n.name}:null,"access"===n.id&&a?{name:r.ag._({id:"8uT/P7",values:{group:a}})}:{name:n.name}].filter(Boolean)},condition:d.MT,displayName:"AnsibleRemoteDetail",errorTitle:{id:"cFwIgK"},headerActions:[i.JJ,i.Rq,i.MC,i.PU,i.bU],query:function(e){var t=e.name;return u.GC.list({name:t}).then((function(e){return e.data.results[0]})).then((function(e){return e?u.GC.myPermissions((0,m.LL)(e.pulp_href)).then((function(e){return e.data.permissions})).catch((function(e){return console.error(e),[]})).then((function(t){return S(S({},e),{},{my_permissions:t})})):Promise.reject({response:{status:404}})}))},renderTab:function(e,t,n){return{details:o().createElement(_,{item:t,actionContext:n}),access:o().createElement(b,{item:t,actionContext:n})}[e]},tabs:[{id:"details",name:{id:"URmyfc"}},{id:"access",name:{id:"LuXP9q"}}],tabUpdateParams:function(e){return delete e.group,e}})}}]);
//# sourceMappingURL=../sourcemaps/6176.311d6e04385407db06b7d64ed9f938ec.js.map