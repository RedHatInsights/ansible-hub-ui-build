{"version":3,"sources":["webpack:///./src/containers/namespace-list/namespace-list.scss","webpack:///./src/containers/namespace-list/namespace-list.tsx","webpack:///./src/containers/namespace-list/namespace-list.scss?dbb7","webpack:///./src/containers/namespace-list/my-namespaces.tsx","webpack:///./src/containers/namespace-list/partners.tsx"],"names":["module","exports","push","i","props","nonURLParams","handleModalToggle","setState","isModalOpen","params","parseParamString","location","search","state","namespaces","undefined","itemCount","hasPermission","partnerEngineer","loading","componentDidMount","this","isPartnerEngineer","filterOwner","list","then","results","data","meta","count","loadNamespaces","render","title","createButton","variant","onClick","className","sortOptions","id","type","searchPlaceholder","toLowerCase","updateParams","p","extraInputs","isCompact","perPageOptions","CARD_DEFAULT_PAGINATION_OPTIONS","renderBody","isOpen","toggleModal","onCreateSuccess","result","history","myCollections","namespace","namespacePath","length","full","icon","headingLevel","size","map","ns","key","to","name","apiFunc","updateParamsMixin","response","me","is_partner_engineer","content","options","transform","update","locals","hot","accept","newContent","a","b","idx","Error","dispose","MyNamespaces","Partners"],"mappings":"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","file":"js/namespace_list.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".card-layout {\\n  display: flex;\\n  flex-wrap: wrap; }\\n  .card-layout .card-wrapper {\\n    margin-right: 24px;\\n    margin-bottom: 24px; }\\n\\n.toolbar {\\n  padding-bottom: 24px;\\n  display: flex;\\n  justify-content: space-between; }\\n\", \"\"]);\n\n","import * as React from 'react';\nimport './namespace-list.scss';\n\nimport { RouteComponentProps, Link } from 'react-router-dom';\nimport { Section } from '@redhat-cloud-services/frontend-components';\nimport {\n  EmptyState,\n  EmptyStateIcon,\n  Title,\n  EmptyStateBody,\n  EmptyStateVariant,\n} from '@patternfly/react-core';\nimport { SearchIcon } from '@patternfly/react-icons';\n\nimport { ParamHelper } from '../../utilities/param-helper';\nimport {\n  BaseHeader,\n  NamespaceCard,\n  Toolbar,\n  Pagination,\n  NamespaceModal,\n  LoadingPageWithHeader,\n  Main,\n  LoadingPageSpinner,\n} from '../../components';\nimport { Button } from '@patternfly/react-core';\nimport { DataToolbarItem } from '@patternfly/react-core/dist/esm/experimental';\nimport {\n  NamespaceAPI,\n  NamespaceListType,\n  ActiveUserAPI,\n  MeType,\n  MyNamespaceAPI,\n} from '../../api';\nimport { Paths, formatPath } from '../../paths';\nimport { Constants } from '../../constants';\n\ninterface IState {\n  namespaces: NamespaceListType[];\n  itemCount: number;\n  params: {\n    name?: string;\n    sort?: string;\n    page?: number;\n    page_size?: number;\n    tenant?: string;\n  };\n  hasPermission: boolean;\n  partnerEngineer: boolean;\n  isModalOpen: boolean;\n  loading: boolean;\n}\n\ninterface IProps extends RouteComponentProps {\n  title: string;\n  namespacePath: Paths;\n  filterOwner?: boolean;\n}\n\nexport class NamespaceList extends React.Component<IProps, IState> {\n  nonURLParams = ['tenant'];\n  handleSubmit;\n\n  constructor(props) {\n    super(props);\n\n    const params = ParamHelper.parseParamString(props.location.search, [\n      'page',\n      'page_size',\n    ]);\n\n    if (!params['page_size']) {\n      params['page_size'] = 24;\n    }\n\n    if (!params['sort']) {\n      params['sort'] = 'name';\n    }\n\n    this.state = {\n      namespaces: undefined,\n      itemCount: 0,\n      params: params,\n      hasPermission: true,\n      isModalOpen: false,\n      partnerEngineer: false,\n      loading: true,\n    };\n  }\n\n  private handleModalToggle = () => {\n    this.setState(({ isModalOpen }) => ({\n      isModalOpen: !isModalOpen,\n    }));\n  };\n\n  componentDidMount() {\n    this.isPartnerEngineer();\n    if (this.props.filterOwner) {\n      // Make a query with no params and see if it returns results to tell\n      // if the user can edit namespaces\n      MyNamespaceAPI.list({}).then(results => {\n        if (results.data.meta.count !== 0) {\n          this.loadNamespaces();\n        } else {\n          this.setState({\n            hasPermission: false,\n            namespaces: [],\n            loading: false,\n          });\n        }\n      });\n    } else {\n      this.loadNamespaces();\n    }\n  }\n\n  render() {\n    const { namespaces, params, itemCount, partnerEngineer } = this.state;\n    const { title } = this.props;\n\n    if (!namespaces) {\n      return <LoadingPageWithHeader></LoadingPageWithHeader>;\n    }\n\n    const createButton = partnerEngineer && (\n      <React.Fragment>\n        <DataToolbarItem variant='separator' />\n        <DataToolbarItem>\n          <Button variant='primary' onClick={this.handleModalToggle}>\n            Create\n          </Button>\n        </DataToolbarItem>\n      </React.Fragment>\n    );\n\n    return (\n      <React.Fragment>\n        <BaseHeader title={title}>\n          <div className='toolbar'>\n            <Toolbar\n              params={params}\n              sortOptions={[{ title: 'Name', id: 'name', type: 'alpha' }]}\n              searchPlaceholder={'Search ' + title.toLowerCase()}\n              updateParams={p =>\n                this.updateParams(p, () => this.loadNamespaces())\n              }\n              extraInputs={[createButton]}\n            />\n            <div>\n              <Pagination\n                params={params}\n                updateParams={p =>\n                  this.updateParams(p, () => this.loadNamespaces())\n                }\n                count={itemCount}\n                isCompact\n                perPageOptions={Constants.CARD_DEFAULT_PAGINATION_OPTIONS}\n              />\n            </div>\n          </div>\n        </BaseHeader>\n        <Main>\n          <Section>{this.renderBody()}</Section>\n          <NamespaceModal\n            isOpen={this.state.isModalOpen}\n            toggleModal={this.handleModalToggle}\n            onCreateSuccess={result =>\n              this.props.history.push(\n                formatPath(Paths.myCollections, {\n                  namespace: result['name'],\n                }),\n              )\n            }\n          ></NamespaceModal>\n        </Main>\n      </React.Fragment>\n    );\n  }\n\n  private renderBody() {\n    const { namespaces, hasPermission } = this.state;\n    const { namespacePath } = this.props;\n    const { loading } = this.state;\n\n    if (loading) {\n      return (\n        <Section>\n          <LoadingPageSpinner></LoadingPageSpinner>;\n        </Section>\n      );\n    }\n\n    if (namespaces.length === 0) {\n      return (\n        <Section>\n          <EmptyState className='empty' variant={EmptyStateVariant.full}>\n            <EmptyStateIcon icon={SearchIcon} />\n            <Title headingLevel='h2' size='lg'>\n              {hasPermission ? 'No results found' : 'No managed namespaces'}\n            </Title>\n            <EmptyStateBody>\n              {hasPermission\n                ? 'No results match the filter criteria.' +\n                  ' Remove all filters or clear all filters' +\n                  ' to show results.'\n                : 'This account is not set up to manage any namespaces.'}\n            </EmptyStateBody>\n            {hasPermission && (\n              <Button\n                variant='link'\n                onClick={() =>\n                  this.updateParams({}, () => this.loadNamespaces())\n                }\n              >\n                Clear all filters\n              </Button>\n            )}\n          </EmptyState>\n        </Section>\n      );\n    }\n\n    return (\n      <Section className='card-layout'>\n        {namespaces.map((ns, i) => (\n          <div key={i} className='card-wrapper'>\n            <Link\n              to={formatPath(namespacePath, {\n                namespace: ns.name,\n              })}\n            >\n              <NamespaceCard key={i} {...ns}></NamespaceCard>\n            </Link>\n          </div>\n        ))}\n      </Section>\n    );\n  }\n\n  private loadNamespaces() {\n    let apiFunc: any;\n\n    if (this.props.filterOwner) {\n      apiFunc = p => MyNamespaceAPI.list(p);\n    } else {\n      apiFunc = p => NamespaceAPI.list(p);\n    }\n    this.setState({ loading: true }, () => {\n      apiFunc(this.state.params).then(results => {\n        this.setState({\n          namespaces: results.data.data,\n          itemCount: results.data.meta.count,\n          loading: false,\n        });\n      });\n    });\n  }\n\n  private get updateParams() {\n    return ParamHelper.updateParamsMixin(this.nonURLParams);\n  }\n\n  private isPartnerEngineer() {\n    ActiveUserAPI.isPartnerEngineer().then(response => {\n      const me: MeType = response.data;\n      this.setState({ partnerEngineer: me.is_partner_engineer });\n    });\n  }\n}\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/lib/loader.js!./namespace-list.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/lib/loader.js!./namespace-list.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/lib/loader.js!./namespace-list.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import * as React from 'react';\n\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\nimport { NamespaceList } from './namespace-list';\nimport { Paths } from '../../paths';\n\nclass MyNamespaces extends React.Component<RouteComponentProps, {}> {\n  render() {\n    return (\n      <NamespaceList\n        {...this.props}\n        namespacePath={Paths.myCollections}\n        title='My namespaces'\n        filterOwner={true}\n      />\n    );\n  }\n}\n\nexport default withRouter(MyNamespaces);\n","import * as React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\nimport { NamespaceList } from './namespace-list';\nimport { Paths } from '../../paths';\n\nclass Partners extends React.Component<RouteComponentProps, {}> {\n  render() {\n    return (\n      <NamespaceList\n        {...this.props}\n        namespacePath={Paths.namespace}\n        title='Partners'\n      />\n    );\n  }\n}\n\nexport default withRouter(Partners);\n"],"sourceRoot":""}