(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{750:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,".certification-dasboard .toolbar{padding-bottom:16px;display:flex;justify-content:space-between}.certification-dasboard .control-column{display:flex;justify-content:flex-end;align-items:center}.certification-dasboard .footer{padding-top:16px}.certification-dasboard .updating-spinner{color:var(--pf-global--info-color--100)}",""])},762:function(e,t,n){var o=n(750);"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0},r=n(11)(o,a);o.locals&&(e.exports=o.locals),e.hot.accept(750,(function(){var t=n(750);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,o=0;for(n in e){if(!t||e[n]!==t[n])return!1;o++}for(n in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");r(t)})),e.hot.dispose((function(){r()}))},773:function(e,t,n){"use strict";n.r(t);var o,a,r,i,l,c,s,u,p,d,m,f,h,y,E,b,v=n(0),g=n(31),w=n(35),C=n(732),R=n(102),S=n(8),k=n(236),N=n(17),P=n(53),I=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),O=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},T=function(e){function t(t){var n=e.call(this,t)||this;return n.state={tokenData:void 0},n}return I(t,e),t.prototype.componentDidMount=function(){var e=this;window.insights.chrome.auth.getOfflineToken().then((function(t){e.setState({tokenData:t.data})}))},t.prototype.render=function(){var e,t=this,n=this.context.user,o=this.state.tokenData,w='curl https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token -d grant_type=refresh_token -d client_id="'+n.username+'" -d refresh_token="'+(null!==(e=null==o?void 0:o.refresh_token)&&void 0!==e?e:"{{ user_token }}")+'" --fail --silent --show-error --output /dev/null';return v.createElement(v.Fragment,null,v.createElement(k.d,{title:_(a||(a=O(["Connect to Hub"],["Connect to Hub"])))}),v.createElement(k.C,null,v.createElement("section",{className:"body pf-c-content"},v.createElement("h2",null,_(r||(r=O(["Connect Private Automation Hub"],["Connect Private Automation Hub"])))),v.createElement("p",null,"Use the"," ",v.createElement(g.b,{to:S.a.repositories},_(i||(i=O(["Repository Management"],["Repository Management"]))))," ","page to sync collections curated by your organization to the Red Hat Certified repository in your private Automation Hub. Users with the correct permissions can use the sync toggles on the"," ",v.createElement(g.b,{to:S.a.search},_(l||(l=O(["Collections"],["Collections"]))))," page to control which collections are added to their organization's sync repository.")),v.createElement("section",{className:"body pf-c-content"},v.createElement("h2",null,_(c||(c=O(["Connect the ansible-galaxy client"],["Connect the ansible-galaxy client"])))),v.createElement("p",null,"Documentation on how to configure the ",v.createElement("code",null,"ansible-galaxy")," ","client can be found"," ",v.createElement("a",{href:"https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/",target:"_blank"},"here"),". Use the following parameters to configure the client.")),v.createElement("section",{className:"body pf-c-content"},v.createElement("h2",null,_(s||(s=O(["Offline token"],["Offline token"])))),v.createElement("p",null,_(u||(u=O(["Use this token to authenticate clients that need to download"],["Use this token to authenticate clients that need to download"]))),"content from Automation Hub. This is a secret token used to protect your content. Store your API token in a secure location."),o?v.createElement("div",null,v.createElement(C.a,null,o.refresh_token)):v.createElement(R.a,{onClick:function(){return t.loadToken()}},_(p||(p=O(["Load token"],["Load token"])))),v.createElement("div",{className:"pf-c-content",style:{paddingTop:"var(--pf-global--spacer--md)"}},v.createElement("span",null,"The token will expire after 30 days of inactivity. Run the command below periodically to prevent your token from expiring."),v.createElement(C.a,{isCode:!0,isReadOnly:!0,variant:C.b.expansion},w)),v.createElement("h2",null,_(d||(d=O(["Manage tokens"],["Manage tokens"])))),"To revoke a token or see all of your tokens, visit the"," ",v.createElement("a",{href:"https://sso.redhat.com/auth/realms/redhat-external/account/applications",target:"_blank"},"offline API token management")," ","page."),v.createElement("section",{className:"body pf-c-content"},v.createElement("h2",null,_(m||(m=O(["Server URL"],["Server URL"])))),v.createElement("p",null,_(f||(f=O(["Use this URL to configure the API endpoints that clients need to"],["Use this URL to configure the API endpoints that clients need to"]))),"download content from Automation Hub."),v.createElement(C.a,{isReadOnly:!0},Object(N.e)("")),v.createElement("p",null,_(h||(h=O(["Note: this URL contains all collections in Hub. To connect to your"],["Note: this URL contains all collections in Hub. To connect to your"]))),"organization's sync repository use the URL found on"," ",v.createElement(g.b,{to:S.a.repositories},_(y||(y=O(["Repository Management"],["Repository Management"])))),".")),v.createElement("section",{className:"body pf-c-content"},v.createElement("h2",null,_(E||(E=O(["SSO URL"],["SSO URL"])))),v.createElement("p",null,_(b||(b=O(["Use this URL to configure the authentication URLs that clients"],["Use this URL to configure the authentication URLs that clients"]))),"need to download content from Automation Hub."),v.createElement(C.a,{isReadOnly:!0},"https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token"))))},t.prototype.loadToken=function(){window.insights.chrome.auth.doOffline()},t}(v.Component);t.default=Object(w.g)(T),T.contextType=P.a},774:function(e,t,n){"use strict";n.r(t);var o,a,r,i,l,c,s,u,p,d,m,f,h,y,E,b,v,g,w,C,R,S,k,N,P,I,O,T,U,A,j,D=n(0),x=(n(762),n(31)),L=n(35),H=n(236),V=n(738),F=n(97),z=n(126),B=n(683),M=n(102),q=n(111),W=n(112),J=n(143),G=n(23),K=n(17),Q=n(8),X=n(14),Y=n(53),Z=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),$=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ee=function(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function l(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((o=o.apply(e,t||[])).next())}))},te=function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},ne=function(e){function t(t){var n=e.call(this,t)||this,o=K.a.parseParamString(t.location.search,["page","page_size"]);return o.page_size||(o.page_size=10),o.sort||(o.sort="-pulp_created"),o.repository||(o.repository="staging"),n.state={versions:void 0,itemCount:0,params:o,loading:!0,updatingVersions:[],alerts:[],unauthorized:!1},n}return Z(t,e),t.prototype.componentDidMount=function(){this.context.user&&this.context.user.model_permissions.move_collection?this.queryCollections():this.setState({unauthorized:!0})},t.prototype.render=function(){var e,t=this,n=this.state,o=n.versions,h=n.params,y=n.itemCount,E=n.loading,b=n.unauthorized;return o||b?D.createElement(D.Fragment,null,D.createElement(H.d,{title:_(a||(a=$(["Approval dashboard"],["Approval dashboard"])))}),D.createElement(H.b,{alerts:this.state.alerts,closeAlert:function(e){return t.closeAlert(e)}}),b?D.createElement(H.t,null):D.createElement(H.C,{className:"certification-dashboard"},D.createElement("section",{className:"body"},D.createElement("div",{className:"toolbar"},D.createElement(V.a,null,D.createElement(F.a,null,D.createElement(z.a,null,D.createElement(H.n,{updateParams:function(e){return t.updateParams(e,(function(){return t.queryCollections()}))},params:h,filterConfig:[{id:"namespace",title:_(r||(r=$(["Namespace"],["Namespace"])))},{id:"name",title:_(i||(i=$(["Collection Name"],["Collection Name"])))},{id:"repository",title:_(l||(l=$(["Status"],["Status"]))),inputType:"select",options:[{id:X.a.NOTCERTIFIED,title:_(c||(c=$(["Rejected"],["Rejected"])))},{id:X.a.NEEDSREVIEW,title:_(s||(s=$(["Needs Review"],["Needs Review"])))},{id:X.a.PUBLISHED,title:_(u||(u=$(["Approved"],["Approved"])))}]}]})))),D.createElement(H.J,{params:h,updateParams:function(e){return t.updateParams(e,(function(){return t.queryCollections()}))},count:y,isTop:!0})),D.createElement("div",null,D.createElement(H.c,{updateParams:function(e){return t.updateParams(e,(function(){return t.queryCollections()}))},params:h,ignoredParams:["page_size","page","sort"],niceValues:{repository:(e={},e[X.a.PUBLISHED]=_(p||(p=$(["Approved"],["Approved"]))),e[X.a.NEEDSREVIEW]=_(d||(d=$(["Needs Review"],["Needs Review"]))),e[X.a.NOTCERTIFIED]=_(m||(m=$(["Rejected"],["Rejected"]))),e)},niceNames:{repository:_(f||(f=$(["Status"],["Status"])))}})),E?D.createElement(H.y,null):this.renderTable(o,h),D.createElement("div",{className:"footer"},D.createElement(H.J,{params:h,updateParams:function(e){return t.updateParams(e,(function(){return t.queryCollections()}))},count:y}))))):D.createElement(H.z,null)},t.prototype.renderTable=function(e,t){var n=this;if(0===e.length)return Object(K.d)(t,["namespace","name","repository"])?D.createElement(H.r,null):D.createElement(H.s,{title:_(h||(h=$(["No managed collections yet"],["No managed collections yet"]))),description:_(y||(y=$(["Collections will appear once uploaded"],["Collections will appear once uploaded"])))});var o={headers:[{title:_(E||(E=$(["Namespace"],["Namespace"]))),type:"alpha",id:"namespace"},{title:_(b||(b=$(["Collection"],["Collection"]))),type:"alpha",id:"collection"},{title:_(v||(v=$(["Version"],["Version"]))),type:"number",id:"version"},{title:_(g||(g=$(["Date created"],["Date created"]))),type:"number",id:"pulp_created"},{title:_(w||(w=$(["Status"],["Status"]))),type:"none",id:"status"},{title:"",type:"none",id:"certify"}]};return D.createElement("table",{"aria-label":_(C||(C=$(["Collection versions"],["Collection versions"]))),className:"content-table pf-c-table"},D.createElement(H.R,{options:o,params:t,updateParams:function(e){return n.updateParams(e,(function(){return n.queryCollections()}))}}),D.createElement("tbody",null,e.map((function(e,t){return n.renderRow(e,t)}))))},t.prototype.renderStatus=function(e){return this.state.updatingVersions.includes(e)?D.createElement("span",{className:"fa fa-lg fa-spin fa-spinner"}):e.repository_list.includes(X.a.PUBLISHED)?D.createElement("span",null,D.createElement(q.a,{style:{color:"var(--pf-global--success-color--100)"}})," ",_(R||(R=$(["Approved"],["Approved"])))):e.repository_list.includes(X.a.NOTCERTIFIED)?D.createElement("span",null,D.createElement(W.a,{style:{color:"var(--pf-global--danger-color--100)"}})," ",_(S||(S=$(["Rejected"],["Rejected"])))):e.repository_list.includes(X.a.NEEDSREVIEW)?D.createElement("span",null,D.createElement(J.a,{style:{color:"var(--pf-global--info-color--100)"}})," ",_(k||(k=$(["Needs Review"],["Needs Review"])))):void 0},t.prototype.renderRow=function(e,t){return D.createElement("tr",{"aria-labelledby":e.namespace+"."+e.name+" v"+e.version,key:t},D.createElement("td",null,e.namespace),D.createElement("td",null,e.name),D.createElement("td",null,D.createElement(x.b,{to:Object(Q.b)(Q.a.collectionByRepo,{namespace:e.namespace,collection:e.name,repo:e.repository_list[0]},{version:e.version})},e.version)),D.createElement("td",null,D.createElement(H.o,{date:e.created_at})),D.createElement("td",null,this.renderStatus(e)),D.createElement("td",null,D.createElement("div",{className:"control-column"},D.createElement("div",null,this.renderButtons(e)))))},t.prototype.renderButtons=function(e){var t=this;if(!this.state.updatingVersions.includes(e)){var n=D.createElement(B.a,{key:"imports",component:D.createElement(x.b,{to:Object(Q.b)(Q.a.myImports,{},{namespace:e.namespace,name:e.name,version:e.version})},_(N||(N=$(["View Import Logs"],["View Import Logs"]))))}),o=function(n,o){return D.createElement(B.a,{onClick:function(){return t.updateCertification(e,o,X.a.PUBLISHED)},isDisabled:n,key:"certify"},_(P||(P=$(["Approve"],["Approve"]))))},a=function(n,o){return D.createElement(B.a,{onClick:function(){return t.updateCertification(e,o,X.a.NOTCERTIFIED)},isDisabled:n,className:"rejected-icon",key:"reject"},_(I||(I=$(["Reject"],["Reject"]))))};return e.repository_list.includes(X.a.PUBLISHED)?D.createElement("span",null,D.createElement(H.S,{items:[o(!0,X.a.PUBLISHED),a(!1,X.a.PUBLISHED),n]})):e.repository_list.includes(X.a.NOTCERTIFIED)?D.createElement("span",null,D.createElement(H.S,{items:[o(!1,X.a.NOTCERTIFIED),a(!0,X.a.NOTCERTIFIED),n]})):e.repository_list.includes(X.a.NEEDSREVIEW)?D.createElement("span",null,D.createElement(M.a,{onClick:function(){return t.updateCertification(e,X.a.NEEDSREVIEW,X.a.PUBLISHED)}},D.createElement("span",null,_(O||(O=$(["Approve"],["Approve"]))))),D.createElement(H.S,{items:[a(!1,X.a.NEEDSREVIEW),n]})):void 0}},t.prototype.updateCertification=function(e,t,n){var o=this;this.setState({updatingVersions:[]},(function(){return G.c.setRepository(e.namespace,e.name,e.version,t,n).then((function(t){o.setState({updatingVersions:[e]}),o.waitForUpdate(t.data.remove_task_id,e)})).catch((function(t){o.setState({updatingVersions:[],alerts:o.state.alerts.concat({variant:"danger",title:_(T||(T=$(["API Error: ",""],["API Error: ",""])),t.response.status),description:_(U||(U=$(["Could not update the certification status for ",".",".","."],["Could not update the certification status for ",".",".","."])),e.namespace,e.name,e.version)})})}))}))},t.prototype.waitForUpdate=function(e,t){var n=this,o=e;return G.m.get(o).then((function(e){return ee(n,void 0,void 0,(function(){var n=this;return te(this,(function(a){switch(a.label){case 0:return"waiting"!==e.data.state&&"running"!==e.data.state?[3,2]:[4,new Promise((function(e){return setTimeout(e,500)}))];case 1:return a.sent(),this.waitForUpdate(o,t),[3,3];case 2:if("completed"===e.data.state)return[2,G.c.list(this.state.params).then((function(e){return ee(n,void 0,void 0,(function(){return te(this,(function(t){return this.setState({versions:e.data.data,updatingVersions:[]}),[2]}))}))}))];this.setState({updatingVersions:[],alerts:this.state.alerts.concat({variant:"danger",title:_(A||(A=$(["API Error: 500"],["API Error: 500"]))),description:_(j||(j=$(["Could not update the certification status for ",".",".","."],["Could not update the certification status for ",".",".","."])),t.namespace,t.name,t.version)})}),a.label=3;case 3:return[2]}}))}))}))},t.prototype.queryCollections=function(){var e=this;this.setState({loading:!0},(function(){return G.c.list(e.state.params).then((function(t){e.setState({versions:t.data.data,itemCount:t.data.meta.count,loading:!1,updatingVersions:[]})}))}))},Object.defineProperty(t.prototype,"updateParams",{get:function(){return K.a.updateParamsMixin()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"closeAlert",{get:function(){return Object(H.bb)("alerts")},enumerable:!1,configurable:!0}),t}(D.Component);t.default=Object(L.g)(ne),ne.contextType=Y.a}}]);
//# sourceMappingURL=settings.0f8cea0fc365fd01e240.js.map