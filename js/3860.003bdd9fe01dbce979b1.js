"use strict";(self.webpackChunkautomationHub=self.webpackChunkautomationHub||[]).push([[3860],{14048:(e,n,t)=>{t.d(n,{k:()=>p});var o=t(98920),a=t(52536),c=t(59072),s=t(32004),r=t(58860);function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){(0,a.c)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u={repository:null,namespace:null,name:null,version:null,actuallyCollection:null,collection:null,collections:[],collectionsCount:0,content:null};function p(e){var n=e.forceReload,t=e.matchParams,a=e.navigate,i=e.setCollection,p=e.stateParams.version,d=t.collection,m=t.namespace,f=t.repo;if(n||u.repository!==f||u.namespace!==m||u.name!==d||u.version!==p){var v=l(l({},f?{repository_name:f}:{}),{},{namespace:m,name:d}),y=(p?c.Rz.list(l(l({},v),{},{version:p})):c.Rz.list(l(l({},v),{},{is_highest:!0}))).then((function(e){return e.data.data[0]})),h=y.then((function(e){return c.a4.getContent(m,d,e.collection_version.version)})).then((function(e){return e.data.results[0]})).catch((function(){return a((0,s.oD)(s.uk.notFound))})),g=c.Rz.list(l(l({},v),{},{order_by:"-version",page_size:10})).then((function(e){return e.data})).catch((function(){return{data:[],meta:{count:0}}})),D=(0,r.cV)(f).then((function(e){return c.a4.getDetail(e,m,d)})).then((function(e){return e.data}));return Promise.all([g,y,h,D]).then((function(e){var n=(0,o.c)(e,4),t=n[0],a=t.data,c=t.meta.count,s=n[1],r=n[2],l=n[3];i(a,s,r,c,l),u.repository=f,u.namespace=m,u.name=d,u.version=p,u.actuallyCollection=l,u.collection=s,u.collections=a,u.collectionsCount=c,u.content=r}))}i(u.collections,u.collection,u.content,u.collectionsCount,u.actuallyCollection)}},53860:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var o=t(60888),a=t(98920),c=t(87088),s=t(92920),r=t(42232),i=t(76184),l=t(83136),u=t(36884),p=t(52536),d=t(72956),m=t(18232),f=t.n(m),v=t(59072),y=t(49368),h=t(76708),g=t(32004),D=t(58860),_=t(14048);function C(e,n,t){return n=(0,i.c)(n),(0,r.c)(e,b()?Reflect.construct(n,t||[],(0,i.c)(e).constructor):n.apply(e,t))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var P=function(e){function n(e){var t;(0,c.c)(this,n),t=C(this,n,[e]),(0,p.c)((0,l.c)(t),"ignoredParams",["page_size","page","sort","name__icontains"]);var o=D.us.parseParamString(e.location.search,["page","page_size"]);return o.sort=o.sort?"collection":"-collection",t.state={actuallyCollection:null,alerts:[],collection:null,collections:[],collectionsCount:0,content:null,dependencies_repos:[],params:o,usedByDependencies:[],usedByDependenciesCount:0,usedByDependenciesLoading:!0},t}return(0,u.c)(n,e),(0,s.c)(n,[{key:"componentDidMount",value:function(){this.loadData(!1)}},{key:"render",value:function(){var e=this,n=this.state,t=n.actuallyCollection,o=n.alerts,a=n.collection,c=n.collections,s=n.collectionsCount,r=n.content,i=n.params,l=n.usedByDependencies,u=n.usedByDependenciesCount,p=n.usedByDependenciesLoading;if(c.length<=0)return f().createElement(y.Qz,null);var m=a.collection_version,v=a.repository,h=[(0,g.WC)(),{url:(0,g.oD)(g.uk.namespaceDetail,{namespace:m.namespace}),name:m.namespace},{url:(0,g.oD)(g.uk.collectionByRepo,{namespace:m.namespace,collection:m.name,repo:v.name}),name:m.name},{name:d._s._({id:"xHe/7h"})}],_=D.us.getReduced(i,this.ignoredParams),C=D.us.getReduced(i,["version"]),b=!Object.keys(m.dependencies).length;return f().createElement(f().Fragment,null,f().createElement(y.WW,{alerts:o,closeAlert:function(n){return e.closeAlert(n)}}),f().createElement(y.Ko,{activeTab:"dependencies",actuallyCollection:t,breadcrumbs:h,collection:a,collections:c,collectionsCount:s,content:r,params:_,reload:function(){return e.loadData(!0)},repo:v.name,updateParams:function(n){e.updateParams(n,(function(){return e.loadData(!0)}))}}),f().createElement(y.GK,null,f().createElement("section",{className:"body"},f().createElement("div",{className:"pf-c-content collection-dependencies"},f().createElement("h1",null,d._s._({id:"xHe/7h"})),f().createElement("p",null,d._s._({id:"ie4x3e"})),b?f().createElement(y.BL,{title:d._s._({id:"416elZ"}),description:d._s._({id:"vRf+F6"})}):f().createElement(y.cV,{collection:this.state.collection,dependencies_repos:this.state.dependencies_repos}),f().createElement("p",null,d._s._({id:"BRmiuR"}))),f().createElement(y.g5,{usedByDependencies:l,itemCount:u,params:C,usedByDependenciesLoading:p,updateParams:function(n){return e.updateParams(n,(function(){return e.loadUsedByDependencies()}))}}))))}},{key:"loadData",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loadCollection(n,(function(){return e.loadCollectionsDependenciesRepos((function(){return e.loadUsedByDependencies()}))}))}},{key:"loadCollectionsDependenciesRepos",value:function(e){var n=this,t=this.state.collection.collection_version.dependencies,o=[],c=[];Object.keys(t).forEach((function(e){var s=e.split("."),r=(0,a.c)(s,2),i=r[0],l={name:r[1],namespace:i,version_range:t[e],repo:"",path:""};o.push(l);var u=n.loadDependencyRepo(l);c.push(u)})),Promise.all(c).then((function(){n.setState({dependencies_repos:o},e())}))}},{key:"loadDependencyRepo",value:function(e){return v.Rz.list({namespace:e.namespace,name:e.name,version_range:e.version_range,page_size:1}).then((function(n){var t=(0,a.c)(n.data.data,1)[0];e.repo=t.repository.name,e.path=(0,g.oD)(g.uk.collectionByRepo,{collection:e.name,namespace:e.namespace,repo:e.repo})})).catch((function(){}))}},{key:"loadUsedByDependencies",value:function(){var e=this;this.setState({usedByDependenciesLoading:!0},(function(){var n=e.state.collection.collection_version,t=n.name,a=n.namespace;v.a4.getUsedDependenciesByCollection(a,t,D.us.getReduced(e.state.params,["version"])).then((function(n){var t=n.data;e.setState({usedByDependencies:t.data,usedByDependenciesCount:t.meta.count,usedByDependenciesLoading:!1})})).catch((function(n){var t=n.response,a=t.status,c=t.statusText;e.setState({usedByDependenciesLoading:!1,alerts:[].concat((0,o.c)(e.state.alerts),[{variant:"danger",title:d._s._({id:"7YVePD"}),description:(0,D._A)(a,c)}])})}))}))}},{key:"loadCollection",value:function(e,n){var t=this;(0,_.k)({forceReload:e,matchParams:this.props.routeParams,navigate:this.props.navigate,setCollection:function(e,o,a,c,s){return t.setState({collections:e,collection:o,content:a,collectionsCount:c,actuallyCollection:s},n)},stateParams:this.state.params.version?{version:this.state.params.version}:{}})}},{key:"updateParams",get:function(){return D.us.updateParamsMixin()}},{key:"closeAlert",get:function(){return(0,y.Yi)("alerts")}},{key:"separateVersion",value:function(e){var n=e.match(/((\d+\.*)+)/);return n?{version:n[0]}:{}}}]),n}(f().Component);const k=(0,D.Ak)(P);P.contextType=h.c}}]);
//# sourceMappingURL=../sourcemaps/3860.301de146f0e92840746c6f4083ed2358.js.map