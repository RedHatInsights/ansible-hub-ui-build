(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{746:function(e,t,a){(e.exports=a(10)(!1)).push([e.i,".namespace-detail .pf-c-toolbar__content{padding-left:0px}",""])},747:function(e,t,a){(e.exports=a(10)(!1)).push([e.i,".upload-collection .file-error-messages{color:#c00}.upload-collection .upload-file{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.upload-collection .upload-file-label{display:inline-block;cursor:pointer;width:100%;font-weight:normal}.upload-collection .upload-file-label .upload-box{display:flex;border-style:solid;border-width:thin;width:100%;border-radius:3px}.upload-collection .upload-file-label .upload-box .upload-button,.upload-collection .upload-file-label .upload-box .upload-text{padding:5px}.upload-collection .upload-file-label .upload-box .upload-button{border-right:thin solid;padding-left:10px;padding-right:10px}.upload-collection .upload-file-label .upload-box .upload-button:hover{color:#fff;background-color:gray}.upload-collection .upload-file-label .upload-box .upload-text{position:relative;width:100%}.upload-collection .upload-file-label .upload-box .loading-bar{position:absolute;height:3px;background-color:#5bb75b;bottom:0px;left:0px}",""])},758:function(e,t,a){var n=a(746);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0},r=a(11)(n,o);n.locals&&(e.exports=n.locals),e.hot.accept(746,(function(){var t=a(746);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,n=0;for(a in e){if(!t||e[a]!==t[a])return!1;n++}for(a in t)n--;return 0===n}(n.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");r(t)})),e.hot.dispose((function(){r()}))},759:function(e,t,a){var n=a(747);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0},r=a(11)(n,o);n.locals&&(e.exports=n.locals),e.hot.accept(747,(function(){var t=a(747);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,n=0;for(a in e){if(!t||e[a]!==t[a])return!1;n++}for(a in t)n--;return 0===n}(n.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");r(t)})),e.hot.dispose((function(){r()}))},763:function(e,t,a){"use strict";a.r(t);var n,o,r,s,l,i,c,p,u,d=a(0),m=a(35),f=a(236),h=a(23),g=a(674),b=a(675),v=a(102),y=a(444),E=a(8),w=a(17),C=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),P=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},S=function(){return(S=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},O=function(e){function t(t){var a=e.call(this,t)||this,n=w.a.parseParamString(t.location.search);return n.tab||(n.tab="edit details"),a.state={alerts:[],namespace:null,userId:"",newLinkURL:"",newLinkName:"",errorMessages:{},saving:!1,redirect:null,unsavedData:!1,params:n,unauthorized:!1},a}return C(t,e),t.prototype.componentDidMount=function(){var e=this;h.a.getUser().then((function(t){e.setState({userId:t.account_number},(function(){return e.loadNamespace()}))}))},t.prototype.render=function(){var e=this,t=this.state,a=t.namespace,n=t.errorMessages,p=t.saving,u=t.redirect,h=t.params,w=t.userId,C=t.unauthorized;return a?u?d.createElement(m.a,{to:u}):d.createElement(d.Fragment,null,d.createElement(f.K,{namespace:a,breadcrumbs:[E.c,{name:a.name,url:Object(E.b)(E.a.myCollections,{namespace:a.name})},{name:_(o||(o=P(["Edit"],["Edit"])))}],tabs:[_(r||(r=P(["Edit details"],["Edit details"]))),_(s||(s=P(["Edit resources"],["Edit resources"])))],params:h,updateParams:function(t){return e.updateParams(t)}}),d.createElement(f.b,{alerts:this.state.alerts,closeAlert:function(t){return e.closeAlert(t)}}),C?d.createElement(f.t,null):d.createElement(f.C,null,d.createElement("section",{className:"body"},"edit details"===h.tab.toLowerCase()?d.createElement(f.F,{userId:w,namespace:a,errorMessages:n,updateNamespace:function(t){return e.setState({namespace:t,unsavedData:!0})}}):d.createElement(f.P,{updateNamespace:function(t){return e.setState({namespace:t,unsavedData:!0})},namespace:a}),d.createElement(g.a,null,d.createElement(b.a,null,d.createElement(v.a,{variant:"primary",onClick:function(){return e.saveNamespace()}},_(l||(l=P(["Save"],["Save"])))),d.createElement(v.a,{variant:"secondary",onClick:function(){return e.cancel()}},_(i||(i=P(["Cancel"],["Cancel"])))),p?d.createElement(y.a,null):null),this.state.unsavedData?d.createElement("div",{style:{color:"red"}},_(c||(c=P(["You have unsaved changes"],["You have unsaved changes"])))):null)))):null},Object.defineProperty(t.prototype,"updateParams",{get:function(){return w.a.updateParamsMixin()},enumerable:!1,configurable:!0}),t.prototype.loadNamespace=function(){var e=this;h.h.get(this.props.match.params.namespace).then((function(t){t.data.links.push({name:"",url:""}),e.setState({namespace:t.data})})).catch((function(t){e.setState({unauthorized:!0})}))},t.prototype.saveNamespace=function(){var e=this;this.setState({saving:!0},(function(){for(var t=S({},e.state.namespace),a=[],n=0,o=t.links;n<o.length;n++){var r=o[n];""===r.url&&""===r.name||a.push(r)}t.links=a,h.h.update(e.state.namespace.name,t).then((function(t){e.setState({namespace:t.data,errorMessages:{},saving:!1,unsavedData:!1,redirect:Object(E.b)(E.a.myCollections,{namespace:e.state.namespace.name})})})).catch((function(t){var a=t.response;400===a.status?e.setState({errorMessages:Object(w.g)(t),saving:!1}):404===a.status&&e.setState({alerts:e.state.alerts.concat({variant:"danger",title:_(p||(p=P(["API Error: ",""],["API Error: ",""])),t.response.status),description:_(u||(u=P(["You don't have permissions to update this namespace."],["You don't have permissions to update this namespace."])))}),saving:!1})}))}))},Object.defineProperty(t.prototype,"closeAlert",{get:function(){return Object(f.bb)("alerts")},enumerable:!1,configurable:!0}),t.prototype.cancel=function(){this.setState({redirect:Object(E.b)(E.a.myCollections,{namespace:this.state.namespace.name})})},t}(d.Component);t.default=Object(m.g)(O)},776:function(e,t,a){"use strict";a.r(t),a.d(t,"NamespaceDetail",(function(){return H}));var n,o,r=a(0),s=(a(758),a(35)),l=a(31),i=a(734),c=a(661),p=a(102),u=a(732),d=a(683),m=a(232),f=a(23),h=a(236),g=(a(759),a(136)),b=a.n(g),v=a(728),y=a(726),E=a(727),w=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),C=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};!function(e){e.uploading="uploading",e.waiting="waiting"}(o||(o={}));var P,S,O,x,I,j,N,k,A,M,R,T,U,F=function(e){function t(t){var a=e.call(this,t)||this;return a.acceptedFileTypes=["application/x-gzip","application/gzip"],a.COLLECTION_NAME_REGEX=/[0-9a-z_]+\-[0-9a-z_]+\-[0-9A-Za-z.+-]+/,a.state={file:void 0,errors:"",uploadProgress:0,uploadStatus:o.waiting},a}return w(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.isOpen,n=t.collection,s=this.state,l=s.file,i=s.errors,c=s.uploadProgress,u=s.uploadStatus;return r.createElement(v.a,{variant:"small",title:n?_(P||(P=C(["New version of "],["New version of "])))+n.name:_(S||(S=C(["New collection"],["New collection"]))),isOpen:a,onClose:function(){return e.handleClose()},actions:[r.createElement(p.a,{key:"confirm",variant:"primary",onClick:function(){return e.saveFile()},isDisabled:!this.canUpload()},_(O||(O=C(["Upload"],["Upload"])))),r.createElement(p.a,{key:"cancel",variant:"secondary",onClick:function(){return e.handleClose()}},_(x||(x=C(["Cancel"],["Cancel"]))))]},r.createElement("div",{className:"upload-collection"},r.createElement("form",null,r.createElement("input",{disabled:u!==o.waiting,className:"upload-file",type:"file",id:"collection-widget",onChange:function(t){return e.handleFileUpload(t.target.files)}}),r.createElement("label",{className:"upload-file-label",htmlFor:"collection-widget"},r.createElement("div",{className:"upload-box"},r.createElement("div",{className:"upload-button"},this.renderFileIcon()),r.createElement("div",{className:"upload-text"},null!=l?l.name:_(I||(I=C(["Select file"],["Select file"]))),r.createElement("div",{className:"loading-bar",style:{width:100*c+"%"}}))))),i?r.createElement("span",{className:"file-error-messages"},r.createElement("i",{className:"pficon-error-circle-o"})," ",i):null))},t.prototype.canUpload=function(){return!this.state.errors&&(this.state.uploadStatus===o.waiting&&!!this.state.file)},t.prototype.renderFileIcon=function(){switch(this.state.uploadStatus){case o.uploading:return r.createElement(y.a,{className:"fa-spin"});default:return r.createElement(E.a,null)}},t.prototype.handleFileUpload=function(e){var t=e[0],a=this.props.collection;e.length>1?this.setState({errors:_(j||(j=C(["Please select no more than one file."],["Please select no more than one file."])))}):this.acceptedFileTypes.includes(t.type)?this.COLLECTION_NAME_REGEX.test(t.name)?a&&a.name!==t.name.split("-")[1]?this.setState({errors:_(A||(A=C(["The collection you have selected doesn't appear to match ",""],["The collection you have selected doesn't appear to match ",""])),a.name),file:t,uploadProgress:0}):this.props.namespace!=t.name.split("-")[0]?this.setState({errors:_(M||(M=C(["The collection you have selected does not match this namespace."],["The collection you have selected does not match this namespace."]))),file:t,uploadProgress:0}):this.setState({errors:"",file:t,uploadProgress:0}):this.setState({errors:_(k||(k=C(["Invalid file name. Collections must be formatted as 'namespace-collection_name-1.0.0'"],["Invalid file name. Collections must be formatted as 'namespace-collection_name-1.0.0'"]))),file:t,uploadProgress:0}):this.setState({errors:_(N||(N=C(["Invalid file format."],["Invalid file format."]))),file:t,uploadProgress:0})},t.prototype.saveFile=function(){var e=this;this.setState({uploadStatus:o.uploading});var t={file:this.state.file,sha256:""};this.cancelToken=f.b.getCancelToken(),f.b.upload("inbound-"+this.props.namespace,t,(function(t){e.setState({uploadProgress:t.loaded/t.total})}),this.cancelToken).then((function(t){e.props.onUploadSuccess(t)})).catch((function(t){var a="";if(!b.a.isCancel(t))if(t.response.data.errors){for(var n=[],r=0,s=t.response.data.errors;r<s.length;r++){var l=s[r];n.push(l.detail||l.title||l.code||_(R||(R=C(["API error. Status code: "],["API error. Status code: "])))+l.status)}a=n.join(", ")}else a=_(T||(T=C(["API error. Status code: "],["API error. Status code: "])))+t.response.status;e.setState({uploadStatus:o.waiting,errors:a})})).finally((function(){e.cancelToken=null}))},t.prototype.handleClose=function(){var e=this,t=null;this.cancelToken&&this.state.uploadStatus===o.uploading&&(t=_(U||(U=C(["Collection upload canceled"],["Collection upload canceled"]))),this.cancelToken.cancel(t)),this.setState({file:void 0,errors:"",uploadProgress:0,uploadStatus:o.waiting},(function(){return e.props.setOpen(!1,t)}))},t}(r.Component),L=a(17),z=a(8),D=a(53),Y=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(t,a)};return function(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),J=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},G=function(){return(G=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},H=function(e){function t(t){var a=e.call(this,t)||this;a.nonAPIParams=["tab"],a.nonQueryStringParams=["namespace"];var n=L.a.parseParamString(t.location.search,["page","page_size"]);return n.namespace=t.match.params.namespace,a.state={collections:[],namespace:null,params:n,redirect:null,itemCount:0,showImportModal:!1,warning:"",updateCollection:null,showControls:!1},a}return Y(t,e),t.prototype.componentDidMount=function(){this.loadAll()},t.prototype.render=function(){var e=this,t=this.state,a=t.collections,n=t.namespace,o=t.params,l=t.redirect,d=t.itemCount,m=t.showImportModal,f=t.warning,g=t.updateCollection;if(l)return r.createElement(s.a,{to:l});if(!n)return r.createElement(h.z,null);var b=[_(K||(K=J(["Collections"],["Collections"])))];this.state.showControls&&b.push(_(Q||(Q=J(["CLI Configuration"],["CLI Configuration"]))));var v=o.tab||"collections";n.resources&&b.push(_(X||(X=J(["Resources"],["Resources"]))));var y=Object(L.e)("inbound-"+n.name),E=0===d&&!Object(L.d)(o,["keywords"]),w=function(t){return e.updateParams(t,(function(){return e.loadCollections()}))},C=["namespace","page","page_size","sort","tab","view_type"];return r.createElement(r.Fragment,null,r.createElement(F,{isOpen:m,onUploadSuccess:function(t){return e.props.history.push(Object(z.b)(z.a.myImports,{},{namespace:n.name}))},setOpen:function(t,a){return e.toggleImportModal(t,a)},collection:g,namespace:n.name}),f?r.createElement(i.a,{style:{position:"fixed",right:"5px",top:"80px",zIndex:300},variant:"warning",title:f,actionClose:r.createElement(c.a,{onClose:function(){return e.setState({warning:""})}})}):null,r.createElement(h.K,{namespace:n,breadcrumbs:[z.c,{name:n.name}],tabs:b,params:o,updateParams:function(t){return e.updateParams(t)},pageControls:this.renderPageControls(),contextSelector:r.createElement(h.O,{selectedRepo:this.context.selectedRepo,path:this.props.match.path,pathParams:{namespace:n.name}}),filters:"collections"===v.toLowerCase()?r.createElement("div",{className:"toolbar-wrapper namespace-detail"},r.createElement("div",{className:"toolbar"},r.createElement(h.i,{ignoredParams:C,params:o,updateParams:w}),r.createElement("div",{className:"pagination-container"},r.createElement(h.J,{params:o,updateParams:w,count:d,isTop:!0})))):null}),r.createElement(h.C,null,"collections"===v.toLowerCase()?E?r.createElement(h.s,{title:_(Z||(Z=J(["No collections yet"],["No collections yet"]))),description:_(q||(q=J(["Collections will appear once uploaded"],["Collections will appear once uploaded"]))),button:this.state.showControls&&r.createElement(p.a,{onClick:function(){return e.setState({showImportModal:!0})}},_(B||(B=J(["Upload collection"],["Upload collection"]))))}):r.createElement("section",{className:"body"},r.createElement(h.l,{updateParams:w,params:o,ignoredParams:C,collections:a,itemCount:d,showControls:this.state.showControls,handleControlClick:function(t,a){return e.handleCollectionAction(t,a)},repo:this.context.selectedRepo})):null,"cli configuration"===v.toLowerCase()?r.createElement("section",{className:"body"},r.createElement("div",null,r.createElement(u.a,{isReadOnly:!0},y),r.createElement("div",null,r.createElement("b",null,"Note:")," Use this URL to configure ansible-galaxy to upload collections to this namespace. More information on ansible-galaxy configurations can be found"," ",r.createElement("a",{href:"https://docs.ansible.com/ansible/latest/galaxy/user_guide.html#configuring-the-ansible-galaxy-client",target:"_blank"},"here"),"."))):null,"resources"===v.toLowerCase()?this.renderResources(n):null))},t.prototype.handleCollectionAction=function(e,t){var a=this,n=this.state.collections.find((function(t){return t.id===e}));switch(t){case"upload":this.setState({updateCollection:n,showImportModal:!0});break;case"deprecate":f.b.setDeprecation(n,!n.deprecated,this.context.selectedRepo).then((function(){return a.loadCollections()})).catch((function(e){a.setState({warning:_(V||(V=J(["API Error: Failed to set deprecation."],["API Error: Failed to set deprecation."])))})}))}},t.prototype.renderResources=function(e){return r.createElement("div",{className:"pf-c-content preview"},r.createElement(m,{source:e.resources}))},t.prototype.loadCollections=function(){var e=this;f.b.list(G({},L.a.getReduced(this.state.params,this.nonAPIParams)),this.context.selectedRepo).then((function(t){e.setState({collections:t.data.data,itemCount:t.data.meta.count})}))},t.prototype.loadAll=function(){var e=this;Promise.all([f.b.list(G({},L.a.getReduced(this.state.params,this.nonAPIParams)),this.context.selectedRepo),f.j.get(this.props.match.params.namespace),f.h.get(this.props.match.params.namespace).catch((function(e){return e.response&&404===e.response.status?null:Promise.reject(e)}))]).then((function(t){e.setState({collections:t[0].data.data,itemCount:t[0].data.meta.count,namespace:t[1].data,showControls:!!t[2]})})).catch((function(t){e.setState({redirect:z.a.notFound})}))},Object.defineProperty(t.prototype,"updateParams",{get:function(){return L.a.updateParamsMixin(this.nonQueryStringParams)},enumerable:!1,configurable:!0}),t.prototype.renderPageControls=function(){var e=this,t=this.state.collections;return this.state.showControls?r.createElement("div",{style:{display:"flex",alignItems:"center"}}," ",0!==t.length&&r.createElement(p.a,{onClick:function(){return e.setState({showImportModal:!0})}},_(W||(W=J(["Upload collection"],["Upload collection"])))),r.createElement(h.S,{items:[r.createElement(d.a,{key:"1",component:r.createElement(l.b,{to:Object(z.b)(z.a.editNamespace,{namespace:this.state.namespace.name})},_($||($=J(["Edit namespace"],["Edit namespace"]))))}),r.createElement(d.a,{key:"2",component:r.createElement(l.b,{to:Object(z.b)(z.a.myImports,{},{namespace:this.state.namespace.name})},_(ee||(ee=J(["Imports"],["Imports"]))))})]})):r.createElement("div",{style:{display:"flex",alignItems:"center"}})},t.prototype.toggleImportModal=function(e,t){var a={showImportModal:e};t&&(a.warning=t),e||(a.updateCollection=null),this.setState(a)},t}(r.Component);H.contextType=D.a;var K,Q,X,Z,q,B,V,W,$,ee;t.default=Object(s.g)(H)}}]);
//# sourceMappingURL=namespace_detail.2f448ff93218355cee62.js.map