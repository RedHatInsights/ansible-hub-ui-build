(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{724:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,".toolbar {\n  padding-bottom: 16px;\n  display: flex;\n  justify-content: space-between; }\n\n.certified-icon {\n  color: var(--pf-global--success-color--100); }\n\n.rejected-icon {\n  color: var(--pf-global--danger-color--100); }\n\n.needs-review-icon {\n  color: var(--pf-global--info-color--100); }\n\n.control-column {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n\n.footer {\n  padding-top: 16px; }\n\n.updating-spinner {\n  color: var(--pf-global--info-color--100); }\n",""])},734:function(e,t,n){var a=n(724);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},i=n(7)(a,r);a.locals&&(e.exports=a.locals),e.hot.accept(724,(function(){var t=n(724);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var n,a=0;for(n in e){if(!t||e[n]!==t[n])return!1;a++}for(n in t)a--;return 0===a}(a.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)})),e.hot.dispose((function(){i()}))},747:function(e,t,n){"use strict";n.r(t);var a,r=n(2),i=n(488),o=n(53),c=n(486),s=n(112),l=n(280),u=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={tokenData:void 0},n}return u(t,e),t.prototype.componentDidMount=function(){var e=this;window.insights.chrome.auth.getOfflineToken().then((function(t){e.setState({tokenData:t.data})}))},t.prototype.render=function(){var e=this,t=this.state.tokenData;return r.createElement(r.Fragment,null,r.createElement(l.d,{title:"Token management"}),r.createElement(l.t,null,r.createElement(o.Section,{className:"body pf-c-content"},r.createElement("h2",null,"Offline token"),r.createElement("p",null,"Use this token to authenticate the ",r.createElement("code",null,"ansible-galaxy")," ","client."),t?r.createElement("div",null,r.createElement(c.a,null,t.refresh_token)):r.createElement(s.a,{onClick:function(){return e.loadToken()}},"Load token"),r.createElement("h2",null,"Manage tokens"),"To remove an existing token, visit"," ",r.createElement("a",{href:"https://sso.redhat.com/auth/realms/redhat-external/account/",target:"_blank"},"Red Hat SSO account managment"),".")))},t.prototype.loadToken=function(){window.insights.chrome.auth.doOffline()},t}(r.Component);t.default=Object(i.a)(d);try{tokeninsights.displayName="tokeninsights",tokeninsights.__docgenInfo={description:"",displayName:"tokeninsights",props:{wrappedComponentRef:{defaultValue:null,description:"",name:"wrappedComponentRef",required:!1,type:{name:"Ref<TokenPage>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/containers/token/token-insights.tsx#tokeninsights"]={docgenInfo:tokeninsights.__docgenInfo,name:"tokeninsights",path:"src/containers/token/token-insights.tsx#tokeninsights"})}catch(e){}},748:function(e,t,n){"use strict";n.r(t);var a,r=n(2),i=(n(734),n(4)),o=n(491),c=n(117),s=n(488),l=n(280),u=n(53),d=n(345),p=n(347),m=n(346),f=n(326),h=n(328),E=n(142),g=n(327),b=n(309),y=n(112),v=n(249),C=n(233),_=n(235),k=n(240),w=n(44),S=n(38),O=n(10),R=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),N=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,c=i.length;o<c;o++,r++)a[r]=i[o];return a},P=function(e){function t(t){var n=e.call(this,t)||this,a=S.a.parseParamString(t.location.search,["page","page_size"]);return a.page_size||(a.page_size=10),a.sort||(a.sort="-pulp_created"),a.certification||(a.certification=w.b.needsReview),n.state={versions:void 0,itemCount:0,params:a,loading:!0,updatingVersions:[],redirect:void 0,alerts:[]},n}return R(t,e),t.prototype.componentDidMount=function(){var e=this;w.a.isPartnerEngineer().then((function(t){t.data.is_partner_engineer?e.queryCollections():e.setState({redirect:O.a.notFound})}))},t.prototype.render=function(){var e=this,t=this.state,n=t.versions,a=t.params,i=t.itemCount,c=t.loading,s=t.redirect;if(s)return r.createElement(o.a,{to:s});return n?r.createElement(r.Fragment,null,r.createElement(l.d,{title:"Certification dashboard"}),r.createElement(l.b,{alerts:this.state.alerts,closeAlert:function(t){return e.closeAlert(t)}}),r.createElement(l.t,null,r.createElement(u.Section,{className:"body"},r.createElement("div",{className:"toolbar"},r.createElement(d.a,null,r.createElement(p.a,null,r.createElement(m.a,null,r.createElement(l.m,{updateParams:function(t){return e.updateParams(t,(function(){return e.queryCollections()}))},params:a,filterConfig:[{id:"namespace",title:"Namespace"},{id:"name",title:"Collection Name"},{id:"certification",title:"Certification Status",inputType:"select",options:[{id:"not_certified",title:"Rejected"},{id:"needs_review",title:"Needs Review"},{id:"certified",title:"Certified"}]}]}))),r.createElement(p.a,null,r.createElement(m.a,null,r.createElement(l.C,{options:[{id:"pulp_created",title:"Date created",type:"numeric"},{id:"namespace",title:"Namespace name",type:"alpha"},{id:"version",title:"Version number",type:"numeric"},{id:"name",title:"Collection name",type:"alpha"}],params:a,updateParams:function(t){return e.updateParams(t,(function(){return e.queryCollections()}))}})))),r.createElement(l.y,{params:a,updateParams:function(t){return e.updateParams(t,(function(){return e.queryCollections()}))},count:i,isTop:!0})),r.createElement("div",null,r.createElement(l.c,{updateParams:function(t){return e.updateParams(t,(function(){return e.queryCollections()}))},params:a,ignoredParams:["page_size","page","sort"]})),c?r.createElement(l.q,null):this.renderTable(n),r.createElement("div",{className:"footer"},r.createElement(l.y,{params:a,updateParams:function(t){return e.updateParams(t,(function(){return e.queryCollections()}))},count:i}))))):r.createElement(l.r,null)},t.prototype.renderTable=function(e){var t=this;return 0===e.length?r.createElement(f.a,{className:"empty",variant:f.b.full},r.createElement(h.a,{icon:v.b}),r.createElement(E.a,{headingLevel:"h2",size:"lg"},"No matches"),r.createElement(g.a,null,"Please try adjusting your search query.")):r.createElement("table",{"aria-label":"Collection versions",className:"content-table pf-c-table"},r.createElement("thead",null,r.createElement("tr",{"aria-labelledby":"headers"},r.createElement("th",null,"Namespace"),r.createElement("th",null,"Collection"),r.createElement("th",null,"Version"),r.createElement("th",null,"Date created"),r.createElement("th",null,"Status"),r.createElement("th",null))),r.createElement("tbody",null,e.map((function(e,n){return t.renderRow(e,n)}))))},t.prototype.renderStatus=function(e){if(this.state.updatingVersions.includes(e.id))return r.createElement("span",{className:"fa fa-lg fa-spin fa-spinner"});switch(e.certification){case w.b.certified:return r.createElement("span",null,r.createElement(C.b,{className:"certified-icon"})," Certified");case w.b.notCertified:return r.createElement("span",null,r.createElement(_.b,{className:"rejected-icon"})," Rejected");case w.b.needsReview:return r.createElement("span",null,r.createElement(k.b,{className:"needs-review-icon"})," Needs Review")}},t.prototype.renderRow=function(e,t){return r.createElement("tr",{"aria-labelledby":e.namespace+"."+e.name+" v"+e.version,key:t},r.createElement("td",null,e.namespace),r.createElement("td",null,e.name),r.createElement("td",null,r.createElement(c.a,{to:Object(O.b)(O.a.collection,{namespace:e.namespace,collection:e.name},{version:e.version})},e.version)),r.createElement("td",null,i(e.created_at).fromNow()),r.createElement("td",null,this.renderStatus(e)),r.createElement("td",null,r.createElement("div",{className:"control-column"},r.createElement("div",null,this.renderButtons(e)))))},t.prototype.renderButtons=function(e){var t=this,n=r.createElement(b.a,{key:"imports",component:r.createElement(c.a,{to:Object(O.b)(O.a.myImports,{},{namespace:e.namespace,name:e.name,version:e.version})},"View Import Logs")}),a=function(n){return r.createElement(b.a,{onClick:function(){return t.updateCertification(e,w.b.certified)},isDisabled:n,key:"certify"},"Certify")},i=function(n){return r.createElement(b.a,{onClick:function(){return t.updateCertification(e,w.b.notCertified)},isDisabled:n,className:"rejected-icon",key:"reject"},"Reject")};switch(e.certification){case w.b.certified:return r.createElement("span",null,r.createElement(l.D,{items:[a(!0),i(!1),n]}));case w.b.notCertified:return r.createElement("span",null,r.createElement(l.D,{items:[a(!1),i(!0),n]}));case w.b.needsReview:return r.createElement("span",null,r.createElement(y.a,{onClick:function(){return t.updateCertification(e,w.b.certified)}},r.createElement("span",null,"Certify")),r.createElement(l.D,{items:[i(!1),n]}))}},t.prototype.updateCertification=function(e,t){var n=this;this.setState({updatingVersions:this.state.updatingVersions.concat([e.id])},(function(){return w.d.setCertifiation(e.namespace,e.name,e.version,t).then((function(){return w.d.list({namespace:e.namespace,name:e.name,version:e.version}).then((function(e){var t=e.data.data[0],a=N(n.state.versions),r=a.findIndex((function(e){return e.id===t.id}));a[r]=t,n.setState({versions:a,updatingVersions:n.state.updatingVersions.filter((function(e){return e!=t.id}))})}))})).catch((function(t){n.setState({updatingVersions:n.state.updatingVersions.filter((function(t){return t!=e.id})),alerts:n.state.alerts.concat({variant:"danger",title:"API Error: "+t.response.status,description:"Could not update the certification status for "+e.namespace+"."+e.name+"."+e.version+"."})})}))}))},t.prototype.queryCollections=function(){var e=this;this.setState({loading:!0},(function(){return w.d.list(e.state.params).then((function(t){return e.setState({versions:t.data.data,itemCount:t.data.meta.count,loading:!1,updatingVersions:[]})}))}))},Object.defineProperty(t.prototype,"updateParams",{get:function(){return S.a.updateParamsMixin()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeAlert",{get:function(){return Object(l.I)("alerts")},enumerable:!0,configurable:!0}),t}(r.Component);t.default=Object(s.a)(P);try{certificationdashboard.displayName="certificationdashboard",certificationdashboard.__docgenInfo={description:"",displayName:"certificationdashboard",props:{wrappedComponentRef:{defaultValue:null,description:"",name:"wrappedComponentRef",required:!1,type:{name:"Ref<CertificationDashboard>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/containers/certification-dashboard/certification-dashboard.tsx#certificationdashboard"]={docgenInfo:certificationdashboard.__docgenInfo,name:"certificationdashboard",path:"src/containers/certification-dashboard/certification-dashboard.tsx#certificationdashboard"})}catch(e){}}}]);
//# sourceMappingURL=settings.js.map