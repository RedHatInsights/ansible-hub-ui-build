{"version":3,"file":"js/settings.1652092738287.5458c3818b95642a37d9.js","mappings":"0ZAwEMA,EAAAA,SAAAA,I,6bAIJ,WAAYC,GAAO,sBACjB,cAAMA,GAEN,IAAMC,EAASC,EAAAA,GAAAA,iBAA6BF,EAAMG,SAASC,OAAQ,CACjE,OACA,cALe,OAQZH,EAAM,YACTA,EAAM,UAAgB,IAGnBA,EAAM,OACTA,EAAM,KAAW,iBAGdA,EAAM,aACTA,EAAM,WAAiB,WAGzB,EAAKI,MAAQ,CACXC,cAAUC,EACVC,UAAW,EACXP,OAAQA,EACRQ,SAAS,EACTC,iBAAkB,GAClBC,OAAQ,GACRC,cAAc,EACdC,UAAW,GACXC,4BAA4B,EAC5BC,gCAA4BR,GA9Bb,E,gDAkCnB,WAEKS,KAAKC,QAAQC,OACdF,KAAKC,QAAQC,KAAKC,cACjBH,KAAKC,QAAQC,KAAKE,kBAAkBC,gBAIrCL,KAAKM,mBAFLN,KAAKO,SAAS,CAAEX,cAAc,M,oBAMlC,WAAS,aACP,EAA+DI,KAAKX,MAA5DC,EAAR,EAAQA,SAAUL,EAAlB,EAAkBA,OAAQO,EAA1B,EAA0BA,UAAWC,EAArC,EAAqCA,QAASG,EAA9C,EAA8CA,aAE9C,OAAKN,GAAaM,EAKhB,gBAAC,WAAD,KACE,gBAAC,KAAD,CAAYY,MAAO,+BACnB,gBAAC,KAAD,CACEb,OAAQK,KAAKX,MAAMM,OACnBc,WAAY,SAACC,GAAD,OAAO,EAAKD,WAAWC,MAEpCd,EACC,gBAAC,KAAD,MAEA,gBAAC,KAAD,CAAMe,UAAU,+BACd,2BAASA,UAAU,OAAO,UAAQ,QAChC,uBAAKA,UAAU,+CACb,gBAAC,EAAAC,QAAD,KACE,gBAAC,EAAAC,aAAD,KACE,gBAAC,EAAAC,YAAD,KACE,gBAAC,KAAD,CACEjB,UAAWG,KAAKX,MAAMQ,UACtBkB,SAAU,SAACC,GACT,EAAKT,SAAS,CAAEV,UAAWmB,KAE7BC,aAAc,SAACC,GAAD,OACZ,EAAKD,aAAaC,GAAG,kBAAM,EAAKZ,uBAElCrB,OAAQA,EACRkC,aAAc,CACZ,CACEC,GAAI,YACJZ,MAAO,qBAET,CACEY,GAAI,OACJZ,MAAO,2BAET,CACEY,GAAI,aACJZ,MAAO,iBACPa,UAAW,SACXC,QAAS,CACP,CACEF,GAAIG,EAAAA,EAAAA,aACJf,MAAO,oBAET,CACEY,GAAIG,EAAAA,EAAAA,YACJf,MAAO,wBAET,CACEY,GAAIG,EAAAA,EAAAA,UACJf,MAAO,4BAUvB,gBAAC,KAAD,CACEvB,OAAQA,EACRgC,aAAc,SAACC,GAAD,OACZ,EAAKD,aAAaC,GAAG,kBAAM,EAAKZ,uBAElCkB,MAAOhC,EACPiC,OAAK,KAGT,2BACE,gBAAC,KAAD,CACER,aAAc,SAACC,GACb,EAAKD,aAAaC,GAAG,kBAAM,EAAKZ,sBAChC,EAAKC,SAAS,CAAEV,UAAW,MAE7BZ,OAAQA,EACRyC,cAAe,CAAC,YAAa,OAAQ,QACrCC,WAAY,CACVC,YAAU,eACPL,EAAAA,EAAAA,UAAsB,qBADf,SAEPA,EAAAA,EAAAA,YAAwB,yBAFjB,SAGPA,EAAAA,EAAAA,aAAyB,oBAHlB,IAMZM,UAAW,CACTD,WAAY,qBAIjBnC,EACC,gBAAC,KAAD,MAEAO,KAAK8B,YAAYxC,EAAUL,GAG7B,uBAAK0B,UAAU,UACb,gBAAC,KAAD,CACE1B,OAAQA,EACRgC,aAAc,SAACC,GAAD,OACZ,EAAKD,aAAaC,GAAG,kBAAM,EAAKZ,uBAElCkB,MAAOhC,MAIb,gBAAC,KAAD,CACEuC,OAAQ/B,KAAKX,MAAMS,2BACnBkC,SAAU,kBAAM,EAAKC,+BACrBC,SAAU,SAACC,GAAD,OAAO,EAAKC,kBAAkBD,QA9GzC,gBAAC,KAAD,Q,yBAsHX,SAAoB7C,EAAUL,GAAQ,WACpC,GAAwB,IAApBK,EAAS+C,OACX,OAAOC,EAAAA,EAAAA,IAAYrD,EAAQ,CAAC,YAAa,OAAQ,eAC/C,gBAAC,KAAD,MAEA,gBAAC,KAAD,CACEuB,MAAO,qCACP+B,YAAa,kDAInB,IAAMC,EAAmB,CACvBC,QAAS,CACP,CACEjC,MAAO,oBACPkC,KAAM,QACNtB,GAAI,aAEN,CACEZ,MAAO,qBACPkC,KAAM,QACNtB,GAAI,cAEN,CACEZ,MAAO,kBACPkC,KAAM,SACNtB,GAAI,WAEN,CACEZ,MAAO,uBACPkC,KAAM,SACNtB,GAAI,gBAEN,CACEZ,MAAO,iBACPkC,KAAM,OACNtB,GAAI,UAEN,CACEZ,MAAO,GACPkC,KAAM,OACNtB,GAAI,aAKV,OACE,yBACE,aAAY,8BACZT,UAAU,kCAEV,gBAAC,KAAD,CACEW,QAASkB,EACTvD,OAAQA,EACRgC,aAAc,SAACC,GAAD,OACZ,EAAKD,aAAaC,GAAG,kBAAM,EAAKZ,yBAGpC,6BACGhB,EAASqD,KAAI,SAACC,EAASlC,GAAV,OAAgB,EAAKmC,UAAUD,EAASlC,U,0BAM9D,SAAqBkC,GACnB,OAAI5C,KAAKX,MAAMK,iBAAiBoD,SAASF,GAChC,wBAAMjC,UAAU,gCAErBiC,EAAQG,gBAAgBD,SAASvB,EAAAA,EAAAA,WAEjC,gBAAC,EAAAyB,MAAD,CAAOC,QAAQ,UAAUC,MAAM,QAAQC,KAAM,gBAAC,KAAD,OACnB,WAAvBP,EAAQQ,WACL,8BACA,oBAINR,EAAQG,gBAAgBD,SAASvB,EAAAA,EAAAA,cAEjC,gBAAC,EAAAyB,MAAD,CAAOC,QAAQ,UAAUC,MAAM,MAAMC,KAAM,gBAAC,KAAD,OACxC,oBAIHP,EAAQG,gBAAgBD,SAASvB,EAAAA,EAAAA,aAEjC,gBAAC,EAAAyB,MAAD,CACEC,QAAQ,UACRC,MAAM,SACNC,KAAM,gBAAC,KAAD,OAEkB,aAAvBP,EAAQQ,YACTpD,KAAKC,QAAQoD,SAASC,sCAClB,qCACA,6BAVV,I,uBAgBF,SAAkBV,EAA4BW,GAC5C,OACE,sBAAIC,IAAKD,EAAO,UAAQ,8BACtB,0BAAKX,EAAQa,WACb,0BAAKb,EAAQc,MACb,0BACE,gBAAC,EAAAC,KAAD,CACEC,IAAIC,EAAAA,EAAAA,IACFC,EAAAA,GAAAA,iBACA,CACEL,UAAWb,EAAQa,UACnBM,WAAYnB,EAAQc,KACpBM,KAAMpB,EAAQG,gBAAgB,IAEhC,CACEH,QAASA,EAAQA,WAIpBA,EAAQA,UAGb,0BACE,gBAAC,KAAD,CAAeqB,KAAMrB,EAAQsB,cAE/B,0BAAKlE,KAAKmE,aAAavB,IACtB5C,KAAKoE,cAAcxB,M,2BAK1B,SAAsBA,GAA4B,aACxCyB,EAAiBrE,KAAKC,QAAtBoE,aAEFC,GACJD,MAAAA,OAAA,EAAAA,EAAcE,sBAAsBF,MAAAA,OAApC,EAAoCA,EAAcG,sBAEpD,GAAIxE,KAAKX,MAAMK,iBAAiBoD,SAASF,GACvC,OAAO,gBAAC,KAAD,MAGT,IAAM6B,GACJ,UAACzE,KAAKC,QAAQoD,SAASC,6CAAvB,WACuB,aAAvBV,EAAQQ,WACJsB,EAAgB,CACpBD,GACE,gBAAC,WAAD,CAAgBjB,IAAI,UAClB,gBAAC,EAAAmB,OAAD,CAAQC,QAAS,kBAAM,EAAKC,2BAA2BjC,KACpD,4BACO,KAGd,gBAAC,EAAA+B,OAAD,CACEnB,IAAI,UACJsB,WAAYL,EACZG,QAAS,kBACP,EAAKG,oBACHnC,EACArB,EAAAA,EAAAA,YACAA,EAAAA,EAAAA,aAIH+C,EAAU,2BAAsB,oBAEnCU,OAAOC,SAEHC,EACJ,gBAAC,EAAAC,aAAD,CACE3B,IAAI,UACJ4B,UACE,gBAAC,EAAAzB,KAAD,CACEC,IAAIC,EAAAA,EAAAA,IACFC,EAAAA,GAAAA,UACA,GACA,CACEL,UAAWb,EAAQa,UACnBC,KAAMd,EAAQc,KACdd,QAASA,EAAQA,WAIpB,8BAMHyC,EAAkB,SAACP,EAAqBQ,GAAtB,OACtB,gBAAC,EAAAH,aAAD,CACEP,QAAS,kBACP,EAAKG,oBAAoBnC,EAAS0C,EAAc/D,EAAAA,EAAAA,YAElDuD,WAAYA,EACZtB,IAAI,WAEHc,EAAU,2BAAsB,oBAI/BiB,EAAiB,SAACT,EAAqBQ,GAAtB,OACrB,gBAAC,EAAAH,aAAD,CACEP,QAAS,kBACP,EAAKG,oBACHnC,EACA0C,EACA/D,EAAAA,EAAAA,eAGJuD,WAAYA,EACZnE,UAAU,gBACV6C,IAAI,UAEH,mBAIL,OAAIZ,EAAQG,gBAAgBD,SAASvB,EAAAA,EAAAA,WAEjC,gBAAC,KAAD,CACEiE,WAAY,CACVH,GAAgB,EAAM9D,EAAAA,EAAAA,WACtBgE,GAAe,EAAOhE,EAAAA,EAAAA,WACtB2D,KAKJtC,EAAQG,gBAAgBD,SAASvB,EAAAA,EAAAA,cAEjC,gBAAC,KAAD,CACEiE,WAAY,CACVH,GAAgB,EAAO9D,EAAAA,EAAAA,cACvBgE,GAAe,EAAMhE,EAAAA,EAAAA,cACrB2D,KAKJtC,EAAQG,gBAAgBD,SAASvB,EAAAA,EAAAA,aAEjC,gBAAC,KAAD,CACEiE,WAAY,CACVD,GAAe,EAAOhE,EAAAA,EAAAA,aACtB2D,GAEFO,QAASf,SAPf,I,wCAaF,SAAmC9B,GACjC5C,KAAKO,SAAS,CACZT,4BAA4B,EAC5BC,2BAA4B6C,M,oDAIhC,WAAgC8C,GAAhC,yFACQ9C,EAAU5C,KAAKX,MAAMU,2BAD7B,SAEyB4F,EAAAA,GAAAA,cAA2B,CAChDjC,KAAM,YAHV,OAEQkC,EAFR,OAKQC,EALR,UAK+BC,mCAL/B,+CAKwFlD,EAAQxB,GALhG,KAOE2E,EAAAA,GAAAA,OAA4B,CAC1BL,KAAAA,EACA9D,WAAYgE,EAASI,KAAKC,QAAQ,GAAGC,UACrCL,kBAAAA,IAECM,MAAK,SAACC,GAGL,EAAKC,cACHD,EAAOJ,KAAKM,KAAKC,MAAM,GAAI,GAAGC,MAAM,KAAKC,MACzC7D,GAEF,EAAK8D,SACH,+GACoC9D,EAAQa,UAD5C,EACwDb,EAAQc,KADhE,EAEId,EAAQA,WAEZ,cAjBN,OAoBS,SAAC+D,GACN,MAA+BA,EAAMf,SAA7BgB,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,WAChB,EAAKtG,SAAS,CACZZ,OAAQ,EAAKN,MAAMM,OAAOmH,OAAO,CAC/B7D,QAAS,SACTzC,MAAO,mEAAyBoC,EAAQa,UAAjC,EAA8Cb,EAAQc,KAAtD,EAA+Dd,EAAQA,UAC9EL,aAAawE,EAAAA,EAAAA,IAAaH,EAAQC,UA1B1C,SA8BW,WACP,EAAK5E,iCAtCX,gD,uFA0CA,WACEjC,KAAKO,SAAS,CACZT,4BAA4B,EAC5BC,gCAA4BR,M,iCAIhC,SAA4BqD,EAAS0C,EAAc0B,GAAiB,WAC1DrH,EAAWK,KAAKX,MAAhBM,OAERK,KAAKO,SACH,CACEb,iBAAkB,KAEpB,kBACEuH,EAAAA,GAAAA,cACErE,EAAQa,UACRb,EAAQc,KACRd,EAAQA,QACR0C,EACA0B,GAECb,MACC,SAACC,GAIG,EAAK7F,SAAS,CACZb,iBAAkB,CAACkD,KAErB,EAAKyD,cAAcD,EAAOJ,KAAKkB,eAAgBtE,KAEnD,EAAK8D,SACH,uHAC6C9D,EAAQa,UADrD,EAEGb,EAAQc,KAFX,EAEmBd,EAAQA,WAG3B,YAvBN,OA0BS,SAAC+D,GACN,MAA+BA,EAAMf,SAA7BgB,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,WAChB,EAAKtG,SAAS,CACZb,iBAAkB,GAClBC,OAAQA,EAAOmH,OAAO,CACpB7D,QAAS,SACTzC,MAAO,8FAAoDoC,EAAQa,UAA5D,EAAyEb,EAAQc,KAAjF,EAA0Fd,EAAQA,UACzGL,aAAawE,EAAAA,EAAAA,IAAaH,EAAQC,e,2BAOhD,SAAsBT,EAAQxD,GAAS,WAC/BuE,EAASf,EACf,OAAOgB,EAAAA,GAAAA,IAAYD,GAAQhB,KAApB,mCAAyB,WAAOC,GAAP,oEACJ,YAAtBA,EAAOJ,KAAK3G,OAA6C,YAAtB+G,EAAOJ,KAAK3G,MADrB,gCAEtB,IAAIgI,SAAQ,SAACC,GAAD,OAAOC,WAAWD,EAAG,QAFX,OAG5B,EAAKjB,cAAcc,EAAQvE,GAHC,0BAIG,cAAtBwD,EAAOJ,KAAK3G,MAJO,0CAKrB4H,EAAAA,GAAAA,KAA0B,EAAK5H,MAAMJ,QAAQkH,KAA7C,mCACL,WAAOC,GAAP,iEACE,EAAK7F,SAAS,CACZjB,SAAU8G,EAAOJ,KAAKA,KACtBtG,iBAAkB,KAHtB,2CADK,wDALqB,QAc5B,EAAKa,SAAS,CACZb,iBAAkB,GAClBC,OAAQ,EAAKN,MAAMM,OAAOmH,OAAO,CAC/B7D,QAAS,SACTzC,MAAO,8FAAoDoC,EAAQa,UAA5D,EAAyEb,EAAQc,KAAjF,EAA0Fd,EAAQA,UACzGL,aAAawE,EAAAA,EAAAA,IAAa,IAAK,qCAnBP,4CAAzB,yD,8BA0BT,WAA2B,WACzB/G,KAAKO,SAAS,CAAEd,SAAS,IAAQ,kBAC/BwH,EAAAA,GAAAA,KAA0B,EAAK5H,MAAMJ,QAAQkH,MAAK,SAACC,GACjD,EAAK7F,SAAS,CACZjB,SAAU8G,EAAOJ,KAAKA,KACtBxG,UAAW4G,EAAOJ,KAAKwB,KAAKhG,MAC5B/B,SAAS,EACTC,iBAAkB,a,wBAM1B,WACE,OAAOR,EAAAA,GAAAA,sB,sBAGT,WACE,OAAOuI,EAAAA,EAAAA,IAAgB,Y,sBAGzB,SAAiBjH,EAAOyC,EAASV,GAC/BvC,KAAKO,SAAS,CACZZ,OAAQ,GAAF,eACDK,KAAKX,MAAMM,QADV,CAEJ,CACE4C,YAAAA,EACA/B,MAAAA,EACAyC,QAAAA,W,EAzkBJlE,CAA+B2I,EAAAA,WAglBrC,SAAeC,EAAAA,EAAAA,YAAW5I,GAE1BA,EAAuB6I,YAAcC,EAAAA,G,qOCxnB/BC,EAAAA,SAAAA,I,2bACJ,WAAY9I,GAAO,6BACjB,cAAMA,IAEDK,MAAQ,CACX0I,eAAWxI,EACXI,OAAQ,GACRqI,QAAS,IANM,E,oDAUnB,WAAgC,WAC9BC,EAAAA,GAAAA,OACG9B,MAAK,YAAc,MACZ+B,GACJ,UAFgB,EAAXlC,KAEAA,KAAKmC,MAAK,qBAAGC,UAA0BtF,SAAS,sBAArD,eACIsF,YAAa,GACnB,EAAK7H,SAAS,CACZyH,QAASE,OANf,OASS,SAACG,GACN,MAA+BA,EAAEzC,SAAzBgB,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,WAChB,EAAKtG,SAAS,CACZyH,QAAS,GACTrI,OAAQ,GAAF,eACD,EAAKN,MAAMM,QADV,CAEJ,CACEsD,QAAS,SACTzC,MAAO,6CACP+B,aAAawE,EAAAA,EAAAA,IAAaH,EAAQC,a,+BAO9C,WAAoB,WAGlByB,OAAOC,SAASC,OAAOC,KAAKC,kBAAkBvC,MAAK,SAACC,GAClD,EAAK7F,SAAS,CAAEwH,UAAW3B,EAAOJ,UAGpChG,KAAK2I,0B,oBAGP,WAAS,aACP,EAA8B3I,KAAKX,MAA3B0I,EAAR,EAAQA,UAAWpI,EAAnB,EAAmBA,OACbiJ,EAAgB,qKAAH,iBACjBb,MAAAA,OADiB,EACjBA,EAAWc,qBADM,QACW,mBADX,qDAInB,OACE,gBAAC,WAAD,KACE,gBAAC,KAAD,CACElJ,OAAQA,EACRc,WAAY,SAACC,GAAD,OAAO,EAAKD,WAAWC,MAErC,gBAAC,KAAD,CAAYF,MAAO,2BACnB,gBAAC,KAAD,KACE,2BAASG,UAAU,qBACjB,0BAAK,0CACL,yBACE,mXAEE,gBAAC,EAAAgD,KAAD,CAAMC,GAAIE,EAAAA,GAAAA,eAFZ,EAME,gBAAC,EAAAH,KAAD,CAAMC,GAAIE,EAAAA,GAAAA,cAMhB,2BAASnD,UAAU,qBACjB,0BAAK,6CACL,yBACE,4LAEE,6BAFF,EAGE,qBACEmI,KAAK,qFACLC,OAAO,SACPC,IAAI,oBAQZ,2BAASrI,UAAU,qBACjB,0BAAK,yBACL,yBACE,wNAMDoH,EACC,2BACE,gBAAC,KAAD,KAAgBA,EAAUc,gBAG5B,2BACE,gBAAC,EAAAlE,OAAD,CACEC,QAAS,kBAAM,EAAKqE,cACpB,uBAGN,uBACEtI,UAAU,eACVuI,MAAO,CAAEC,WAAY,iCAErB,4BACE,yJAMF,gBAAC,KAAD,CACEC,QAAM,EACNC,YAAU,EACVpG,QAASqG,EAAAA,qBAAAA,WAERV,IAGL,0BAAK,yBACL,0IAEE,qBACEE,KAAK,0EACLC,OAAO,SACPC,IAAI,mBAOV,2BAASrI,UAAU,qBACjB,0BAAK,sBACL,yBACE,qIAKF,gBAAC,KAAD,CAAe0I,YAAU,IACtBE,EAAAA,EAAAA,IAAWvJ,KAAKX,MAAM2I,WAG3B,2BAASrH,UAAU,qBACjB,0BAAK,mBACL,yBACE,2IAKF,gBAAC,KAAD,CAAe0I,YAAU,GAAzB,yF,uBASV,WAIEf,OAAOC,SAASC,OAAOC,KAAKe,c,sBAG9B,WACE,OAAO/B,EAAAA,EAAAA,IAAgB,c,EAtLrBK,CAAkBJ,EAAAA,WA0LxB,SAAeC,EAAAA,EAAAA,YAAWG,GAC1BA,EAAUF,YAAcC,EAAAA","sources":["webpack:///./src/containers/certification-dashboard/certification-dashboard.tsx","webpack:///./src/containers/token/token-insights.tsx"],"sourcesContent":["import { t, Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport './certification-dashboard.scss';\n\nimport { withRouter, RouteComponentProps, Link } from 'react-router-dom';\nimport {\n  BaseHeader,\n  DateComponent,\n  EmptyStateFilter,\n  EmptyStateNoData,\n  EmptyStateUnauthorized,\n  ListItemActions,\n  Main,\n} from 'src/components';\nimport {\n  Toolbar,\n  ToolbarGroup,\n  ToolbarItem,\n  Button,\n  DropdownItem,\n  Label,\n} from '@patternfly/react-core';\n\nimport {\n  ExclamationTriangleIcon,\n  ExclamationCircleIcon,\n  CheckCircleIcon,\n} from '@patternfly/react-icons';\n\nimport {\n  CollectionVersionAPI,\n  CollectionVersion,\n  TaskAPI,\n  CertificateUploadAPI,\n  Repositories,\n} from 'src/api';\nimport { errorMessage, filterIsSet, ParamHelper } from 'src/utilities';\nimport {\n  LoadingPageWithHeader,\n  CompoundFilter,\n  LoadingPageSpinner,\n  AppliedFilters,\n  Pagination,\n  AlertList,\n  closeAlertMixin,\n  AlertType,\n  SortTable,\n  UploadSingCertificateModal,\n} from 'src/components';\nimport { Paths, formatPath } from 'src/paths';\nimport { Constants } from 'src/constants';\nimport { AppContext } from 'src/loaders/app-context';\n\ninterface IState {\n  params: {\n    certification?: string;\n    namespace?: string;\n    collection?: string;\n    page?: number;\n    page_size?: number;\n  };\n  alerts: AlertType[];\n  versions: CollectionVersion[];\n  itemCount: number;\n  loading: boolean;\n  updatingVersions: CollectionVersion[];\n  unauthorized: boolean;\n  inputText: string;\n  uploadCertificateModalOpen: boolean;\n  versionToUploadCertificate: CollectionVersion;\n}\n\nclass CertificationDashboard extends React.Component<\n  RouteComponentProps,\n  IState\n> {\n  constructor(props) {\n    super(props);\n\n    const params = ParamHelper.parseParamString(props.location.search, [\n      'page',\n      'page_size',\n    ]);\n\n    if (!params['page_size']) {\n      params['page_size'] = 10;\n    }\n\n    if (!params['sort']) {\n      params['sort'] = '-pulp_created';\n    }\n\n    if (!params['repository']) {\n      params['repository'] = 'staging';\n    }\n\n    this.state = {\n      versions: undefined,\n      itemCount: 0,\n      params: params,\n      loading: true,\n      updatingVersions: [],\n      alerts: [],\n      unauthorized: false,\n      inputText: '',\n      uploadCertificateModalOpen: false,\n      versionToUploadCertificate: undefined,\n    };\n  }\n\n  componentDidMount() {\n    if (\n      !this.context.user ||\n      this.context.user.is_anonymous ||\n      !this.context.user.model_permissions.move_collection\n    ) {\n      this.setState({ unauthorized: true });\n    } else {\n      this.queryCollections();\n    }\n  }\n\n  render() {\n    const { versions, params, itemCount, loading, unauthorized } = this.state;\n\n    if (!versions && !unauthorized) {\n      return <LoadingPageWithHeader></LoadingPageWithHeader>;\n    }\n\n    return (\n      <React.Fragment>\n        <BaseHeader title={t`Approval dashboard`}></BaseHeader>\n        <AlertList\n          alerts={this.state.alerts}\n          closeAlert={(i) => this.closeAlert(i)}\n        />\n        {unauthorized ? (\n          <EmptyStateUnauthorized />\n        ) : (\n          <Main className='hub-certification-dashboard'>\n            <section className='body' data-cy='body'>\n              <div className='toolbar hub-certification-dashboard-toolbar'>\n                <Toolbar>\n                  <ToolbarGroup>\n                    <ToolbarItem>\n                      <CompoundFilter\n                        inputText={this.state.inputText}\n                        onChange={(text) => {\n                          this.setState({ inputText: text });\n                        }}\n                        updateParams={(p) =>\n                          this.updateParams(p, () => this.queryCollections())\n                        }\n                        params={params}\n                        filterConfig={[\n                          {\n                            id: 'namespace',\n                            title: t`Namespace`,\n                          },\n                          {\n                            id: 'name',\n                            title: t`Collection Name`,\n                          },\n                          {\n                            id: 'repository',\n                            title: t`Status`,\n                            inputType: 'select',\n                            options: [\n                              {\n                                id: Constants.NOTCERTIFIED,\n                                title: t`Rejected`,\n                              },\n                              {\n                                id: Constants.NEEDSREVIEW,\n                                title: t`Needs Review`,\n                              },\n                              {\n                                id: Constants.PUBLISHED,\n                                title: t`Approved`,\n                              },\n                            ],\n                          },\n                        ]}\n                      />\n                    </ToolbarItem>\n                  </ToolbarGroup>\n                </Toolbar>\n\n                <Pagination\n                  params={params}\n                  updateParams={(p) =>\n                    this.updateParams(p, () => this.queryCollections())\n                  }\n                  count={itemCount}\n                  isTop\n                />\n              </div>\n              <div>\n                <AppliedFilters\n                  updateParams={(p) => {\n                    this.updateParams(p, () => this.queryCollections());\n                    this.setState({ inputText: '' });\n                  }}\n                  params={params}\n                  ignoredParams={['page_size', 'page', 'sort']}\n                  niceValues={{\n                    repository: {\n                      [Constants.PUBLISHED]: t`Approved`,\n                      [Constants.NEEDSREVIEW]: t`Needs Review`,\n                      [Constants.NOTCERTIFIED]: t`Rejected`,\n                    },\n                  }}\n                  niceNames={{\n                    repository: t`Status`,\n                  }}\n                />\n              </div>\n              {loading ? (\n                <LoadingPageSpinner />\n              ) : (\n                this.renderTable(versions, params)\n              )}\n\n              <div className='footer'>\n                <Pagination\n                  params={params}\n                  updateParams={(p) =>\n                    this.updateParams(p, () => this.queryCollections())\n                  }\n                  count={itemCount}\n                />\n              </div>\n            </section>\n            <UploadSingCertificateModal\n              isOpen={this.state.uploadCertificateModalOpen}\n              onCancel={() => this.closeUploadCertificateModal()}\n              onSubmit={(d) => this.submitCertificate(d)}\n            />\n          </Main>\n        )}\n      </React.Fragment>\n    );\n  }\n\n  private renderTable(versions, params) {\n    if (versions.length === 0) {\n      return filterIsSet(params, ['namespace', 'name', 'repository']) ? (\n        <EmptyStateFilter />\n      ) : (\n        <EmptyStateNoData\n          title={t`No managed collections yet`}\n          description={t`Collections will appear once uploaded`}\n        />\n      );\n    }\n    const sortTableOptions = {\n      headers: [\n        {\n          title: t`Namespace`,\n          type: 'alpha',\n          id: 'namespace',\n        },\n        {\n          title: t`Collection`,\n          type: 'alpha',\n          id: 'collection',\n        },\n        {\n          title: t`Version`,\n          type: 'number',\n          id: 'version',\n        },\n        {\n          title: t`Date created`,\n          type: 'number',\n          id: 'pulp_created',\n        },\n        {\n          title: t`Status`,\n          type: 'none',\n          id: 'status',\n        },\n        {\n          title: '',\n          type: 'none',\n          id: 'certify',\n        },\n      ],\n    };\n\n    return (\n      <table\n        aria-label={t`Collection versions`}\n        className='hub-c-table-content pf-c-table'\n      >\n        <SortTable\n          options={sortTableOptions}\n          params={params}\n          updateParams={(p) =>\n            this.updateParams(p, () => this.queryCollections())\n          }\n        />\n        <tbody>\n          {versions.map((version, i) => this.renderRow(version, i))}\n        </tbody>\n      </table>\n    );\n  }\n\n  private renderStatus(version: CollectionVersion) {\n    if (this.state.updatingVersions.includes(version)) {\n      return <span className='fa fa-lg fa-spin fa-spinner' />;\n    }\n    if (version.repository_list.includes(Constants.PUBLISHED)) {\n      return (\n        <Label variant='outline' color='green' icon={<CheckCircleIcon />}>\n          {version.sign_state === 'signed'\n            ? t`Signed and approved`\n            : t`Approved`}\n        </Label>\n      );\n    }\n    if (version.repository_list.includes(Constants.NOTCERTIFIED)) {\n      return (\n        <Label variant='outline' color='red' icon={<ExclamationCircleIcon />}>\n          {t`Rejected`}\n        </Label>\n      );\n    }\n    if (version.repository_list.includes(Constants.NEEDSREVIEW)) {\n      return (\n        <Label\n          variant='outline'\n          color='orange'\n          icon={<ExclamationTriangleIcon />}\n        >\n          {version.sign_state === 'unsigned' &&\n          this.context.settings.GALAXY_REQUIRE_SIGNATURE_FOR_APPROVAL\n            ? t`Needs signature and review`\n            : t`Needs review`}\n        </Label>\n      );\n    }\n  }\n\n  private renderRow(version: CollectionVersion, index) {\n    return (\n      <tr key={index} data-cy='CertificationDashboard-row'>\n        <td>{version.namespace}</td>\n        <td>{version.name}</td>\n        <td>\n          <Link\n            to={formatPath(\n              Paths.collectionByRepo,\n              {\n                namespace: version.namespace,\n                collection: version.name,\n                repo: version.repository_list[0],\n              },\n              {\n                version: version.version,\n              },\n            )}\n          >\n            {version.version}\n          </Link>\n        </td>\n        <td>\n          <DateComponent date={version.created_at} />\n        </td>\n        <td>{this.renderStatus(version)}</td>\n        {this.renderButtons(version)}\n      </tr>\n    );\n  }\n\n  private renderButtons(version: CollectionVersion) {\n    const { featureFlags } = this.context;\n    // not checking namespace permissions here, auto_sign happens API side, so is the permission check\n    const canSign =\n      featureFlags?.collection_signing && featureFlags?.collection_auto_sign;\n\n    if (this.state.updatingVersions.includes(version)) {\n      return <ListItemActions />; // empty td;\n    }\n\n    const needUploadSignature =\n      (this.context.settings.GALAXY_REQUIRE_SIGNATURE_FOR_APPROVAL ?? true) &&\n      version.sign_state === 'unsigned';\n    const approveButton = [\n      needUploadSignature && (\n        <React.Fragment key='upload'>\n          <Button onClick={() => this.openUploadCertificateModal(version)}>\n            {t`Upload signature`}\n          </Button>{' '}\n        </React.Fragment>\n      ),\n      <Button\n        key='approve'\n        isDisabled={needUploadSignature}\n        onClick={() =>\n          this.updateCertification(\n            version,\n            Constants.NEEDSREVIEW,\n            Constants.PUBLISHED,\n          )\n        }\n      >\n        {canSign ? t`Sign and approve` : t`Approve`}\n      </Button>,\n    ].filter(Boolean);\n\n    const importsLink = (\n      <DropdownItem\n        key='imports'\n        component={\n          <Link\n            to={formatPath(\n              Paths.myImports,\n              {},\n              {\n                namespace: version.namespace,\n                name: version.name,\n                version: version.version,\n              },\n            )}\n          >\n            {t`View Import Logs`}\n          </Link>\n        }\n      />\n    );\n\n    const certifyDropDown = (isDisabled: boolean, originalRepo) => (\n      <DropdownItem\n        onClick={() =>\n          this.updateCertification(version, originalRepo, Constants.PUBLISHED)\n        }\n        isDisabled={isDisabled}\n        key='certify'\n      >\n        {canSign ? t`Sign and approve` : t`Approve`}\n      </DropdownItem>\n    );\n\n    const rejectDropDown = (isDisabled: boolean, originalRepo) => (\n      <DropdownItem\n        onClick={() =>\n          this.updateCertification(\n            version,\n            originalRepo,\n            Constants.NOTCERTIFIED,\n          )\n        }\n        isDisabled={isDisabled}\n        className='rejected-icon'\n        key='reject'\n      >\n        {t`Reject`}\n      </DropdownItem>\n    );\n\n    if (version.repository_list.includes(Constants.PUBLISHED)) {\n      return (\n        <ListItemActions\n          kebabItems={[\n            certifyDropDown(true, Constants.PUBLISHED),\n            rejectDropDown(false, Constants.PUBLISHED),\n            importsLink,\n          ]}\n        />\n      );\n    }\n    if (version.repository_list.includes(Constants.NOTCERTIFIED)) {\n      return (\n        <ListItemActions\n          kebabItems={[\n            certifyDropDown(false, Constants.NOTCERTIFIED),\n            rejectDropDown(true, Constants.NOTCERTIFIED),\n            importsLink,\n          ]}\n        />\n      );\n    }\n    if (version.repository_list.includes(Constants.NEEDSREVIEW)) {\n      return (\n        <ListItemActions\n          kebabItems={[\n            rejectDropDown(false, Constants.NEEDSREVIEW),\n            importsLink,\n          ]}\n          buttons={approveButton}\n        />\n      );\n    }\n  }\n\n  private openUploadCertificateModal(version: CollectionVersion) {\n    this.setState({\n      uploadCertificateModalOpen: true,\n      versionToUploadCertificate: version,\n    });\n  }\n\n  private async submitCertificate(file: File) {\n    const version = this.state.versionToUploadCertificate;\n    const response = await Repositories.getRepository({\n      name: 'staging',\n    });\n    const signed_collection = `${PULP_API_BASE_PATH}content/ansible/collection_versions/${version.id}/`;\n\n    CertificateUploadAPI.upload({\n      file,\n      repository: response.data.results[0].pulp_href,\n      signed_collection,\n    })\n      .then((result) => {\n        // This is a hack because it task return the full task api path:\n        // eg.: /api/automation-hub/pulp/api/v3/tasks/0be64cb4-3b7e-4a6b-b35d-c3b589923a90/\n        this.waitForUpdate(\n          result.data.task.slice(0, -1).split('/').pop(),\n          version,\n        );\n        this.addAlert(\n          <Trans>\n            Certificate for collection &quot;{version.namespace} {version.name}{' '}\n            v{version.version}&quot; has been successfully uploaded.\n          </Trans>,\n          'success',\n        );\n      })\n      .catch((error) => {\n        const { status, statusText } = error.response;\n        this.setState({\n          alerts: this.state.alerts.concat({\n            variant: 'danger',\n            title: t`The certificate for \"${version.namespace} ${version.name} v${version.version}\" could not be saved.`,\n            description: errorMessage(status, statusText),\n          }),\n        });\n      })\n      .finally(() => {\n        this.closeUploadCertificateModal();\n      });\n  }\n\n  private closeUploadCertificateModal() {\n    this.setState({\n      uploadCertificateModalOpen: false,\n      versionToUploadCertificate: undefined,\n    });\n  }\n\n  private updateCertification(version, originalRepo, destinationRepo) {\n    const { alerts } = this.state;\n    // Set the selected version to loading\n    this.setState(\n      {\n        updatingVersions: [],\n      },\n      () =>\n        CollectionVersionAPI.setRepository(\n          version.namespace,\n          version.name,\n          version.version,\n          originalRepo,\n          destinationRepo,\n        )\n          .then(\n            (result) =>\n              // Since pulp doesn't reply with the new object, perform a\n              // second query to get the updated data\n              {\n                this.setState({\n                  updatingVersions: [version],\n                });\n                this.waitForUpdate(result.data.remove_task_id, version);\n              },\n            this.addAlert(\n              <Trans>\n                Certification status for collection &quot;{version.namespace}{' '}\n                {version.name} v{version.version}&quot; has been successfully\n                updated.\n              </Trans>,\n              'success',\n            ),\n          )\n          .catch((error) => {\n            const { status, statusText } = error.response;\n            this.setState({\n              updatingVersions: [],\n              alerts: alerts.concat({\n                variant: 'danger',\n                title: t`Changes to certification status for collection \"${version.namespace} ${version.name} v${version.version}\" could not be saved.`,\n                description: errorMessage(status, statusText),\n              }),\n            });\n          }),\n    );\n  }\n\n  private waitForUpdate(result, version) {\n    const taskId = result;\n    return TaskAPI.get(taskId).then(async (result) => {\n      if (result.data.state === 'waiting' || result.data.state === 'running') {\n        await new Promise((r) => setTimeout(r, 500));\n        this.waitForUpdate(taskId, version);\n      } else if (result.data.state === 'completed') {\n        return CollectionVersionAPI.list(this.state.params).then(\n          async (result) => {\n            this.setState({\n              versions: result.data.data,\n              updatingVersions: [],\n            });\n          },\n        );\n      } else {\n        this.setState({\n          updatingVersions: [],\n          alerts: this.state.alerts.concat({\n            variant: 'danger',\n            title: t`Changes to certification status for collection \"${version.namespace} ${version.name} v${version.version}\" could not be saved.`,\n            description: errorMessage(500, t`Internal Server Error`),\n          }),\n        });\n      }\n    });\n  }\n\n  private queryCollections() {\n    this.setState({ loading: true }, () =>\n      CollectionVersionAPI.list(this.state.params).then((result) => {\n        this.setState({\n          versions: result.data.data,\n          itemCount: result.data.meta.count,\n          loading: false,\n          updatingVersions: [],\n        });\n      }),\n    );\n  }\n\n  private get updateParams() {\n    return ParamHelper.updateParamsMixin();\n  }\n\n  private get closeAlert() {\n    return closeAlertMixin('alerts');\n  }\n\n  private addAlert(title, variant, description?) {\n    this.setState({\n      alerts: [\n        ...this.state.alerts,\n        {\n          description,\n          title,\n          variant,\n        },\n      ],\n    });\n  }\n}\n\nexport default withRouter(CertificationDashboard);\n\nCertificationDashboard.contextType = AppContext;\n","import { t, Trans } from '@lingui/macro';\nimport * as React from 'react';\n\nimport { withRouter, RouteComponentProps, Link } from 'react-router-dom';\nimport { ClipboardCopyVariant, Button } from '@patternfly/react-core';\n\nimport { Paths } from 'src/paths';\nimport {\n  BaseHeader,\n  Main,\n  ClipboardCopy,\n  AlertList,\n  AlertType,\n  closeAlertMixin,\n} from 'src/components';\nimport { errorMessage, getRepoUrl } from 'src/utilities';\nimport { AppContext } from 'src/loaders/app-context';\nimport { MyDistributionAPI } from 'src/api';\n\ninterface IState {\n  tokenData: {\n    access_token: string;\n    expires_in: number;\n    id_token: string;\n    refresh_expires_in: number;\n    refresh_token: string;\n    scope: string;\n    session_state: string;\n    token_type: string;\n  };\n  alerts: AlertType[];\n  repoUrl: string;\n}\n\nclass TokenPage extends React.Component<RouteComponentProps, IState> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tokenData: undefined,\n      alerts: [],\n      repoUrl: '',\n    };\n  }\n\n  private getMyDistributionPath() {\n    MyDistributionAPI.list()\n      .then(({ data }) => {\n        const syncDistro =\n          data.data.find(({ base_path }) => base_path.includes('synclist'))\n            ?.base_path || '';\n        this.setState({\n          repoUrl: syncDistro,\n        });\n      })\n      .catch((e) => {\n        const { status, statusText } = e.response;\n        this.setState({\n          repoUrl: '',\n          alerts: [\n            ...this.state.alerts,\n            {\n              variant: 'danger',\n              title: t`Server URL could not be displayed.`,\n              description: errorMessage(status, statusText),\n            },\n          ],\n        });\n      });\n  }\n\n  componentDidMount() {\n    // this function will fail if chrome.auth.doOffline() hasn't been called\n    // so it never works the first time .. loadToken() causes a reload and then it works => no error handling\n    window.insights.chrome.auth.getOfflineToken().then((result) => {\n      this.setState({ tokenData: result.data });\n    });\n\n    this.getMyDistributionPath();\n  }\n\n  render() {\n    const { tokenData, alerts } = this.state;\n    const renewTokenCmd = `curl https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token -d grant_type=refresh_token -d client_id=\"cloud-services\" -d refresh_token=\"${\n      tokenData?.refresh_token ?? '{{ user_token }}'\n    }\" --fail --silent --show-error --output /dev/null`;\n\n    return (\n      <React.Fragment>\n        <AlertList\n          alerts={alerts}\n          closeAlert={(i) => this.closeAlert(i)}\n        ></AlertList>\n        <BaseHeader title={t`Connect to Hub`}></BaseHeader>\n        <Main>\n          <section className='body pf-c-content'>\n            <h2>{t`Connect Private Automation Hub`}</h2>\n            <p>\n              <Trans>\n                Use the{' '}\n                <Link to={Paths.repositories}>Repository Management</Link> page\n                to sync collections curated by your organization to the Red Hat\n                Certified repository in your private Automation Hub. Users with\n                the correct permissions can use the sync toggles on the{' '}\n                <Link to={Paths.search}>Collections</Link> page to control which\n                collections are added to their organization&apos;s sync\n                repository.\n              </Trans>\n            </p>\n          </section>\n          <section className='body pf-c-content'>\n            <h2>{t`Connect the ansible-galaxy client`}</h2>\n            <p>\n              <Trans>\n                Documentation on how to configure the{' '}\n                <code>ansible-galaxy</code> client can be found{' '}\n                <a\n                  href='https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/'\n                  target='_blank'\n                  rel='noreferrer'\n                >\n                  here\n                </a>\n                . Use the following parameters to configure the client.\n              </Trans>\n            </p>\n          </section>\n          <section className='body pf-c-content'>\n            <h2>{t`Offline token`}</h2>\n            <p>\n              <Trans>\n                Use this token to authenticate clients that need to download\n                content from Automation Hub. This is a secret token used to\n                protect your content. Store your API token in a secure location.\n              </Trans>\n            </p>\n            {tokenData ? (\n              <div>\n                <ClipboardCopy>{tokenData.refresh_token}</ClipboardCopy>\n              </div>\n            ) : (\n              <div>\n                <Button\n                  onClick={() => this.loadToken()}\n                >{t`Load token`}</Button>\n              </div>\n            )}\n            <div\n              className='pf-c-content'\n              style={{ paddingTop: 'var(--pf-global--spacer--md)' }}\n            >\n              <span>\n                <Trans>\n                  The token will expire after 30 days of inactivity. Run the\n                  command below periodically to prevent your token from\n                  expiring.\n                </Trans>\n              </span>\n              <ClipboardCopy\n                isCode\n                isReadOnly\n                variant={ClipboardCopyVariant.expansion}\n              >\n                {renewTokenCmd}\n              </ClipboardCopy>\n            </div>\n            <h2>{t`Manage tokens`}</h2>\n            <Trans>\n              To revoke a token or see all of your tokens, visit the{' '}\n              <a\n                href='https://sso.redhat.com/auth/realms/redhat-external/account/applications'\n                target='_blank'\n                rel='noreferrer'\n              >\n                offline API token management\n              </a>{' '}\n              page.\n            </Trans>\n          </section>\n          <section className='body pf-c-content'>\n            <h2>{t`Server URL`}</h2>\n            <p>\n              <Trans>\n                Use this URL to configure the API endpoints that clients need to\n                download content from Automation Hub.\n              </Trans>\n            </p>\n            <ClipboardCopy isReadOnly>\n              {getRepoUrl(this.state.repoUrl)}\n            </ClipboardCopy>\n          </section>\n          <section className='body pf-c-content'>\n            <h2>{t`SSO URL`}</h2>\n            <p>\n              <Trans>\n                Use this URL to configure the authentication URLs that clients\n                need to download content from Automation Hub.\n              </Trans>\n            </p>\n            <ClipboardCopy isReadOnly>\n              https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token\n            </ClipboardCopy>\n          </section>\n        </Main>\n      </React.Fragment>\n    );\n  }\n\n  private loadToken() {\n    // doOffline causes the page to refresh and will make the data\n    // available to getOfflineToken() when the component mounts after\n    // the reload\n    window.insights.chrome.auth.doOffline();\n  }\n\n  private get closeAlert() {\n    return closeAlertMixin('alerts');\n  }\n}\n\nexport default withRouter(TokenPage);\nTokenPage.contextType = AppContext;\n"],"names":["CertificationDashboard","props","params","ParamHelper","location","search","state","versions","undefined","itemCount","loading","updatingVersions","alerts","unauthorized","inputText","uploadCertificateModalOpen","versionToUploadCertificate","this","context","user","is_anonymous","model_permissions","move_collection","queryCollections","setState","title","closeAlert","i","className","Toolbar","ToolbarGroup","ToolbarItem","onChange","text","updateParams","p","filterConfig","id","inputType","options","Constants","count","isTop","ignoredParams","niceValues","repository","niceNames","renderTable","isOpen","onCancel","closeUploadCertificateModal","onSubmit","d","submitCertificate","length","filterIsSet","description","sortTableOptions","headers","type","map","version","renderRow","includes","repository_list","Label","variant","color","icon","sign_state","settings","GALAXY_REQUIRE_SIGNATURE_FOR_APPROVAL","index","key","namespace","name","Link","to","formatPath","Paths","collection","repo","date","created_at","renderStatus","renderButtons","featureFlags","canSign","collection_signing","collection_auto_sign","needUploadSignature","approveButton","Button","onClick","openUploadCertificateModal","isDisabled","updateCertification","filter","Boolean","importsLink","DropdownItem","component","certifyDropDown","originalRepo","rejectDropDown","kebabItems","buttons","file","Repositories","response","signed_collection","PULP_API_BASE_PATH","CertificateUploadAPI","data","results","pulp_href","then","result","waitForUpdate","task","slice","split","pop","addAlert","error","status","statusText","concat","errorMessage","destinationRepo","CollectionVersionAPI","remove_task_id","taskId","TaskAPI","Promise","r","setTimeout","meta","closeAlertMixin","React","withRouter","contextType","AppContext","TokenPage","tokenData","repoUrl","MyDistributionAPI","syncDistro","find","base_path","e","window","insights","chrome","auth","getOfflineToken","getMyDistributionPath","renewTokenCmd","refresh_token","href","target","rel","loadToken","style","paddingTop","isCode","isReadOnly","ClipboardCopyVariant","getRepoUrl","doOffline"],"sourceRoot":""}