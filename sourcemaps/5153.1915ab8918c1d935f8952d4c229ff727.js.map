{"version":3,"file":"js/5153.1afb3ac8c81ec8d13e69.js","mappings":"uWAuDA,IAAMA,EAAiB,SAACC,GAAI,OACzBC,EAAAA,EAAUC,WAAWF,IAASG,EAAAA,GAAKC,EAAEH,EAAAA,EAAUC,WAAWF,KAAWA,CAAI,EAEtEK,EAAU,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,I,IAAAE,G,EAAAH,E,gaACd,SAAAA,EAAYI,GAAO,IAAAC,EAaf,OAbeC,EAAAA,EAAAA,GAAA,KAAAN,IACjBK,EAAAF,EAAAI,KAAA,KAAMH,IACDI,MAAQ,CACXC,SAAS,EACTC,KAAM,KACNC,WAAY,KACZC,WAAY,GACZC,OAAQ,GACRC,oBAAoB,EACpBC,SAAU,GACVC,UAAW,GACXC,SAAU,KACVC,QAAS,MACTb,CACJ,CAybC,OAzbAc,EAAAA,EAAAA,GAAAnB,EAAA,EAAAoB,IAAA,oBAAAC,MAED,WACEC,KAAKC,aACP,GAAC,CAAAH,IAAA,uBAAAC,MAED,WACMC,KAAKd,MAAMU,SACbM,cAAcF,KAAKd,MAAMU,QAE7B,GAAC,CAAAE,IAAA,qBAAAC,MAED,SAAmBI,GACbA,EAAUC,YAAYhB,OAASY,KAAKlB,MAAMsB,YAAYhB,OACxDY,KAAKK,SAAS,CAAElB,SAAS,IACzBa,KAAKC,cAET,GAAC,CAAAH,IAAA,SAAAC,MAED,WAAS,IAAAO,EAAA,KACPC,EAUIP,KAAKd,MATPC,EAAOoB,EAAPpB,QACAC,EAAImB,EAAJnB,KACAC,EAAUkB,EAAVlB,WACAC,EAAUiB,EAAVjB,WACAE,EAAkBe,EAAlBf,mBACAD,EAAMgB,EAANhB,OACAE,EAAQc,EAARd,SACAC,EAASa,EAATb,UACAC,EAAQY,EAARZ,SAEIa,EAAc,CAClB,CAAEC,KAAKC,EAAAA,EAAAA,IAAWC,EAAAA,GAAMC,UAAWvC,KAAIG,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACzC,CAAExC,KAAMe,EAAOK,EAAW,KAExBqB,EAAe,KAInB,OAHIzB,IACFyB,GAAeC,EAAAA,EAAAA,GAAmB1B,EAAW2B,YAE3CrB,EACKsB,IAAAA,cAACC,EAAAA,SAAQ,CAACC,GAAIxB,IAGhBR,EACL8B,IAAAA,cAACG,EAAAA,GAAkB,MAEnBH,IAAAA,cAACA,IAAAA,SAAc,KACbA,IAAAA,cAACI,EAAAA,GAAS,CAAC9B,OAAQA,EAAQ+B,WAAY,SAACC,GAAC,OAAKjB,EAAKgB,WAAWC,EAAE,IAC/D/B,EAAqBQ,KAAKwB,oBAAsB,KACjDP,IAAAA,cAACQ,EAAAA,GAAU,CACTC,MAAOjC,EACPe,YAAaS,IAAAA,cAACU,EAAAA,GAAW,CAACC,MAAOpB,IACjCqB,aACE,CAAC,UAAW,WAAWC,SAAS1C,EAAKF,QACnC+B,IAAAA,cAACc,EAAAA,OAAM,CACLC,QAAQ,YACRC,QAAS,kBAAM3B,EAAKD,SAAS,CAAEb,oBAAoB,GAAO,GAAChB,EAAAA,GAAAC,EAE1D,CAAAoC,GAAA,YAIPqB,OACEjB,IAAAA,cAACkB,EAAAA,GAAe,CACdC,UAAW,oBACXF,OAAQ9C,EAAKF,UAInB+B,IAAAA,cAACoB,EAAAA,GAAI,KACHpB,IAAAA,cAACqB,EAAAA,KAAI,KACHrB,IAAAA,cAACqB,EAAAA,KAAI,CACHC,UAAW,CAAEC,QAAS,UACtBC,KAAM,CAAED,QAAS,WAEjBvB,IAAAA,cAACyB,EAAAA,SAAQ,KACPzB,IAAAA,cAAA,WAASmB,UAAU,kBACjBnB,IAAAA,cAAC0B,EAAAA,MAAK,CAACC,aAAa,KAAKC,KAAK,MAAIrE,EAAAA,GAAAC,EAC/B,CAAAoC,GAAA,YAEHI,IAAAA,cAAA,WACAA,IAAAA,cAAC6B,EAAAA,gBAAe,CAACC,cAAY,GAC3B9B,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACxB9D,EAAKf,OAGTe,EAAKf,OAASoB,GACbwB,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACxBzD,IAIPwB,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACzBjC,IAAAA,cAACkC,EAAAA,GAAa,CAACC,KAAMhE,EAAKiE,gBAG9BpC,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACzBjC,IAAAA,cAACkC,EAAAA,GAAa,CAACC,KAAMhE,EAAKkE,oBAMpCrC,IAAAA,cAACyB,EAAAA,SAAQ,KACPzB,IAAAA,cAAA,WAASmB,UAAU,kBACjBnB,IAAAA,cAAC0B,EAAAA,MAAK,CAACC,aAAa,KAAKC,KAAK,MAAIrE,EAAAA,GAAAC,EAC/B,CAAAoC,GAAA,YAEHI,IAAAA,cAAA,WACAA,IAAAA,cAAC6B,EAAAA,gBAAe,CAACC,cAAY,GAC3B9B,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACxB9D,EAAKmE,WAAanE,EAAKmE,WAAU/E,EAAAA,GAAAC,EAAG,CAAAoC,GAAA,aAGzCI,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACxB7D,EACC4B,IAAAA,cAACuC,EAAAA,KAAI,CACHrC,IAAIT,EAAAA,EAAAA,IAAWC,EAAAA,GAAM8C,WAAY,CAC/BrE,KAAM0B,KAGP1C,EAAeiB,EAAWhB,OACtBG,EAAAA,GAAAC,EAEP,CAAAoC,GAAA,aAINI,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACxB5D,EAAWoE,OACRpE,EAAWqE,KAAI,SAACC,GACd,IAAMC,GAAc9C,EAAAA,EAAAA,GAClB6C,EAAU5C,WAEZ,OACEC,IAAAA,cAACA,IAAAA,SAAc,CAACnB,IAAK+D,GACnB5C,IAAAA,cAACuC,EAAAA,KAAI,CACHrC,IAAIT,EAAAA,EAAAA,IAAWC,EAAAA,GAAM8C,WAAY,CAC/BrE,KAAMyE,KAGPzF,EAAewF,EAAUvF,OAE5B4C,IAAAA,cAAA,WAGN,IAAEzC,EAAAA,GAAAC,EACF,CAAAoC,GAAA,gBAMdI,IAAAA,cAACyB,EAAAA,SAAQ,KACPzB,IAAAA,cAAA,WAASmB,UAAU,kBACjBnB,IAAAA,cAAC0B,EAAAA,MAAK,CAACC,aAAa,KAAKC,KAAK,MAAIrE,EAAAA,GAAAC,EAC/B,CAAAoC,GAAA,YAEHI,IAAAA,cAAA,WACCvB,EAAUgE,OACTzC,IAAAA,cAAC6B,EAAAA,gBAAe,CAACC,cAAY,GAC1BrD,EAAUiE,KAAI,SAACG,EAAUC,GACxB,OACE9C,IAAAA,cAACA,IAAAA,SAAc,CAACnB,IAAKgE,EAASE,KAAOD,GACnC9C,IAAAA,cAAA,WACAA,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACxBY,EAASE,OAGbF,EAASG,YACRhD,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACxBY,EAASG,aAIfH,EAASzF,MACR4C,IAAAA,cAAC+B,EAAAA,qBAAoB,KACnB/B,IAAAA,cAACgC,EAAAA,oBAAmB,KAAAzE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACtBI,IAAAA,cAACiC,EAAAA,2BAA0B,KACxBY,EAASzF,OAMtB,KACgBG,EAAAA,GAAAC,EAElB,CAAAoC,GAAA,cAKRI,IAAAA,cAACqB,EAAAA,KAAI,CACHC,UAAW,CAAEC,QAAS,UACtBC,KAAM,CAAED,QAAS,WAEjBvB,IAAAA,cAACyB,EAAAA,SAAQ,MACLtD,EAAK8E,OACLjD,IAAAA,cAAA,WAASmB,UAAU,kBACjBnB,IAAAA,cAAC0B,EAAAA,MAAK,CAACC,aAAa,KAAKC,KAAK,MAAIrE,EAAAA,GAAAC,EAC/B,CAAAoC,GAAA,YAEHI,IAAAA,cAAA,WACC7B,EAAK+E,iBAAiBT,OACrBzC,IAAAA,cAAC6B,EAAAA,gBAAe,CAACC,cAAY,GAC1B3D,EAAK+E,iBACHC,UACAT,KAAI,SAACU,EAAQN,GACZ,OACE9C,IAAAA,cAACA,IAAAA,SAAc,CAACnB,IAAKiE,GACnB9C,IAAAA,cAAA,WACCqD,OAAOC,KAAKF,GAAQV,KAAI,SAAC7D,EAAKiE,GAC7B,QACIM,EAAOvE,IACPmB,IAAAA,cAAC+B,EAAAA,qBAAoB,CAAClD,IAAKA,EAAMiE,GAC/B9C,IAAAA,cAACgC,EAAAA,oBAAmB,KACjB,CACCuB,QAAOhG,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,WACT4D,KAAIjG,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,WACN3B,MAAKV,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,WACP6D,KAAIlG,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YACNf,KAAQ6E,EAAAA,EAAAA,YAAW7E,IAEvBmB,IAAAA,cAACiC,EAAAA,2BAA0B,KACxBmB,EAAOvE,IAKlB,IAAI,IAGV,KAGJmB,IAAAA,cAAC2D,EAAAA,GAAgB,CACfC,KAAMC,EAAAA,GACNpD,MAAKlD,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,WACPkE,YAAWvG,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,gBAKlBzB,EAAK8E,OACNjD,IAAAA,cAAA,WAASmB,UAAU,kBACjBnB,IAAAA,cAAC0B,EAAAA,MAAK,CAACC,aAAa,KAAKC,KAAK,MAAIrE,EAAAA,GAAAC,EAC/B,CAAAoC,GAAA,YAEHI,IAAAA,cAAA,WACAA,IAAAA,cAACA,IAAAA,SAAc,KACbA,IAAAA,cAAC0B,EAAAA,MAAK,CAACC,aAAa,MAAIpE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YAC1BI,IAAAA,cAAC+D,EAAAA,UAAS,KAAE5F,EAAK8E,MAAMa,aACvB9D,IAAAA,cAAC0B,EAAAA,MAAK,CAACC,aAAa,MAAIpE,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YAC1BI,IAAAA,cAAC+D,EAAAA,UAAS,CAAC5C,UAAW,kBACnBhD,EAAK8E,MAAMe,iBAWlC,GAAC,CAAAnF,IAAA,oBAAAC,MAED,WAA4B,IAAAmF,EAAA,KACpB7G,EAAO2B,KAAKd,MAAMO,SACxB,OACEwB,IAAAA,cAACkE,EAAAA,GAAY,CACXC,aAAc,kBAAMF,EAAK7E,SAAS,CAAEb,oBAAoB,GAAQ,EAChE6F,cAAe,kBAAMH,EAAKI,YAAY,EACtC5D,MAAKlD,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,WACP0E,mBAAkB/G,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,YAAarC,EAAAA,GAAAC,EAEhC,CAAAoC,GAAA,SAAA2E,OAAA,CAAAnH,KAAIA,KAGX,GAAC,CAAAyB,IAAA,aAAAC,MAED,WAAqB,IAAA0F,EAAA,KACnBC,EAA2B1F,KAAKd,MAAxBE,EAAIsG,EAAJtG,KAAMK,EAAQiG,EAARjG,SACdkG,EAAAA,GAAkBC,OAAM7E,EAAAA,EAAAA,GAAmB3B,EAAK4B,WAAY,CAC1D9B,MAAO,aAEN2G,MAAK,WACJJ,EAAKpF,SAAS,CACZlB,SAAS,EACTK,oBAAoB,EACpBD,OAAQ,GAAFuG,QAAAC,EAAAA,EAAAA,GACDN,EAAKvG,MAAMK,QAAM,CACpB,CACEyC,QAAS,UACTN,MAAOjC,EACPsF,YACE9D,IAAAA,cAAA+E,EAAAA,GAAA,CAAAnF,GAAA,SAAA2E,OAAA,CAAA/F,SAAmBA,UAK3BgG,EAAKxF,aACP,IAAE,OACK,SAACgG,GACN,IAAAC,EAA+BD,EAAEE,SAAzBjE,EAAMgE,EAANhE,OAAQkE,EAAUF,EAAVE,WAChBX,EAAKpF,SAAS,CACZlB,SAAS,EACTK,oBAAoB,EACpBD,OAAQ,GAAFuG,QAAAC,EAAAA,EAAAA,GACDN,EAAKvG,MAAMK,QAAM,CACpB,CACEyC,QAAS,SACTN,MAAKlD,EAAAA,GAAAC,EAAE,CAAAoC,GAAA,SAAA2E,OAAA,CAAA/F,SAAUA,KACjBsF,aAAasB,EAAAA,EAAAA,IAAanE,EAAQkE,QAIxCX,EAAKxF,aACP,GACJ,GAAC,CAAAH,IAAA,cAAAC,MAED,WAAsB,IAAAuG,EAAA,KACftG,KAAKd,MAAMU,SAAYI,KAAKd,MAAME,MACrCY,KAAKK,SAAS,CAAET,QAAS2G,aAAY,kBAAMD,EAAKrG,aAAa,GAAE,OAGjE,IAAMuG,EAASxG,KAAKlB,MAAMsB,YAAYhB,KACtC,OAAOuG,EAAAA,GAAkBc,IAAID,GAC1BX,MAAK,SAACa,GACL,IAAMC,EAAkB,GACpBtH,EAAa,KACXC,EAAa,GACbI,EAAY,GAKlB,GAJI,CAAC,WAAY,YAAa,UAAUoC,SAAS4E,EAAOE,KAAK1H,SAC3DgB,cAAcoG,EAAKpH,MAAMU,SACzB0G,EAAKjG,SAAS,CAAET,QAAS,QAEvB8G,EAAOE,KAAKC,YAAa,CAC3B,IAAM/F,GAAeC,EAAAA,EAAAA,GAAmB2F,EAAOE,KAAKC,aACpDF,EAAgBG,KACdnB,EAAAA,GAAkBc,IAAI3F,GACnB+E,MAAK,SAACa,GACLrH,EAAaqH,EAAOE,IACtB,IAAE,OACK,WACL,OAAO,CACT,IAEN,CAwDA,OAvDIF,EAAOE,KAAKG,YAAYrD,QAC1BgD,EAAOE,KAAKG,YAAYC,SAAQ,SAACC,GAC/B,IAAMpD,GAAc9C,EAAAA,EAAAA,GAAmBkG,GACvCN,EAAgBG,KACdnB,EAAAA,GAAkBc,IAAI5C,GACnBgC,MAAK,SAACa,GACLpH,EAAWwH,KAAKJ,EAAOE,KACzB,IAAE,OACK,WACL,OAAO,CACT,IAEN,IAEEF,EAAOE,KAAKM,0BAA0BxD,QACxCgD,EAAOE,KAAKM,0BAA0BF,SAAQ,SAAClD,GAC7C,IAAMrD,EAAMqD,EAASqD,QAAQC,mCAAoB,IAC3CvG,GAAKE,EAAAA,EAAAA,GAAmBN,GACxB4G,EAAW5G,EAAI6G,MAAM,KACvBC,EAAe,GACftD,EAAa,GAQboD,EAAS3D,QAAU,GACrB6D,EAAe,GAAHzB,OAAMuB,EAAS,GAAE,MAAAvB,OAAKuB,EAAS,IAC3CpD,EAAaoD,EAAS,IAGtBvD,EAAWuD,EAAS,GAGlBxG,EACF8F,EAAgBG,KACdU,EAAAA,GAAef,IAAIhG,GAChBoF,MAAK,SAACa,GACLhH,EAAUoH,KAAK,CACbzI,KAAMqI,EAAOE,KAAKvI,KAClB2F,KAAMuD,EACNtD,WAAYA,GAEhB,IAAE,OACK,WACL,OAAO,CACT,KAGJvE,EAAUoH,KAAK,CAAE9C,KAAMuD,GAE3B,IAEKE,QAAQC,IAAIf,GAAiBd,MAAK,WACvCS,EAAKjG,SAAS,CACZjB,KAAMsH,EAAOE,KACbtH,WAAAA,EACAD,WAAAA,EACAF,SAAS,EACTM,SAAUrB,EAAesI,EAAOE,KAAKvI,MACrCqB,UAAAA,GAEJ,GACF,IAAE,OACK,WACL4G,EAAKjG,SAAS,CAAEV,UAAUe,EAAAA,EAAAA,IAAWC,EAAAA,GAAMgH,WAC7C,GACJ,GAAC,CAAA7H,IAAA,aAAA2G,IAED,WACE,OAAOmB,EAAAA,EAAAA,IAAgB,SACzB,KAAClJ,CAAA,CAxca,CAASuC,IAAAA,WA2czB,SAAe4G,EAAAA,EAAAA,IAAWnJ,E","sources":["webpack:///./src/containers/task-management/task_detail.tsx"],"sourcesContent":["import { i18n } from '@lingui/core';\nimport { Trans, t } from '@lingui/macro';\nimport {\n  Button,\n  CodeBlock,\n  DescriptionList,\n  DescriptionListDescription,\n  DescriptionListGroup,\n  DescriptionListTerm,\n  Flex,\n  FlexItem,\n  Title,\n} from '@patternfly/react-core';\nimport { CubesIcon } from '@patternfly/react-icons';\nimport { capitalize } from 'lodash';\nimport React from 'react';\nimport { Link, Navigate } from 'react-router-dom';\nimport { GenericPulpAPI, TaskManagementAPI } from 'src/api';\nimport { TaskType } from 'src/api/response-types/task';\nimport {\n  AlertList,\n  AlertType,\n  BaseHeader,\n  Breadcrumbs,\n  ConfirmModal,\n  DateComponent,\n  EmptyStateCustom,\n  LoadingPageSpinner,\n  Main,\n  StatusIndicator,\n  closeAlertMixin,\n} from 'src/components';\nimport { Constants } from 'src/constants';\nimport { Paths, formatPath } from 'src/paths';\nimport { RouteProps, errorMessage, withRouter } from 'src/utilities';\nimport { parsePulpIDFromURL } from 'src/utilities/parse-pulp-id';\nimport './task.scss';\n\ninterface IState {\n  loading: boolean;\n  task: TaskType;\n  parentTask: TaskType;\n  childTasks: TaskType[];\n  alerts: AlertType[];\n  cancelModalVisible: boolean;\n  taskName: string;\n  resources: {\n    name?: string;\n    type: string;\n    pluginName?: string;\n  }[];\n  redirect: string;\n  polling: ReturnType<typeof setInterval>;\n}\n\nconst maybeTranslate = (name) =>\n  (Constants.TASK_NAMES[name] && i18n._(Constants.TASK_NAMES[name])) || name;\n\nclass TaskDetail extends React.Component<RouteProps, IState> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      task: null,\n      parentTask: null,\n      childTasks: [],\n      alerts: [],\n      cancelModalVisible: false,\n      taskName: '',\n      resources: [],\n      redirect: null,\n      polling: null,\n    };\n  }\n\n  componentDidMount() {\n    this.loadContent();\n  }\n\n  componentWillUnmount() {\n    if (this.state.polling) {\n      clearInterval(this.state.polling);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.routeParams.task !== this.props.routeParams.task) {\n      this.setState({ loading: true });\n      this.loadContent();\n    }\n  }\n\n  render() {\n    const {\n      loading,\n      task,\n      parentTask,\n      childTasks,\n      cancelModalVisible,\n      alerts,\n      taskName,\n      resources,\n      redirect,\n    } = this.state;\n    const breadcrumbs = [\n      { url: formatPath(Paths.taskList), name: t`Task management` },\n      { name: task ? taskName : '' },\n    ];\n    let parentTaskId = null;\n    if (parentTask) {\n      parentTaskId = parsePulpIDFromURL(parentTask.pulp_href);\n    }\n    if (redirect) {\n      return <Navigate to={redirect} />;\n    }\n\n    return loading ? (\n      <LoadingPageSpinner />\n    ) : (\n      <React.Fragment>\n        <AlertList alerts={alerts} closeAlert={(i) => this.closeAlert(i)} />\n        {cancelModalVisible ? this.renderCancelModal() : null}\n        <BaseHeader\n          title={taskName}\n          breadcrumbs={<Breadcrumbs links={breadcrumbs} />}\n          pageControls={\n            ['running', 'waiting'].includes(task.state) && (\n              <Button\n                variant='secondary'\n                onClick={() => this.setState({ cancelModalVisible: true })}\n              >\n                {t`Stop task`}\n              </Button>\n            )\n          }\n          status={\n            <StatusIndicator\n              className={'hub-c-task-status'}\n              status={task.state}\n            />\n          }\n        />\n        <Main>\n          <Flex>\n            <Flex\n              direction={{ default: 'column' }}\n              flex={{ default: 'flex_1' }}\n            >\n              <FlexItem>\n                <section className='body card-area'>\n                  <Title headingLevel='h2' size='lg'>\n                    {t`Task detail`}\n                  </Title>\n                  <br />\n                  <DescriptionList isHorizontal>\n                    <DescriptionListGroup>\n                      <DescriptionListTerm>{t`Task name`}</DescriptionListTerm>\n                      <DescriptionListDescription>\n                        {task.name}\n                      </DescriptionListDescription>\n                    </DescriptionListGroup>\n                    {task.name !== taskName && (\n                      <DescriptionListGroup>\n                        <DescriptionListTerm>{t`Descriptive name`}</DescriptionListTerm>\n                        <DescriptionListDescription>\n                          {taskName}\n                        </DescriptionListDescription>\n                      </DescriptionListGroup>\n                    )}\n                    <DescriptionListGroup>\n                      <DescriptionListTerm>{t`Finished at`}</DescriptionListTerm>\n                      <DescriptionListDescription>\n                        <DateComponent date={task.finished_at} />\n                      </DescriptionListDescription>\n                    </DescriptionListGroup>\n                    <DescriptionListGroup>\n                      <DescriptionListTerm>{t`Created on`}</DescriptionListTerm>\n                      <DescriptionListDescription>\n                        <DateComponent date={task.pulp_created} />\n                      </DescriptionListDescription>\n                    </DescriptionListGroup>\n                  </DescriptionList>\n                </section>\n              </FlexItem>\n              <FlexItem>\n                <section className='body card-area'>\n                  <Title headingLevel='h2' size='lg'>\n                    {t`Task groups`}\n                  </Title>\n                  <br />\n                  <DescriptionList isHorizontal>\n                    <DescriptionListGroup>\n                      <DescriptionListTerm>{t`Task group`}</DescriptionListTerm>\n                      <DescriptionListDescription>\n                        {task.task_group ? task.task_group : t`No task group`}\n                      </DescriptionListDescription>\n                    </DescriptionListGroup>\n                    <DescriptionListGroup>\n                      <DescriptionListTerm>{t`Parent task`}</DescriptionListTerm>\n                      <DescriptionListDescription>\n                        {parentTask ? (\n                          <Link\n                            to={formatPath(Paths.taskDetail, {\n                              task: parentTaskId,\n                            })}\n                          >\n                            {maybeTranslate(parentTask.name)}\n                          </Link>\n                        ) : (\n                          t`No parent task`\n                        )}\n                      </DescriptionListDescription>\n                    </DescriptionListGroup>\n                    <DescriptionListGroup>\n                      <DescriptionListTerm>{t`Child tasks`}</DescriptionListTerm>\n                      <DescriptionListDescription>\n                        {childTasks.length\n                          ? childTasks.map((childTask) => {\n                              const childTaskId = parsePulpIDFromURL(\n                                childTask.pulp_href,\n                              );\n                              return (\n                                <React.Fragment key={childTaskId}>\n                                  <Link\n                                    to={formatPath(Paths.taskDetail, {\n                                      task: childTaskId,\n                                    })}\n                                  >\n                                    {maybeTranslate(childTask.name)}\n                                  </Link>\n                                  <br />\n                                </React.Fragment>\n                              );\n                            })\n                          : t`No child task`}\n                      </DescriptionListDescription>\n                    </DescriptionListGroup>\n                  </DescriptionList>\n                </section>\n              </FlexItem>\n              <FlexItem>\n                <section className='body card-area'>\n                  <Title headingLevel='h2' size='lg'>\n                    {t`Reserve resources`}\n                  </Title>\n                  <br />\n                  {resources.length ? (\n                    <DescriptionList isHorizontal>\n                      {resources.map((resource, index) => {\n                        return (\n                          <React.Fragment key={resource.type + index}>\n                            <hr />\n                            <DescriptionListGroup>\n                              <DescriptionListTerm>{t`Type`}</DescriptionListTerm>\n                              <DescriptionListDescription>\n                                {resource.type}\n                              </DescriptionListDescription>\n                            </DescriptionListGroup>\n                            {resource.pluginName && (\n                              <DescriptionListGroup>\n                                <DescriptionListTerm>{t`Plugin`}</DescriptionListTerm>\n                                <DescriptionListDescription>\n                                  {resource.pluginName}\n                                </DescriptionListDescription>\n                              </DescriptionListGroup>\n                            )}\n                            {resource.name && (\n                              <DescriptionListGroup>\n                                <DescriptionListTerm>{t`Name`}</DescriptionListTerm>\n                                <DescriptionListDescription>\n                                  {resource.name}\n                                </DescriptionListDescription>\n                              </DescriptionListGroup>\n                            )}\n                          </React.Fragment>\n                        );\n                      })}\n                    </DescriptionList>\n                  ) : (\n                    t`There's no resource record`\n                  )}\n                </section>\n              </FlexItem>\n            </Flex>\n            <Flex\n              direction={{ default: 'column' }}\n              flex={{ default: 'flex_1' }}\n            >\n              <FlexItem>\n                {!task.error && (\n                  <section className='body card-area'>\n                    <Title headingLevel='h2' size='lg'>\n                      {t`Progress messages`}\n                    </Title>\n                    <br />\n                    {task.progress_reports.length ? (\n                      <DescriptionList isHorizontal>\n                        {task.progress_reports\n                          .reverse()\n                          .map((report, index) => {\n                            return (\n                              <React.Fragment key={index}>\n                                <hr />\n                                {Object.keys(report).map((key, index) => {\n                                  return (\n                                    !!report[key] && (\n                                      <DescriptionListGroup key={key + index}>\n                                        <DescriptionListTerm>\n                                          {{\n                                            message: t`Message`,\n                                            code: t`Code`,\n                                            state: t`State`,\n                                            done: t`Done`,\n                                          }[key] || capitalize(key)}\n                                        </DescriptionListTerm>\n                                        <DescriptionListDescription>\n                                          {report[key]}\n                                        </DescriptionListDescription>\n                                      </DescriptionListGroup>\n                                    )\n                                  );\n                                })}{' '}\n                              </React.Fragment>\n                            );\n                          })}\n                      </DescriptionList>\n                    ) : (\n                      <EmptyStateCustom\n                        icon={CubesIcon}\n                        title={t`There is no progress message.`}\n                        description={t`There is no progress message.`}\n                      />\n                    )}\n                  </section>\n                )}\n                {!!task.error && (\n                  <section className='body card-area'>\n                    <Title headingLevel='h2' size='lg'>\n                      {t`Error message`}\n                    </Title>\n                    <br />\n                    <React.Fragment>\n                      <Title headingLevel='h3'>{t`Description`}</Title>\n                      <CodeBlock>{task.error.description}</CodeBlock>\n                      <Title headingLevel='h3'>{t`Traceback`}</Title>\n                      <CodeBlock className={'hub-code-block'}>\n                        {task.error.traceback}\n                      </CodeBlock>\n                    </React.Fragment>\n                  </section>\n                )}\n              </FlexItem>\n            </Flex>\n          </Flex>\n        </Main>\n      </React.Fragment>\n    );\n  }\n\n  private renderCancelModal() {\n    const name = this.state.taskName;\n    return (\n      <ConfirmModal\n        cancelAction={() => this.setState({ cancelModalVisible: false })}\n        confirmAction={() => this.cancelTask()}\n        title={t`Stop task`}\n        confirmButtonTitle={t`Yes, stop`}\n      >\n        {t`${name} will stop running.`}\n      </ConfirmModal>\n    );\n  }\n\n  private cancelTask() {\n    const { task, taskName } = this.state;\n    TaskManagementAPI.patch(parsePulpIDFromURL(task.pulp_href), {\n      state: 'canceled',\n    })\n      .then(() => {\n        this.setState({\n          loading: true,\n          cancelModalVisible: false,\n          alerts: [\n            ...this.state.alerts,\n            {\n              variant: 'success',\n              title: taskName,\n              description: (\n                <Trans>Task &quot;{taskName}&quot; stopped successfully.</Trans>\n              ),\n            },\n          ],\n        });\n        this.loadContent();\n      })\n      .catch((e) => {\n        const { status, statusText } = e.response;\n        this.setState({\n          loading: true,\n          cancelModalVisible: false,\n          alerts: [\n            ...this.state.alerts,\n            {\n              variant: 'danger',\n              title: t`Task \"${taskName}\" could not be stopped.`,\n              description: errorMessage(status, statusText),\n            },\n          ],\n        });\n        this.loadContent();\n      });\n  }\n\n  private loadContent() {\n    if (!this.state.polling && !this.state.task) {\n      this.setState({ polling: setInterval(() => this.loadContent(), 10000) });\n    }\n\n    const taskId = this.props.routeParams.task;\n    return TaskManagementAPI.get(taskId)\n      .then((result) => {\n        const allRelatedTasks = [];\n        let parentTask = null;\n        const childTasks = [];\n        const resources = [];\n        if (['canceled', 'completed', 'failed'].includes(result.data.state)) {\n          clearInterval(this.state.polling);\n          this.setState({ polling: null });\n        }\n        if (result.data.parent_task) {\n          const parentTaskId = parsePulpIDFromURL(result.data.parent_task);\n          allRelatedTasks.push(\n            TaskManagementAPI.get(parentTaskId)\n              .then((result) => {\n                parentTask = result.data;\n              })\n              .catch(() => {\n                return true;\n              }),\n          );\n        }\n        if (result.data.child_tasks.length) {\n          result.data.child_tasks.forEach((child) => {\n            const childTaskId = parsePulpIDFromURL(child);\n            allRelatedTasks.push(\n              TaskManagementAPI.get(childTaskId)\n                .then((result) => {\n                  childTasks.push(result.data);\n                })\n                .catch(() => {\n                  return true;\n                }),\n            );\n          });\n        }\n        if (result.data.reserved_resources_record.length) {\n          result.data.reserved_resources_record.forEach((resource) => {\n            const url = resource.replace(PULP_API_BASE_PATH, '');\n            const id = parsePulpIDFromURL(url);\n            const urlParts = url.split('/');\n            let resourceType = '';\n            let pluginName = '';\n\n            // pulp hrefs follow this pattern for resources added by plugins:\n            // /<resource name>/<plugin name>/<resource type>/<pk>/\n            // Locks can be added on the entire resource (ex /repositories/) or on a specific\n            // instance of a resource (ex /repositories/ansible/ansible/123123/\n\n            // if the url has 3 or more segements, parse out the resource, plugin name, and resource type\n            if (urlParts.length >= 3) {\n              resourceType = `${urlParts[0]}: ${urlParts[2]}`;\n              pluginName = urlParts[1];\n              // otherwise, just return the resource type\n            } else {\n              resource = urlParts[0];\n            }\n\n            if (id) {\n              allRelatedTasks.push(\n                GenericPulpAPI.get(url)\n                  .then((result) => {\n                    resources.push({\n                      name: result.data.name,\n                      type: resourceType,\n                      pluginName: pluginName,\n                    });\n                  })\n                  .catch(() => {\n                    return true;\n                  }),\n              );\n            } else {\n              resources.push({ type: resourceType });\n            }\n          });\n        }\n        return Promise.all(allRelatedTasks).then(() => {\n          this.setState({\n            task: result.data,\n            childTasks,\n            parentTask,\n            loading: false,\n            taskName: maybeTranslate(result.data.name),\n            resources,\n          });\n        });\n      })\n      .catch(() => {\n        this.setState({ redirect: formatPath(Paths.notFound) });\n      });\n  }\n\n  private get closeAlert() {\n    return closeAlertMixin('alerts');\n  }\n}\n\nexport default withRouter(TaskDetail);\n"],"names":["maybeTranslate","name","Constants","TASK_NAMES","i18n","_","TaskDetail","_React$Component","_inherits","_super","props","_this","_classCallCheck","call","state","loading","task","parentTask","childTasks","alerts","cancelModalVisible","taskName","resources","redirect","polling","_createClass","key","value","this","loadContent","clearInterval","prevProps","routeParams","setState","_this2","_this$state","breadcrumbs","url","formatPath","Paths","taskList","id","parentTaskId","parsePulpIDFromURL","pulp_href","React","Navigate","to","LoadingPageSpinner","AlertList","closeAlert","i","renderCancelModal","BaseHeader","title","Breadcrumbs","links","pageControls","includes","Button","variant","onClick","status","StatusIndicator","className","Main","Flex","direction","default","flex","FlexItem","Title","headingLevel","size","DescriptionList","isHorizontal","DescriptionListGroup","DescriptionListTerm","DescriptionListDescription","DateComponent","date","finished_at","pulp_created","task_group","Link","taskDetail","length","map","childTask","childTaskId","resource","index","type","pluginName","error","progress_reports","reverse","report","Object","keys","message","code","done","capitalize","EmptyStateCustom","icon","CubesIcon","description","CodeBlock","traceback","_this3","ConfirmModal","cancelAction","confirmAction","cancelTask","confirmButtonTitle","values","_this4","_this$state2","TaskManagementAPI","patch","then","concat","_toConsumableArray","Trans","e","_e$response","response","statusText","errorMessage","_this5","setInterval","taskId","get","result","allRelatedTasks","data","parent_task","push","child_tasks","forEach","child","reserved_resources_record","replace","PULP_API_BASE_PATH","urlParts","split","resourceType","GenericPulpAPI","Promise","all","notFound","closeAlertMixin","withRouter"],"sourceRoot":""}