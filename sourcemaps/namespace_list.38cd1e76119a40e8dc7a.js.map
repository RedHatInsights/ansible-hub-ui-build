{"version":3,"file":"js/namespace_list.6a925d82797fd45a5ea1.js","mappings":"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","sources":["webpack:///./src/containers/namespace-list/my-namespaces.tsx","webpack:///./src/containers/namespace-list/namespace-list.tsx","webpack:///./src/containers/namespace-list/partners.tsx"],"sourcesContent":["import * as React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\nimport { NamespaceList } from './namespace-list';\nimport { Paths } from 'src/paths';\n\nclass MyNamespaces extends React.Component<RouteComponentProps, {}> {\n  render() {\n    return (\n      <NamespaceList\n        {...this.props}\n        namespacePath={Paths.myCollectionsByRepo}\n        filterOwner={true}\n      />\n    );\n  }\n}\n\nexport default withRouter(MyNamespaces);\n","import { t } from '@lingui/macro';\nimport * as React from 'react';\nimport './namespace-list.scss';\n\nimport { RouteComponentProps, Redirect } from 'react-router-dom';\n\nimport { ParamHelper } from 'src/utilities/param-helper';\nimport {\n  BaseHeader,\n  EmptyStateFilter,\n  EmptyStateNoData,\n  LinkTabs,\n  LoadingPageSpinner,\n  LoadingPageWithHeader,\n  NamespaceCard,\n  NamespaceModal,\n  Pagination,\n  Toolbar,\n  AlertList,\n} from 'src/components';\nimport { Button, ToolbarItem } from '@patternfly/react-core';\nimport { NamespaceAPI, NamespaceListType, MyNamespaceAPI } from 'src/api';\nimport { formatPath, namespaceBreadcrumb, Paths } from 'src/paths';\nimport { Constants } from 'src/constants';\nimport { AppContext } from 'src/loaders/app-context';\nimport { filterIsSet } from 'src/utilities';\n\ninterface IState {\n  namespaces: NamespaceListType[];\n  itemCount: number;\n  params: {\n    name?: string;\n    sort?: string;\n    page?: number;\n    page_size?: number;\n    tenant?: string;\n  };\n  hasPermission: boolean;\n  isModalOpen: boolean;\n  loading: boolean;\n  redirect?: string;\n}\n\ninterface IProps extends RouteComponentProps {\n  namespacePath: Paths;\n  filterOwner?: boolean;\n}\n\nexport class NamespaceList extends React.Component<IProps, IState> {\n  nonURLParams = ['tenant'];\n\n  constructor(props) {\n    super(props);\n\n    const params = ParamHelper.parseParamString(props.location.search, [\n      'page',\n      'page_size',\n    ]);\n\n    if (!params['page_size']) {\n      params['page_size'] = 20;\n    }\n\n    if (!params['sort']) {\n      params['sort'] = 'name';\n    }\n\n    this.state = {\n      namespaces: undefined,\n      itemCount: 0,\n      params: params,\n      hasPermission: true,\n      isModalOpen: false,\n      loading: true,\n    };\n  }\n\n  private handleModalToggle = () => {\n    this.setState(({ isModalOpen }) => ({\n      isModalOpen: !isModalOpen,\n    }));\n  };\n\n  componentDidMount() {\n    if (this.props.filterOwner) {\n      // Make a query with no params and see if it returns results to tell\n      // if the user can edit namespaces\n      MyNamespaceAPI.list({}).then((results) => {\n        if (results.data.meta.count !== 0) {\n          this.loadNamespaces();\n        } else {\n          this.setState({\n            hasPermission: false,\n            namespaces: [],\n            loading: false,\n          });\n        }\n      });\n    } else {\n      this.loadNamespaces();\n    }\n  }\n\n  componentWillUnmount() {\n    this.context.setAlerts([]);\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect push to={this.state.redirect} />;\n    }\n\n    const { namespaces, params, itemCount } = this.state;\n    const { filterOwner } = this.props;\n    const { user, alerts } = this.context;\n    const noData =\n      !filterIsSet(this.state.params, ['keywords']) &&\n      namespaces !== undefined &&\n      namespaces.length === 0;\n\n    if (!namespaces) {\n      return <LoadingPageWithHeader></LoadingPageWithHeader>;\n    }\n\n    let extra = [];\n\n    if (user?.model_permissions?.add_namespace) {\n      extra.push(\n        <ToolbarItem key='create-button'>\n          <Button variant='primary' onClick={this.handleModalToggle}>\n            {t`Create`}\n          </Button>\n        </ToolbarItem>,\n      );\n    }\n\n    const title = namespaceBreadcrumb.name;\n    const titleLowerCase = title.toLowerCase();\n    const search = filterOwner\n      ? t`Search my namespaces`\n      : t`Search all ${titleLowerCase}`;\n\n    return (\n      <div className='namespace-page'>\n        <NamespaceModal\n          isOpen={this.state.isModalOpen}\n          toggleModal={this.handleModalToggle}\n          onCreateSuccess={(result) =>\n            this.setState({\n              redirect: formatPath(Paths.myCollections, {\n                namespace: result['name'],\n              }),\n            })\n          }\n        ></NamespaceModal>\n        <AlertList alerts={alerts} closeAlert={(i) => this.closeAlert(i)} />\n        <BaseHeader title={title}>\n          <div className='tab-link-container'>\n            <div className='tabs'>\n              <LinkTabs\n                tabs={[\n                  {\n                    title: t`All`,\n                    link: Paths[NAMESPACE_TERM],\n                    active: !filterOwner,\n                  },\n                  {\n                    title: t`My namespaces`,\n                    link: Paths.myNamespaces,\n                    active: filterOwner,\n                  },\n                ]}\n              />\n            </div>\n          </div>\n          {noData ? null : (\n            <div className='toolbar'>\n              <Toolbar\n                params={params}\n                sortOptions={[{ title: t`Name`, id: 'name', type: 'alpha' }]}\n                searchPlaceholder={search}\n                updateParams={(p) =>\n                  this.updateParams(p, () => this.loadNamespaces())\n                }\n                extraInputs={extra}\n              />\n              <div>\n                <Pagination\n                  params={params}\n                  updateParams={(p) =>\n                    this.updateParams(p, () => this.loadNamespaces())\n                  }\n                  count={itemCount}\n                  isCompact\n                  perPageOptions={Constants.CARD_DEFAULT_PAGINATION_OPTIONS}\n                />\n              </div>\n            </div>\n          )}\n        </BaseHeader>\n        <section className='card-area'>{this.renderBody()}</section>\n        {noData ? null : (\n          <section className='footer'>\n            <Pagination\n              params={params}\n              updateParams={(p) =>\n                this.updateParams(p, () => this.loadNamespaces())\n              }\n              perPageOptions={Constants.CARD_DEFAULT_PAGINATION_OPTIONS}\n              count={itemCount}\n            />\n          </section>\n        )}\n      </div>\n    );\n  }\n\n  private renderBody() {\n    const { namespaces, loading } = this.state;\n    const { namespacePath, filterOwner } = this.props;\n    const { user } = this.context;\n\n    const noDataTitle = t`No namespaces yet`;\n    const noDataDescription = !filterOwner\n      ? t`Namespaces will appear once created`\n      : t`This account is not set up to manage any namespaces`;\n\n    const noDataButton = user?.model_permissions?.add_namespace ? (\n      <Button variant='primary' onClick={() => this.handleModalToggle()}>\n        {t`Create`}\n      </Button>\n    ) : null;\n\n    if (loading) {\n      return (\n        <section>\n          <LoadingPageSpinner></LoadingPageSpinner>;\n        </section>\n      );\n    }\n\n    if (namespaces.length === 0) {\n      return (\n        <section>\n          {filterIsSet(this.state.params, ['keywords']) ? (\n            <EmptyStateFilter />\n          ) : (\n            <EmptyStateNoData\n              title={noDataTitle}\n              description={noDataDescription}\n              button={noDataButton}\n            />\n          )}\n        </section>\n      );\n    }\n\n    return (\n      <section className='card-layout'>\n        {namespaces.map((ns, i) => (\n          <div key={i} className='card-wrapper'>\n            <NamespaceCard\n              namespaceURL={formatPath(namespacePath, {\n                namespace: ns.name,\n                repo: this.context.selectedRepo,\n              })}\n              key={i}\n              {...ns}\n            ></NamespaceCard>\n          </div>\n        ))}\n      </section>\n    );\n  }\n\n  private loadNamespaces() {\n    let apiFunc: any;\n\n    if (this.props.filterOwner) {\n      apiFunc = (p) => MyNamespaceAPI.list(p);\n    } else {\n      apiFunc = (p) => NamespaceAPI.list(p);\n    }\n    this.setState({ loading: true }, () => {\n      apiFunc(this.state.params).then((results) => {\n        this.setState({\n          namespaces: results.data.data,\n          itemCount: results.data.meta.count,\n          loading: false,\n        });\n      });\n    });\n  }\n\n  private get updateParams() {\n    return ParamHelper.updateParamsMixin(this.nonURLParams);\n  }\n\n  private closeAlert(i) {\n    this.context.setAlerts([]);\n  }\n}\n\nNamespaceList.contextType = AppContext;\n","import * as React from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\nimport { NamespaceList } from './namespace-list';\nimport { Paths } from 'src/paths';\n\nclass Partners extends React.Component<RouteComponentProps, {}> {\n  render() {\n    return (\n      <NamespaceList\n        {...this.props}\n        namespacePath={Paths.namespaceByRepo}\n        filterOwner={false}\n      />\n    );\n  }\n}\n\nexport default withRouter(Partners);\n"],"names":["MyNamespaces","this","props","namespacePath","Paths","filterOwner","React","withRouter","NamespaceList","setState","isModalOpen","params","ParamHelper","location","search","state","namespaces","undefined","itemCount","hasPermission","loading","MyNamespaceAPI","then","results","data","meta","count","loadNamespaces","context","setAlerts","redirect","push","to","user","alerts","noData","filterIsSet","length","extra","model_permissions","add_namespace","key","variant","onClick","handleModalToggle","title","namespaceBreadcrumb","titleLowerCase","toLowerCase","className","isOpen","toggleModal","onCreateSuccess","result","formatPath","namespace","closeAlert","i","tabs","link","active","sortOptions","id","type","searchPlaceholder","updateParams","p","extraInputs","isCompact","perPageOptions","Constants","renderBody","noDataTitle","noDataDescription","noDataButton","description","button","map","ns","namespaceURL","name","repo","selectedRepo","apiFunc","NamespaceAPI","nonURLParams","contextType","AppContext","Partners"],"sourceRoot":""}